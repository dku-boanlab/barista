<html>
<head>
<title>cbench/openflow/lib/netdev.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/1100.html'>cbench</a>/<a href='../files/1124.html'>openflow</a>/<a href='../files/1140.html'>lib</a>/netdev.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L151'>[^]</a><a href='#L1580'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L151' title='Defined at 151.'>get_ipv6_address</a>
<li><a href='#L208' title='Defined at 208.'>netdev_setup_root_class</a>
<li><a href='#L240' title='Defined at 240.'>netdev_setup_class</a>
<li><a href='#L272' title='Defined at 272.'>netdev_change_class</a>
<li><a href='#L301' title='Defined at 301.'>netdev_delete_class</a>
<li><a href='#L317' title='Defined at 317.'>open_queue_socket</a>
<li><a href='#L393' title='Defined at 393.'>do_setup_qdisc</a>
<li><a href='#L412' title='Defined at 412.'>do_remove_qdisc</a>
<li><a href='#L431' title='Defined at 431.'>netdev_setup_slicing</a>
<li><a href='#L490' title='Defined at 490.'>do_ethtool</a>
<li><a href='#L628' title='Defined at 628.'>netdev_open</a>
<li><a href='#L643' title='Defined at 643.'>netdev_open_tap</a>
<li><a href='#L684' title='Defined at 684.'>do_open_netdev</a>
<li><a href='#L821' title='Defined at 821.'>netdev_close</a>
<li><a href='#L855' title='Defined at 855.'>pad_to_minimum_length</a>
<li><a href='#L875' title='Defined at 875.'>netdev_recv</a>
<li><a href='#L932' title='Defined at 932.'>netdev_recv_wait</a>
<li><a href='#L939' title='Defined at 939.'>netdev_drain</a>
<li><a href='#L963' title='Defined at 963.'>netdev_send</a>
<li><a href='#L1003' title='Defined at 1003.'>netdev_send_wait</a>
<li><a href='#L1016' title='Defined at 1016.'>netdev_set_etheraddr</a>
<li><a href='#L1036' title='Defined at 1036.'>netdev_get_etheraddr</a>
<li><a href='#L1044' title='Defined at 1044.'>netdev_get_name</a>
<li><a href='#L1053' title='Defined at 1053.'>netdev_get_mtu</a>
<li><a href='#L1061' title='Defined at 1061.'>netdev_get_features</a>
<li><a href='#L1082' title='Defined at 1082.'>netdev_get_in4</a>
<li><a href='#L1103' title='Defined at 1103.'>make_in4_sockaddr</a>
<li><a href='#L1116' title='Defined at 1116.'>do_set_addr</a>
<li><a href='#L1135' title='Defined at 1135.'>netdev_set_in4</a>
<li><a href='#L1150' title='Defined at 1150.'>netdev_add_router</a>
<li><a href='#L1171' title='Defined at 1171.'>netdev_get_in6</a>
<li><a href='#L1182' title='Defined at 1182.'>netdev_get_flags</a>
<li><a href='#L1188' title='Defined at 1188.'>nd_to_iff_flags</a>
<li><a href='#L1205' title='Defined at 1205.'>do_update_flags</a>
<li><a href='#L1231' title='Defined at 1231.'>netdev_set_flags</a>
<li><a href='#L1242' title='Defined at 1242.'>netdev_turn_flags_on</a>
<li><a href='#L1253' title='Defined at 1253.'>netdev_turn_flags_off</a>
<li><a href='#L1264' title='Defined at 1264.'>netdev_arp_lookup</a>
<li><a href='#L1291' title='Defined at 1291.'>netdev_enumerate</a>
<li><a href='#L1317' title='Defined at 1317.'>netdev_nodev_get_flags</a>
<li><a href='#L1364' title='Defined at 1364.'>netdev_monitor_create</a>
<li><a href='#L1387' title='Defined at 1387.'>netdev_monitor_destroy</a>
<li><a href='#L1401' title='Defined at 1401.'>netdev_monitor_set_devices</a>
<li><a href='#L1421' title='Defined at 1421.'>netdev_monitor_poll</a>
<li><a href='#L1467' title='Defined at 1467.'>netdev_monitor_run</a>
<li><a href='#L1473' title='Defined at 1473.'>netdev_monitor_wait</a>
<li><a href='#L1479' title='Defined at 1479.'>lookup_netdev</a>
<li><a href='#L1486' title='Defined at 1486.'>pop_changed</a>
<li><a href='#L1499' title='Defined at 1499.'>all_netdevs_changed</a>
<li><a href='#L1511' title='Defined at 1511.'>init_netdev</a>
<li><a href='#L1530' title='Defined at 1530.'>restore_flags</a>
<li><a href='#L1557' title='Defined at 1557.'>restore_all_flags</a>
<li><a href='#L1566' title='Defined at 1566.'>get_flags</a>
<li><a href='#L1580' title='Defined at 1580.'>set_flags</a>
</ol>
<hr>
<pre>
<a name='L1'>   1 <i><font color='green'>/* Copyright (c) 2008, 2009 The Board of Trustees of The Leland Stanford</font></i>
<a name='L2'>   2 <i><font color='green'> * Junior University</font></i>
<a name='L3'>   3 <i><font color='green'> *</font></i>
<a name='L4'>   4 <i><font color='green'> * We are making the OpenFlow specification and associated documentation</font></i>
<a name='L5'>   5 <i><font color='green'> * (Software) available for public use and benefit with the expectation</font></i>
<a name='L6'>   6 <i><font color='green'> * that others will use, modify and enhance the Software and contribute</font></i>
<a name='L7'>   7 <i><font color='green'> * those enhancements back to the community. However, since we would</font></i>
<a name='L8'>   8 <i><font color='green'> * like to make the Software available for broadest use, with as few</font></i>
<a name='L9'>   9 <i><font color='green'> * restrictions as possible permission is hereby granted, free of</font></i>
<a name='L10'>  10 <i><font color='green'> * charge, to any person obtaining a copy of this Software to deal in</font></i>
<a name='L11'>  11 <i><font color='green'> * the Software under the copyrights without restriction, including</font></i>
<a name='L12'>  12 <i><font color='green'> * without limitation the rights to use, copy, modify, merge, publish,</font></i>
<a name='L13'>  13 <i><font color='green'> * distribute, sublicense, and/or sell copies of the Software, and to</font></i>
<a name='L14'>  14 <i><font color='green'> * permit persons to whom the Software is furnished to do so, subject to</font></i>
<a name='L15'>  15 <i><font color='green'> * the following conditions:</font></i>
<a name='L16'>  16 <i><font color='green'> *</font></i>
<a name='L17'>  17 <i><font color='green'> * The above copyright notice and this permission notice shall be</font></i>
<a name='L18'>  18 <i><font color='green'> * included in all copies or substantial portions of the Software.</font></i>
<a name='L19'>  19 <i><font color='green'> *</font></i>
<a name='L20'>  20 <i><font color='green'> * THE SOFTWRE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,</font></i>
<a name='L21'>  21 <i><font color='green'> * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</font></i>
<a name='L22'>  22 <i><font color='green'> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</font></i>
<a name='L23'>  23 <i><font color='green'> * NONINFRINGEMENT.  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS</font></i>
<a name='L24'>  24 <i><font color='green'> * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN</font></i>
<a name='L25'>  25 <i><font color='green'> * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</font></i>
<a name='L26'>  26 <i><font color='green'> * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</font></i>
<a name='L27'>  27 <i><font color='green'> * SOFTWARE.</font></i>
<a name='L28'>  28 <i><font color='green'> *</font></i>
<a name='L29'>  29 <i><font color='green'> * The name and trademarks of copyright holder(s) may NOT be used in</font></i>
<a name='L30'>  30 <i><font color='green'> * advertising or publicity pertaining to the Software or any</font></i>
<a name='L31'>  31 <i><font color='green'> * derivatives without specific, written prior permission.</font></i>
<a name='L32'>  32 <i><font color='green'> */</font></i>
<a name='L33'>  33 
<a name='L34'>  34 <font color='darkred'>#include</font> &lt;<a href='588.html'>config.h</a>&gt;
<a name='L35'>  35 <font color='darkred'>#include</font> "<a href='814.html'>netdev.h</a>"
<a name='L36'>  36 
<a name='L37'>  37 <font color='darkred'>#include</font> &lt;assert.h&gt;
<a name='L38'>  38 <font color='darkred'>#include</font> &lt;errno.h&gt;
<a name='L39'>  39 <font color='darkred'>#include</font> &lt;fcntl.h&gt;
<a name='L40'>  40 <font color='darkred'>#include</font> &lt;arpa/inet.h&gt;
<a name='L41'>  41 <font color='darkred'>#include</font> &lt;inttypes.h&gt;
<a name='L42'>  42 <font color='darkred'>#include</font> &lt;linux/if_tun.h&gt;
<a name='L43'>  43 
<a name='L44'>  44 <i><font color='green'>/* Fix for some compile issues we were experiencing when setting up openwrt</font></i>
<a name='L45'>  45 <i><font color='green'> * with the 2.4 kernel. linux/ethtool.h seems to use kernel-style inttypes,</font></i>
<a name='L46'>  46 <i><font color='green'> * which breaks in userspace.</font></i>
<a name='L47'>  47 <i><font color='green'> */</font></i>
<a name='L48'>  48 <font color='darkred'>#ifndef</font> <a href='../Y/1134.html' title='Multiple used in 11 places.'>__KERNEL__</a>
<a name='L49'>  49 <font color='darkred'>#include</font> &lt;<a href='315.html'>linux/types.h</a>&gt;
<a name='L50'>  50 <font color='darkred'>#define</font> <a href='../R/4861.html' title='Multiple refered from 3 places.'>u8</a> __u8
<a name='L51'>  51 <font color='darkred'>#define</font> <a href='../R/4858.html' title='Multiple refered from 2 places.'>u16</a> <a href='../Y/1183.html' title='Multiple used in 2 places.'>__u16</a>
<a name='L52'>  52 <font color='darkred'>#define</font> <a href='../R/4859.html' title='Multiple refered from 13 places.'>u32</a> <a href='../Y/1184.html' title='Multiple used in 2 places.'>__u32</a>
<a name='L53'>  53 <font color='darkred'>#define</font> <a href='../R/4860.html' title='Multiple refered from 4 places.'>u64</a> <a href='../Y/1185.html' title='Multiple used in 5 places.'>__u64</a>
<a name='L54'>  54 <font color='darkred'>#define</font> s8 __s8
<a name='L55'>  55 <font color='darkred'>#define</font> s16 __s16
<a name='L56'>  56 <font color='darkred'>#define</font> s32 __s32
<a name='L57'>  57 <font color='darkred'>#define</font> <a href='../R/4394.html' title='Multiple refered from 3 places.'>s64</a> <a href='../Y/1179.html' title='Multiple used in 3 places.'>__s64</a>
<a name='L58'>  58 <font color='darkred'>#endif</font>
<a name='L59'>  59 
<a name='L60'>  60 <font color='darkred'>#include</font> &lt;linux/ethtool.h&gt;
<a name='L61'>  61 <font color='darkred'>#include</font> &lt;linux/rtnetlink.h&gt;
<a name='L62'>  62 <font color='darkred'>#include</font> &lt;linux/sockios.h&gt;
<a name='L63'>  63 <font color='darkred'>#include</font> &lt;linux/version.h&gt;
<a name='L64'>  64 <font color='darkred'>#include</font> &lt;<a href='315.html'>sys/types.h</a>&gt;
<a name='L65'>  65 <font color='darkred'>#include</font> &lt;sys/ioctl.h&gt;
<a name='L66'>  66 <font color='darkred'>#include</font> &lt;sys/socket.h&gt;
<a name='L67'>  67 <font color='darkred'>#include</font> &lt;<a href='446.html'>netpacket/packet.h</a>&gt;
<a name='L68'>  68 <font color='darkred'>#include</font> &lt;net/ethernet.h&gt;
<a name='L69'>  69 <font color='darkred'>#include</font> &lt;net/if.h&gt;
<a name='L70'>  70 <font color='darkred'>#include</font> &lt;<a href='312.html'>net/if_arp.h</a>&gt;
<a name='L71'>  71 <font color='darkred'>#include</font> &lt;net/if_packet.h&gt;
<a name='L72'>  72 <font color='darkred'>#include</font> &lt;net/route.h&gt;
<a name='L73'>  73 <font color='darkred'>#include</font> &lt;netinet/in.h&gt;
<a name='L74'>  74 <font color='darkred'>#include</font> &lt;stdlib.h&gt;
<a name='L75'>  75 <font color='darkred'>#include</font> &lt;string.h&gt;
<a name='L76'>  76 <font color='darkred'>#include</font> &lt;unistd.h&gt;
<a name='L77'>  77 
<a name='L78'>  78 <font color='darkred'>#include</font> "<a href='888.html'>fatal-signal.h</a>"
<a name='L79'>  79 <font color='darkred'>#include</font> "<a href='916.html'>list.h</a>"
<a name='L80'>  80 <font color='darkred'>#include</font> "<a href='../I/128.html'>netlink.h</a>"
<a name='L81'>  81 <font color='darkred'>#include</font> "<a href='865.html'>ofpbuf.h</a>"
<a name='L82'>  82 <font color='darkred'>#include</font> "<a href='181.html'>openflow/openflow.h</a>"
<a name='L83'>  83 <font color='darkred'>#include</font> "<a href='860.html'>packets.h</a>"
<a name='L84'>  84 <font color='darkred'>#include</font> "<a href='901.html'>poll-loop.h</a>"
<a name='L85'>  85 <font color='darkred'>#include</font> "<a href='863.html'>socket-util.h</a>"
<a name='L86'>  86 <font color='darkred'>#include</font> "<a href='839.html'>svec.h</a>"
<a name='L87'>  87 
<a name='L88'>  88 <i><font color='green'>/* linux/if.h defines IFF_LOWER_UP, net/if.h doesn't.</font></i>
<a name='L89'>  89 <i><font color='green'> * net/if.h defines if_nameindex(), linux/if.h doesn't.</font></i>
<a name='L90'>  90 <i><font color='green'> * We can't include both headers, so define IFF_LOWER_UP ourselves. */</font></i>
<a name='L91'>  91 <font color='darkred'>#ifndef</font> <a href='../S/851.html#L92' title='Defined at 92 in cbench/openflow/lib/netdev.c.'>IFF_LOWER_UP</a>
<a name='L92'>  92 <font color='darkred'>#define</font> <a href='../R/711.html' title='Multiple refered from 2 places.'>IFF_LOWER_UP</a> 0x10000
<a name='L93'>  93 <font color='darkred'>#endif</font>
<a name='L94'>  94 
<a name='L95'>  95 <font color='darkred'>#define</font> <a href='../R/1643.html' title='Multiple refered from 13 places.'>THIS_MODULE</a> VLM_netdev
<a name='L96'>  96 <font color='darkred'>#include</font> "<a href='859.html'>vlog.h</a>"
<a name='L97'>  97 
<a name='L98'>  98 <b>struct</b> <a href='../R/3562.html' title='Multiple refered from 339 places.'>netdev</a> <font color='red'>{</font>
<a name='L99'>  99     <b>struct</b> <a href='../S/916.html#L43' title='Defined at 43 in cbench/openflow/lib/list.h.'>list</a> <a href='../Y/4917.html' title='Multiple used in 268 places.'>node</a>;
<a name='L100'> 100     <b>char</b> *<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>;
<a name='L101'> 101 
<a name='L102'> 102     <i><font color='green'>/* File descriptors.  For ordinary network devices, the two fds below are</font></i>
<a name='L103'> 103 <i><font color='green'>     * the same; for tap devices, they differ. */</font></i>
<a name='L104'> 104     <b>int</b> <a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>;              <i><font color='green'>/* Network device. */</font></i>
<a name='L105'> 105     <b>int</b> <a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>;                 <i><font color='green'>/* TAP character device, if any, otherwise the</font></i>
<a name='L106'> 106 <i><font color='green'>                                 * network device. */</font></i>
<a name='L107'> 107 
<a name='L108'> 108     <i><font color='green'>/* one socket per queue.These are valid only for ordinary network devices*/</font></i>
<a name='L109'> 109     <b>int</b> <a href='../Y/6208.html' title='Multiple used in 5 places.'>queue_fd</a>[<a href='../S/814.html#L71' title='Defined at 71 in cbench/openflow/lib/netdev.h.'>NETDEV_MAX_QUEUES</a> + 1];
<a name='L110'> 110     <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/4996.html' title='Multiple used in 24 places.'>num_queues</a>;
<a name='L111'> 111 
<a name='L112'> 112     <i><font color='green'>/* Cached network device information. */</font></i>
<a name='L113'> 113     <b>int</b> <a href='../Y/3735.html' title='Multiple used in 13 places.'>ifindex</a>;
<a name='L114'> 114     <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> <a href='../Y/2811.html' title='Multiple used in 6 places.'>etheraddr</a>[<a href='../S/860.html#L42' title='Defined at 42 in cbench/openflow/lib/packets.h.'>ETH_ADDR_LEN</a>];
<a name='L115'> 115     <b>struct</b> <a href='../Y/3762.html' title='Multiple used in 7 places.'>in6_addr</a> <a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>;
<a name='L116'> 116     <b>int</b> <a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a>;
<a name='L117'> 117     <b>int</b> <a href='../Y/4539.html' title='Multiple used in 9 places.'>mtu</a>;
<a name='L118'> 118     <b>int</b> <a href='../Y/7551.html' title='Multiple used in 5 places.'>txqlen</a>;
<a name='L119'> 119     <b>int</b> <a href='../Y/3698.html' title='Multiple used in 7 places.'>hwaddr_family</a>;
<a name='L120'> 120 
<a name='L121'> 121     <i><font color='green'>/* Bitmaps of OFPPF_* that describe features.  All bits disabled if</font></i>
<a name='L122'> 122 <i><font color='green'>     * unsupported or unavailable. */</font></i>
<a name='L123'> 123     <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a>;              <i><font color='green'>/* Current features. */</font></i>
<a name='L124'> 124     <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a>;        <i><font color='green'>/* Features being advertised by the port. */</font></i>
<a name='L125'> 125     <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a>;         <i><font color='green'>/* Features supported by the port. */</font></i>
<a name='L126'> 126     <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/5700.html' title='Multiple used in 46 places.'>peer</a>;              <i><font color='green'>/* Features advertised by the peer. */</font></i>
<a name='L127'> 127 
<a name='L128'> 128     <b>int</b> <a href='../Y/6587.html' title='Multiple used in 4 places.'>save_flags</a>;             <i><font color='green'>/* Initial device flags. */</font></i>
<a name='L129'> 129     <b>int</b> <a href='../Y/1854.html' title='Multiple used in 4 places.'>changed_flags</a>;          <i><font color='green'>/* Flags that we changed. */</font></i>
<a name='L130'> 130 <font color='red'>}</font>;
<a name='L131'> 131 
<a name='L132'> 132 <i><font color='green'>/* All open network devices. */</font></i>
<a name='L133'> 133 <b>static</b> <b>struct</b> <a href='../S/916.html#L43' title='Defined at 43 in cbench/openflow/lib/list.h.'>list</a> <a href='../Y/4714.html' title='Multiple used in 3 places.'>netdev_list</a> = <a href='../S/916.html#L49' title='Defined at 49 in cbench/openflow/lib/list.h.'>LIST_INITIALIZER</a>(&amp;<a href='../Y/4714.html' title='Multiple used in 3 places.'>netdev_list</a>);
<a name='L134'> 134 
<a name='L135'> 135 <i><font color='green'>/* An AF_INET socket (used for ioctl operations). */</font></i>
<a name='L136'> 136 <b>static</b> <b>int</b> <a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a> = -1;
<a name='L137'> 137 
<a name='L138'> 138 <i><font color='green'>/* This is set pretty low because we probably won't learn anything from the</font></i>
<a name='L139'> 139 <i><font color='green'> * additional log messages. */</font></i>
<a name='L140'> 140 <b>static</b> <b>struct</b> <a href='../D/10099.html' title='Multiple defined in 2 places.'>vlog_rate_limit</a> <a href='../Y/6448.html' title='Multiple used in 214 places.'>rl</a> = <a href='../S/859.html#L107' title='Defined at 107 in cbench/openflow/lib/vlog.h.'>VLOG_RATE_LIMIT_INIT</a>(5, 20);
<a name='L141'> 141 
<a name='L142'> 142 <b>static</b> <b>void</b> <a href='../S/851.html#L1511' title='Defined at 1511 in cbench/openflow/lib/netdev.c.'>init_netdev</a>(<b>void</b>);
<a name='L143'> 143 <b>static</b> <b>int</b> <a href='../S/851.html#L684' title='Defined at 684 in cbench/openflow/lib/netdev.c.'>do_open_netdev</a>(<b>const</b> <b>char</b> *<a href='../Y/4631.html' title='Multiple used in 221 places.'>name</a>, <b>int</b> <a href='../Y/2814.html' title='Multiple used in 20 places.'>ethertype</a>, <b>int</b> <a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>,
<a name='L144'> 144                           <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> **<a href='../Y/4710.html' title='Multiple used in 4 places.'>netdev_</a>);
<a name='L145'> 145 <b>static</b> <b>int</b> <a href='../S/851.html#L1530' title='Defined at 1530 in cbench/openflow/lib/netdev.c.'>restore_flags</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>);
<a name='L146'> 146 <b>static</b> <b>int</b> <a href='../S/851.html#L1566' title='Defined at 1566 in cbench/openflow/lib/netdev.c.'>get_flags</a>(<b>const</b> <b>char</b> *<a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, <b>int</b> *<a href='../Y/3122.html' title='Multiple used in 8 places.'>flagsp</a>);
<a name='L147'> 147 <b>static</b> <b>int</b> <a href='../S/851.html#L1580' title='Defined at 1580 in cbench/openflow/lib/netdev.c.'>set_flags</a>(<b>const</b> <b>char</b> *<a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, <b>int</b> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>);
<a name='L148'> 148 
<a name='L149'> 149 <i><font color='green'>/* Obtains the IPv6 address for 'name' into 'in6'. */</font></i>
<a name='L150'> 150 <b>static</b> <b>void</b>
<a name='L151'> 151 <a href='../S/851.html#L776' title='Refered from 776 in cbench/openflow/lib/netdev.c.'>get_ipv6_address</a>(<b>const</b> <b>char</b> *<a href='../Y/4631.html' title='Multiple used in 221 places.'>name</a>, <b>struct</b> <a href='../Y/3762.html' title='Multiple used in 7 places.'>in6_addr</a> *<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>)
<a name='L152'> 152 <font color='red'>{</font>
<a name='L153'> 153     <a href='../Y/328.html' title='Multiple used in 113 places.'>FILE</a> *<a href='../Y/3043.html' title='Multiple used in 106 places.'>file</a>;
<a name='L154'> 154     <b>char</b> <a href='../Y/4135.html' title='Multiple used in 66 places.'>line</a>[128];
<a name='L155'> 155 
<a name='L156'> 156     <a href='../Y/3043.html' title='Multiple used in 106 places.'>file</a> = <a href='../Y/3190.html' title='Multiple used in 43 places.'>fopen</a>("/proc/net/if_inet6", "r");
<a name='L157'> 157     <b>if</b> (<a href='../Y/3043.html' title='Multiple used in 106 places.'>file</a> == <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>) <font color='red'>{</font>
<a name='L158'> 158         <i><font color='green'>/* This most likely indicates that the host doesn't have IPv6 support,</font></i>
<a name='L159'> 159 <i><font color='green'>         * so it's not really a failure condition.*/</font></i>
<a name='L160'> 160         *<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a> = <a href='../Y/3764.html' title='Multiple used in 3 places.'>in6addr_any</a>;
<a name='L161'> 161         <b>return</b>;
<a name='L162'> 162     <font color='red'>}</font>
<a name='L163'> 163 
<a name='L164'> 164     <b>while</b> (<a href='../Y/3031.html' title='Multiple used in 17 places.'>fgets</a>(<a href='../Y/4135.html' title='Multiple used in 66 places.'>line</a>, <b>sizeof</b> <a href='../Y/4135.html' title='Multiple used in 66 places.'>line</a>, <a href='../Y/3043.html' title='Multiple used in 106 places.'>file</a>)) <font color='red'>{</font>
<a name='L165'> 165         <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> *<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a> = <a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>-&gt;s6_addr;
<a name='L166'> 166         <b>char</b> <a href='../Y/3737.html' title='Multiple used in 5 places.'>ifname</a>[16 + 1];
<a name='L167'> 167 
<a name='L168'> 168 <font color='darkred'>#define</font> <a href='../S/851.html#L169' title='Refered from 169 in cbench/openflow/lib/netdev.c.'>X8</a> "%2"<a href='../Y/761.html' title='Multiple used in 2 places.'>SCNx8</a>
<a name='L169'> 169         <b>if</b> (<a href='../Y/6952.html' title='Multiple used in 16 places.'>sscanf</a>(<a href='../Y/4135.html' title='Multiple used in 66 places.'>line</a>, " "<a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a> <a href='../S/851.html#L168' title='Defined at 168 in cbench/openflow/lib/netdev.c.'>X8</a>
<a name='L170'> 170                    "%*x %*x %*x %*x %16s\n",
<a name='L171'> 171                    &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[0], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[1], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[2], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[3],
<a name='L172'> 172                    &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[4], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[5], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[6], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[7],
<a name='L173'> 173                    &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[8], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[9], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[10], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[11],
<a name='L174'> 174                    &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[12], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[13], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[14], &amp;<a href='../Y/6556.html' title='Multiple used in 5 places.'>s6</a>[15],
<a name='L175'> 175                    <a href='../Y/3737.html' title='Multiple used in 5 places.'>ifname</a>) == 17
<a name='L176'> 176             &amp;&amp; !<a href='../Y/7082.html' title='Multiple used in 371 places.'>strcmp</a>(<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/3737.html' title='Multiple used in 5 places.'>ifname</a>))
<a name='L177'> 177         <font color='red'>{</font>
<a name='L178'> 178             <a href='../Y/3012.html' title='Multiple used in 34 places.'>fclose</a>(<a href='../Y/3043.html' title='Multiple used in 106 places.'>file</a>);
<a name='L179'> 179             <b>return</b>;
<a name='L180'> 180         <font color='red'>}</font>
<a name='L181'> 181     <font color='red'>}</font>
<a name='L182'> 182     *<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a> = <a href='../Y/3764.html' title='Multiple used in 3 places.'>in6addr_any</a>;
<a name='L183'> 183 
<a name='L184'> 184     <a href='../Y/3012.html' title='Multiple used in 34 places.'>fclose</a>(<a href='../Y/3043.html' title='Multiple used in 106 places.'>file</a>);
<a name='L185'> 185 <font color='red'>}</font>
<a name='L186'> 186 
<a name='L187'> 187 <i><font color='green'>/* All queues in a port, lie beneath a qdisc */</font></i>
<a name='L188'> 188 <font color='darkred'>#define</font> <a href='../R/1638.html' title='Multiple refered from 6 places.'>TC_QDISC</a> 0x0001
<a name='L189'> 189 <i><font color='green'>/* This is a root class. In order to efficiently share excess bandwidth</font></i>
<a name='L190'> 190 <i><font color='green'> * tc requires that all classes are under a common root class */</font></i>
<a name='L191'> 191 <font color='darkred'>#define</font> <a href='../R/1639.html' title='Multiple refered from 4 places.'>TC_ROOT_CLASS</a> 0xffff
<a name='L192'> 192 <i><font color='green'>/* This is the queue_id for packets that do not match in any other queue.</font></i>
<a name='L193'> 193 <i><font color='green'> * It has min_rate = 0. This is a placeholder for best-effort traffic</font></i>
<a name='L194'> 194 <i><font color='green'> * without any bandwidth guarantees */</font></i>
<a name='L195'> 195 <font color='darkred'>#define</font> <a href='../R/1637.html' title='Multiple refered from 2 places.'>TC_DEFAULT_CLASS</a> 0xfffe
<a name='L196'> 196 <font color='darkred'>#define</font> TC_MIN_RATE 1
<a name='L197'> 197 <i><font color='green'>/* This configures an HTB qdisc under the defined device. */</font></i>
<a name='L198'> 198 <font color='darkred'>#define</font> <a href='../S/851.html#L398' title='Refered from 398 in cbench/openflow/lib/netdev.c.'>COMMAND_ADD_DEV_QDISC</a> "/sbin/tc qdisc add dev %s " \
<a name='L199'> 199                               "root handle %x: htb default %x"
<a name='L200'> 200 <font color='darkred'>#define</font> <a href='../S/851.html#L416' title='Refered from 416 in cbench/openflow/lib/netdev.c.'>COMMAND_DEL_DEV_QDISC</a> "/sbin/tc qdisc del dev %s root"
<a name='L201'> 201 <font color='darkred'>#define</font> <a href='../R/213.html' title='Multiple refered from 2 places.'>COMMAND_ADD_CLASS</a> "/sbin/tc class add dev %s parent %x:%x " \
<a name='L202'> 202                           "classid %x:%x htb rate %dkbit ceil %dkbit"
<a name='L203'> 203 <font color='darkred'>#define</font> <a href='../S/851.html#L280' title='Refered from 280 in cbench/openflow/lib/netdev.c.'>COMMAND_CHANGE_CLASS</a> "/sbin/tc class change dev %s parent %x:%x " \
<a name='L204'> 204                              "classid %x:%x htb rate %dkbit ceil %dkbit"
<a name='L205'> 205 <font color='darkred'>#define</font> <a href='../S/851.html#L305' title='Refered from 305 in cbench/openflow/lib/netdev.c.'>COMMAND_DEL_CLASS</a> "/sbin/tc class del dev %s parent %x:%x classid %x:%x"
<a name='L206'> 206 
<a name='L207'> 207 <b>static</b> <b>int</b>
<a name='L208'> 208 <a href='../S/851.html#L455' title='Refered from 455 in cbench/openflow/lib/netdev.c.'>netdev_setup_root_class</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>,
<a name='L209'> 209                         <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/6242.html' title='Multiple used in 26 places.'>rate</a>)
<a name='L210'> 210 <font color='red'>{</font>
<a name='L211'> 211     <b>char</b> <a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>[1024];
<a name='L212'> 212     <b>int</b> <a href='../Y/1304.html' title='Multiple used in 9 places.'>actual_rate</a>;
<a name='L213'> 213 
<a name='L214'> 214     <i><font color='green'>/* we need to translate from .1% to kbps */</font></i>
<a name='L215'> 215     <a href='../Y/1304.html' title='Multiple used in 9 places.'>actual_rate</a> = <a href='../Y/6242.html' title='Multiple used in 26 places.'>rate</a>*<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a>;
<a name='L216'> 216 
<a name='L217'> 217     <a href='../Y/6891.html' title='Multiple used in 224 places.'>snprintf</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>, <b>sizeof</b>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>), <a href='../S/851.html#L201' title='Defined at 201 in cbench/openflow/lib/netdev.c.'>COMMAND_ADD_CLASS</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>,
<a name='L218'> 218              <a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>,0,<a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>, <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>, <a href='../Y/1304.html' title='Multiple used in 9 places.'>actual_rate</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a>*1000);
<a name='L219'> 219     <b>if</b> (<a href='../Y/7213.html' title='Multiple used in 11 places.'>system</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>) != 0) <font color='red'>{</font>
<a name='L220'> 220         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("Problem configuring root class %d for device %s",
<a name='L221'> 221                  <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L222'> 222         <b>return</b> -1;
<a name='L223'> 223     <font color='red'>}</font>
<a name='L224'> 224 
<a name='L225'> 225     <b>return</b> 0;
<a name='L226'> 226 <font color='red'>}</font>
<a name='L227'> 227 
<a name='L228'> 228 <i><font color='green'>/** Defines a class for the specific queue discipline. A class</font></i>
<a name='L229'> 229 <i><font color='green'> * represents an OpenFlow queue.</font></i>
<a name='L230'> 230 <i><font color='green'> *</font></i>
<a name='L231'> 231 <i><font color='green'> * @param netdev the device under configuration</font></i>
<a name='L232'> 232 <i><font color='green'> * @param class_id unique identifier for this queue. TC limits this to 16-bits,</font></i>
<a name='L233'> 233 <i><font color='green'> * so we need to keep an internal mapping between class_id and OpenFlow</font></i>
<a name='L234'> 234 <i><font color='green'> * queue_id</font></i>
<a name='L235'> 235 <i><font color='green'> * @param rate the minimum rate for this queue in kbps</font></i>
<a name='L236'> 236 <i><font color='green'> * @return 0 on success, non-zero value when the configuration was not</font></i>
<a name='L237'> 237 <i><font color='green'> * successful.</font></i>
<a name='L238'> 238 <i><font color='green'> */</font></i>
<a name='L239'> 239 <b>int</b>
<a name='L240'> 240 <a href='../R/3595.html' title='Multiple refered from 3 places.'>netdev_setup_class</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>,
<a name='L241'> 241                    <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/6242.html' title='Multiple used in 26 places.'>rate</a>)
<a name='L242'> 242 <font color='red'>{</font>
<a name='L243'> 243     <b>char</b> <a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>[1024];
<a name='L244'> 244     <b>int</b> <a href='../Y/1304.html' title='Multiple used in 9 places.'>actual_rate</a>;
<a name='L245'> 245 
<a name='L246'> 246     <i><font color='green'>/* we need to translate from .1% to kbps */</font></i>
<a name='L247'> 247     <a href='../Y/1304.html' title='Multiple used in 9 places.'>actual_rate</a> = <a href='../Y/6242.html' title='Multiple used in 26 places.'>rate</a>*<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a>;
<a name='L248'> 248 
<a name='L249'> 249     <a href='../Y/6891.html' title='Multiple used in 224 places.'>snprintf</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>, <b>sizeof</b>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>), <a href='../S/851.html#L201' title='Defined at 201 in cbench/openflow/lib/netdev.c.'>COMMAND_ADD_CLASS</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>,
<a name='L250'> 250              <a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>, <a href='../S/851.html#L191' title='Defined at 191 in cbench/openflow/lib/netdev.c.'>TC_ROOT_CLASS</a>, <a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>, <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>, <a href='../Y/1304.html' title='Multiple used in 9 places.'>actual_rate</a>,
<a name='L251'> 251              <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a>*1000);
<a name='L252'> 252     <b>if</b> (<a href='../Y/7213.html' title='Multiple used in 11 places.'>system</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>) != 0) <font color='red'>{</font>
<a name='L253'> 253         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("Problem configuring class %d for device %s",<a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>,
<a name='L254'> 254                  <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L255'> 255         <b>return</b> -1;
<a name='L256'> 256     <font color='red'>}</font>
<a name='L257'> 257 
<a name='L258'> 258     <b>return</b> 0;
<a name='L259'> 259 <font color='red'>}</font>
<a name='L260'> 260 
<a name='L261'> 261 <i><font color='green'>/** Changes a class already defined.</font></i>
<a name='L262'> 262 <i><font color='green'> *</font></i>
<a name='L263'> 263 <i><font color='green'> * @param netdev the device under configuration</font></i>
<a name='L264'> 264 <i><font color='green'> * @param class_id unique identifier for this queue. TC limits this to 16-bits,</font></i>
<a name='L265'> 265 <i><font color='green'> * so we need to keep an internal mapping between class_id and OpenFlow</font></i>
<a name='L266'> 266 <i><font color='green'> * queue_id</font></i>
<a name='L267'> 267 <i><font color='green'> * @param rate the minimum rate for this queue in kbps</font></i>
<a name='L268'> 268 <i><font color='green'> * @return 0 on success, non-zero value when the configuration was not</font></i>
<a name='L269'> 269 <i><font color='green'> * successful.</font></i>
<a name='L270'> 270 <i><font color='green'> */</font></i>
<a name='L271'> 271 <b>int</b>
<a name='L272'> 272 <a href='../R/3565.html' title='Multiple refered from 2 places.'>netdev_change_class</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/6242.html' title='Multiple used in 26 places.'>rate</a>)
<a name='L273'> 273 <font color='red'>{</font>
<a name='L274'> 274     <b>char</b> <a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>[1024];
<a name='L275'> 275     <b>int</b> <a href='../Y/1304.html' title='Multiple used in 9 places.'>actual_rate</a>;
<a name='L276'> 276 
<a name='L277'> 277     <i><font color='green'>/* we need to translate from .1% to kbps */</font></i>
<a name='L278'> 278     <a href='../Y/1304.html' title='Multiple used in 9 places.'>actual_rate</a> = <a href='../Y/6242.html' title='Multiple used in 26 places.'>rate</a>*<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a>;
<a name='L279'> 279 
<a name='L280'> 280     <a href='../Y/6891.html' title='Multiple used in 224 places.'>snprintf</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>, <b>sizeof</b>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>), <a href='../S/851.html#L203' title='Defined at 203 in cbench/openflow/lib/netdev.c.'>COMMAND_CHANGE_CLASS</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>,
<a name='L281'> 281              <a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>, <a href='../S/851.html#L191' title='Defined at 191 in cbench/openflow/lib/netdev.c.'>TC_ROOT_CLASS</a>, <a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>, <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>, <a href='../Y/1304.html' title='Multiple used in 9 places.'>actual_rate</a>,
<a name='L282'> 282              <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a>*1000 );
<a name='L283'> 283     <b>if</b> (<a href='../Y/7213.html' title='Multiple used in 11 places.'>system</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>) != 0) <font color='red'>{</font>
<a name='L284'> 284         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("Problem configuring class %d for device %s",
<a name='L285'> 285                  <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L286'> 286         <b>return</b> -1;
<a name='L287'> 287     <font color='red'>}</font>
<a name='L288'> 288 
<a name='L289'> 289     <b>return</b> 0;
<a name='L290'> 290 <font color='red'>}</font>
<a name='L291'> 291 
<a name='L292'> 292 <i><font color='green'>/** Deletes a class already defined to represent an OpenFlow queue.</font></i>
<a name='L293'> 293 <i><font color='green'> *</font></i>
<a name='L294'> 294 <i><font color='green'> * @param netdev the device under configuration</font></i>
<a name='L295'> 295 <i><font color='green'> * @param class_id unique identifier for this queue.</font></i>
<a name='L296'> 296 <i><font color='green'> * @param rate the minimum rate for this queue in kbps</font></i>
<a name='L297'> 297 <i><font color='green'> * @return 0 on success, non-zero value when the configuration was not</font></i>
<a name='L298'> 298 <i><font color='green'> * successful.</font></i>
<a name='L299'> 299 <i><font color='green'> */</font></i>
<a name='L300'> 300 <b>int</b>
<a name='L301'> 301 <a href='../R/3567.html' title='Multiple refered from 2 places.'>netdev_delete_class</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>)
<a name='L302'> 302 <font color='red'>{</font>
<a name='L303'> 303     <b>char</b> <a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>[1024];
<a name='L304'> 304 
<a name='L305'> 305     <a href='../Y/6891.html' title='Multiple used in 224 places.'>snprintf</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>, <b>sizeof</b>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>), <a href='../S/851.html#L205' title='Defined at 205 in cbench/openflow/lib/netdev.c.'>COMMAND_DEL_CLASS</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>,
<a name='L306'> 306              <a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>, <a href='../S/851.html#L191' title='Defined at 191 in cbench/openflow/lib/netdev.c.'>TC_ROOT_CLASS</a>, <a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>, <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>);
<a name='L307'> 307     <b>if</b> (<a href='../Y/7213.html' title='Multiple used in 11 places.'>system</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>) != 0) <font color='red'>{</font>
<a name='L308'> 308         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("Problem deleting class %d for device %s",<a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>,
<a name='L309'> 309                  <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L310'> 310         <b>return</b> -1;
<a name='L311'> 311     <font color='red'>}</font>
<a name='L312'> 312 
<a name='L313'> 313     <b>return</b> 0;
<a name='L314'> 314 <font color='red'>}</font>
<a name='L315'> 315 
<a name='L316'> 316 <b>static</b> <b>int</b>
<a name='L317'> 317 <a href='../S/851.html#L480' title='Refered from 480 in cbench/openflow/lib/netdev.c.'>open_queue_socket</a>(<b>const</b> <b>char</b> * <a href='../Y/4631.html' title='Multiple used in 221 places.'>name</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>, <b>int</b> * <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>)
<a name='L318'> 318 <font color='red'>{</font>
<a name='L319'> 319     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L320'> 320     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L321'> 321     <b>struct</b> <a href='../Y/6897.html' title='Multiple used in 6 places.'>sockaddr_ll</a> <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>;
<a name='L322'> 322     <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/5909.html' title='Multiple used in 182 places.'>priority</a>;
<a name='L323'> 323 
<a name='L324'> 324     *<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a> = <a href='../Y/6901.html' title='Multiple used in 21 places.'>socket</a>(<a href='../Y/673.html' title='Multiple used in 4 places.'>PF_PACKET</a>, <a href='../Y/829.html' title='Multiple used in 4 places.'>SOCK_RAW</a>, <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(0)); <i><font color='green'>/* this is a write-only sock */</font></i>
<a name='L325'> 325     <b>if</b> (*<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a> &lt; 0) <font color='red'>{</font>
<a name='L326'> 326         <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L327'> 327     <font color='red'>}</font>
<a name='L328'> 328 
<a name='L329'> 329     <i><font color='green'>/* Set non-blocking mode */</font></i>
<a name='L330'> 330     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/835.html#L56' title='Defined at 56 in cbench/openflow/lib/socket-util.c.'>set_nonblocking</a>(*<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>);
<a name='L331'> 331     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L332'> 332         <b>goto</b> <a href='../Y/2764.html' title='Multiple used in 5 places.'>error_already_set</a>;
<a name='L333'> 333     <font color='red'>}</font>
<a name='L334'> 334 
<a name='L335'> 335     <i><font color='green'>/* Get ethernet device index. */</font></i>
<a name='L336'> 336     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L337'> 337     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(*<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>, <a href='../Y/814.html' title='Multiple used in 5 places.'>SIOCGIFINDEX</a>, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L338'> 338         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("ioctl(SIOCGIFINDEX) on %s device failed: %s",
<a name='L339'> 339                  <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L340'> 340         <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L341'> 341     <font color='red'>}</font>
<a name='L342'> 342 
<a name='L343'> 343     <i><font color='green'>/* Bind to specific ethernet device. */</font></i>
<a name='L344'> 344     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>, 0, <b>sizeof</b> <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>);
<a name='L345'> 345     <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>.<a href='../Y/6834.html' title='Multiple used in 4 places.'>sll_family</a> = <a href='../Y/673.html' title='Multiple used in 4 places.'>PF_PACKET</a>;
<a name='L346'> 346     <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>.<a href='../Y/6837.html' title='Multiple used in 4 places.'>sll_ifindex</a> = <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3745.html' title='Multiple used in 5 places.'>ifr_ifindex</a>;
<a name='L347'> 347     <b>if</b> (<a href='../Y/1622.html' title='Multiple used in 14 places.'>bind</a>(*<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>, (<b>struct</b> <a href='../Y/6895.html' title='Multiple used in 43 places.'>sockaddr</a> *) &amp;<a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>, <b>sizeof</b> <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>) &lt; 0) <font color='red'>{</font>
<a name='L348'> 348         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("bind to %s failed: %s", <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L349'> 349         <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L350'> 350     <font color='red'>}</font>
<a name='L351'> 351 
<a name='L352'> 352     <i><font color='green'>/* set the priority so that packets from this socket will go to the</font></i>
<a name='L353'> 353 <i><font color='green'>     * respective class_id/queue. Note that to refer to a tc class we use the</font></i>
<a name='L354'> 354 <i><font color='green'>     * following concatenation</font></i>
<a name='L355'> 355 <i><font color='green'>     * qdisc:handle on an unsigned integer. */</font></i>
<a name='L356'> 356     <a href='../Y/5909.html' title='Multiple used in 182 places.'>priority</a> = (<a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>&lt;&lt;16) + <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>;
<a name='L357'> 357     <b>if</b> ( <a href='../S/835.html#L75' title='Defined at 75 in cbench/openflow/lib/socket-util.c.'>set_socket_priority</a>(*<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>,<a href='../Y/5909.html' title='Multiple used in 182 places.'>priority</a>) &lt; 0) <font color='red'>{</font>
<a name='L358'> 358         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("set socket priority failed for %s : %s",<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>,<a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L359'> 359         <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L360'> 360     <font color='red'>}</font>
<a name='L361'> 361 
<a name='L362'> 362     <b>return</b> 0;
<a name='L363'> 363 
<a name='L364'> 364  <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>:
<a name='L365'> 365     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L366'> 366  <a href='../Y/2764.html' title='Multiple used in 5 places.'>error_already_set</a>:
<a name='L367'> 367     <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(*<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>);
<a name='L368'> 368     <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L369'> 369 <font color='red'>}</font>
<a name='L370'> 370 
<a name='L371'> 371 
<a name='L372'> 372 <i><font color='green'>/** Setup a classful queue for the specific device. Configured according to</font></i>
<a name='L373'> 373 <i><font color='green'> * HTB protocol. Note that this is linux specific. You will need to replace</font></i>
<a name='L374'> 374 <i><font color='green'> * this with the appropriate abstraction for different OS.</font></i>
<a name='L375'> 375 <i><font color='green'> *</font></i>
<a name='L376'> 376 <i><font color='green'> * The default configuration includes a root class and a default queue/class.</font></i>
<a name='L377'> 377 <i><font color='green'> * A root class is neccesary for efficient use of "unused" bandwidth. If we</font></i>
<a name='L378'> 378 <i><font color='green'> * have traffic A and B (given 80% and 20% of the link respectively), B can use</font></i>
<a name='L379'> 379 <i><font color='green'> * more than 20% if A doesn't use all its bandwidth. In order to allow this</font></i>
<a name='L380'> 380 <i><font color='green'> * "sharing", all queues must reside under a common root class.</font></i>
<a name='L381'> 381 <i><font color='green'> * A default queue/class is a queue  where "unclassified" traffic will fall to.</font></i>
<a name='L382'> 382 <i><font color='green'> * The default class has a best-effort behavior.</font></i>
<a name='L383'> 383 <i><font color='green'> *</font></i>
<a name='L384'> 384 <i><font color='green'> * More on Linux Traffic Control and Hierarchical Token Bucket at :</font></i>
<a name='L385'> 385 <i><font color='green'> * http://luxik.cdi.cz/~devik/qos/htb/</font></i>
<a name='L386'> 386 <i><font color='green'> * http://luxik.cdi.cz/~devik/qos/htb/manual/userg.htm</font></i>
<a name='L387'> 387 <i><font color='green'> *</font></i>
<a name='L388'> 388 <i><font color='green'> * @param netdev_name the device to be configured</font></i>
<a name='L389'> 389 <i><font color='green'> * @return 0 on success, non-zero value when the configuration was not</font></i>
<a name='L390'> 390 <i><font color='green'> * successful.</font></i>
<a name='L391'> 391 <i><font color='green'> */</font></i>
<a name='L392'> 392 <b>static</b> <b>int</b>
<a name='L393'> 393 <a href='../S/851.html#L446' title='Refered from 446 in cbench/openflow/lib/netdev.c.'>do_setup_qdisc</a>(<b>const</b> <b>char</b> *<a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>)
<a name='L394'> 394 <font color='red'>{</font>
<a name='L395'> 395     <b>char</b> <a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>[1024];
<a name='L396'> 396     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L397'> 397 
<a name='L398'> 398     <a href='../Y/6891.html' title='Multiple used in 224 places.'>snprintf</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>, <b>sizeof</b>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>), <a href='../S/851.html#L198' title='Defined at 198 in cbench/openflow/lib/netdev.c.'>COMMAND_ADD_DEV_QDISC</a>, <a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>,
<a name='L399'> 399              <a href='../S/851.html#L188' title='Defined at 188 in cbench/openflow/lib/netdev.c.'>TC_QDISC</a>, <a href='../S/851.html#L195' title='Defined at 195 in cbench/openflow/lib/netdev.c.'>TC_DEFAULT_CLASS</a>);
<a name='L400'> 400     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/7213.html' title='Multiple used in 11 places.'>system</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>);
<a name='L401'> 401     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L402'> 402         <a href='../S/859.html#L151' title='Defined at 151 in cbench/openflow/lib/vlog.h.'>VLOG_WARN</a>("Problem configuring qdisc for device %s",<a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>);
<a name='L403'> 403         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L404'> 404     <font color='red'>}</font>
<a name='L405'> 405     <b>return</b> 0;
<a name='L406'> 406 <font color='red'>}</font>
<a name='L407'> 407 
<a name='L408'> 408 <i><font color='green'>/** Remove current queue disciplines from a net device</font></i>
<a name='L409'> 409 <i><font color='green'> * @param netdev_name the device under configuration</font></i>
<a name='L410'> 410 <i><font color='green'> */</font></i>
<a name='L411'> 411 <b>static</b> <b>int</b>
<a name='L412'> 412 <a href='../S/851.html#L440' title='Refered from 440 in cbench/openflow/lib/netdev.c.'>do_remove_qdisc</a>(<b>const</b> <b>char</b> *<a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>)
<a name='L413'> 413 <font color='red'>{</font>
<a name='L414'> 414     <b>char</b> <a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>[1024];
<a name='L415'> 415 
<a name='L416'> 416     <a href='../Y/6891.html' title='Multiple used in 224 places.'>snprintf</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>, <b>sizeof</b>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>), <a href='../S/851.html#L200' title='Defined at 200 in cbench/openflow/lib/netdev.c.'>COMMAND_DEL_DEV_QDISC</a>, <a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>);
<a name='L417'> 417     <a href='../Y/7213.html' title='Multiple used in 11 places.'>system</a>(<a href='../S/333.html#L92' title='Defined at 92 in cbench/openflow/utilities/dpctl.c.'>command</a>);
<a name='L418'> 418 
<a name='L419'> 419     <i><font color='green'>/* There is no need for a device to already be configured. Therefore no</font></i>
<a name='L420'> 420 <i><font color='green'>     * need to indicate any error */</font></i>
<a name='L421'> 421     <b>return</b> 0;
<a name='L422'> 422 <font color='red'>}</font>
<a name='L423'> 423 
<a name='L424'> 424 
<a name='L425'> 425 
<a name='L426'> 426 <i><font color='green'>/** Configures a port to support slicing</font></i>
<a name='L427'> 427 <i><font color='green'> * @param netdev_name the device under configuration</font></i>
<a name='L428'> 428 <i><font color='green'> * @return 0 on success</font></i>
<a name='L429'> 429 <i><font color='green'> */</font></i>
<a name='L430'> 430 <b>int</b>
<a name='L431'> 431 <a href='../R/3597.html' title='Multiple refered from 2 places.'>netdev_setup_slicing</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/4996.html' title='Multiple used in 24 places.'>num_queues</a>)
<a name='L432'> 432 <font color='red'>{</font>
<a name='L433'> 433     <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L434'> 434     <b>int</b> * <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>;
<a name='L435'> 435     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L436'> 436 
<a name='L437'> 437     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4996.html' title='Multiple used in 24 places.'>num_queues</a> = <a href='../Y/4996.html' title='Multiple used in 24 places.'>num_queues</a>;
<a name='L438'> 438 
<a name='L439'> 439     <i><font color='green'>/* remove any previous queue configuration for this device */</font></i>
<a name='L440'> 440     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L412' title='Defined at 412 in cbench/openflow/lib/netdev.c.'>do_remove_qdisc</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L441'> 441     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L442'> 442         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L443'> 443     <font color='red'>}</font>
<a name='L444'> 444 
<a name='L445'> 445     <i><font color='green'>/* Configure tc queue discipline to allow slicing queues */</font></i>
<a name='L446'> 446     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L393' title='Defined at 393 in cbench/openflow/lib/netdev.c.'>do_setup_qdisc</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L447'> 447     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L448'> 448         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L449'> 449     <font color='red'>}</font>
<a name='L450'> 450 
<a name='L451'> 451     <i><font color='green'>/* This define a root class for the queue disc. In order to allow spare</font></i>
<a name='L452'> 452 <i><font color='green'>     * bandwidth to be used efficiently, we need all the classes under a root</font></i>
<a name='L453'> 453 <i><font color='green'>     * class. For details, refer to :</font></i>
<a name='L454'> 454 <i><font color='green'>     * http://luxik.cdi.cz/~devik/qos/htb/ */</font></i>
<a name='L455'> 455     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L208' title='Defined at 208 in cbench/openflow/lib/netdev.c.'>netdev_setup_root_class</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>, <a href='../S/851.html#L191' title='Defined at 191 in cbench/openflow/lib/netdev.c.'>TC_ROOT_CLASS</a>,1000);
<a name='L456'> 456     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L457'> 457         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L458'> 458     <font color='red'>}</font>
<a name='L459'> 459     <i><font color='green'>/* we configure a default class. This would be the best-effort, getting</font></i>
<a name='L460'> 460 <i><font color='green'>     * everything that remains from the other queues.tc requires a min-rate</font></i>
<a name='L461'> 461 <i><font color='green'>     * to configure a class, we put a min_rate here */</font></i>
<a name='L462'> 462     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L240' title='Defined at 240 in cbench/openflow/lib/netdev.c.'>netdev_setup_class</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>,<a href='../S/851.html#L195' title='Defined at 195 in cbench/openflow/lib/netdev.c.'>TC_DEFAULT_CLASS</a>,1);
<a name='L463'> 463     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L464'> 464         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L465'> 465     <font color='red'>}</font>
<a name='L466'> 466 
<a name='L467'> 467     <i><font color='green'>/* the tc backend has been configured. Now, we need to create sockets that</font></i>
<a name='L468'> 468 <i><font color='green'>     * match the queue configuration. We need one socket per queue, plus one</font></i>
<a name='L469'> 469 <i><font color='green'>     * for default traffic.</font></i>
<a name='L470'> 470 <i><font color='green'>     * queue-attached sockets are only for outgoing traffic. Data are received</font></i>
<a name='L471'> 471 <i><font color='green'>     * only at the default socket.</font></i>
<a name='L472'> 472 <i><font color='green'>     * This is a limitation due to userspace implementation. We can map flows</font></i>
<a name='L473'> 473 <i><font color='green'>     * to specific queues using the skb-&gt;priority field. Having no access to</font></i>
<a name='L474'> 474 <i><font color='green'>     * sk_buffs from userspace, the only way to do the mapping is through the</font></i>
<a name='L475'> 475 <i><font color='green'>     * SO_PRIORITY option of the socket. This dictates the usage of one socket</font></i>
<a name='L476'> 476 <i><font color='green'>     * per queue. */</font></i>
<a name='L477'> 477 
<a name='L478'> 478     <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=1; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> &lt;= <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4996.html' title='Multiple used in 24 places.'>num_queues</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L479'> 479         <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a> = &amp;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6208.html' title='Multiple used in 5 places.'>queue_fd</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>];
<a name='L480'> 480         <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L317' title='Defined at 317 in cbench/openflow/lib/netdev.c.'>open_queue_socket</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>,<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>,<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>);
<a name='L481'> 481         <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L482'> 482             <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L483'> 483         <font color='red'>}</font>
<a name='L484'> 484     <font color='red'>}</font>
<a name='L485'> 485 
<a name='L486'> 486     <b>return</b> 0;
<a name='L487'> 487 <font color='red'>}</font>
<a name='L488'> 488 
<a name='L489'> 489 <b>static</b> <b>void</b>
<a name='L490'> 490 <a href='../R/2729.html' title='Multiple refered from 2 places.'>do_ethtool</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>)
<a name='L491'> 491 <font color='red'>{</font>
<a name='L492'> 492     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L493'> 493     <b>struct</b> <a href='../Y/2817.html' title='Multiple used in 3 places.'>ethtool_cmd</a> <a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>;
<a name='L494'> 494 
<a name='L495'> 495     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = 0;
<a name='L496'> 496     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> = 0;
<a name='L497'> 497     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> = 0;
<a name='L498'> 498     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/5700.html' title='Multiple used in 46 places.'>peer</a> = 0;
<a name='L499'> 499     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> = <a href='../Y/844.html' title='Multiple used in 3 places.'>SPEED_1000</a>;  <i><font color='green'>/* default to 1Gbps link */</font></i>
<a name='L500'> 500 
<a name='L501'> 501     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>, 0, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>);
<a name='L502'> 502     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L503'> 503     <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3742.html' title='Multiple used in 5 places.'>ifr_data</a> = (caddr_t) &amp;<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>;
<a name='L504'> 504 
<a name='L505'> 505     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>, 0, <b>sizeof</b> <a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>);
<a name='L506'> 506     <a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a> = <a href='../Y/300.html' title='Multiple used in 2 places.'>ETHTOOL_GSET</a>;
<a name='L507'> 507     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>, SIOCETHTOOL, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) == 0) <font color='red'>{</font>
<a name='L508'> 508         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/914.html' title='Multiple used in 2 places.'>SUPPORTED_10baseT_Half</a>) <font color='red'>{</font>
<a name='L509'> 509             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3553.html' title='Multiple defined in 3 places.'>OFPPF_10MB_HD</a>;
<a name='L510'> 510         <font color='red'>}</font>
<a name='L511'> 511         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/913.html' title='Multiple used in 2 places.'>SUPPORTED_10baseT_Full</a>) <font color='red'>{</font>
<a name='L512'> 512             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3552.html' title='Multiple defined in 3 places.'>OFPPF_10MB_FD</a>;
<a name='L513'> 513         <font color='red'>}</font>
<a name='L514'> 514         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/912.html' title='Multiple used in 2 places.'>SUPPORTED_100baseT_Half</a>)  <font color='red'>{</font>
<a name='L515'> 515             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3550.html' title='Multiple defined in 3 places.'>OFPPF_100MB_HD</a>;
<a name='L516'> 516         <font color='red'>}</font>
<a name='L517'> 517         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/911.html' title='Multiple used in 2 places.'>SUPPORTED_100baseT_Full</a>) <font color='red'>{</font>
<a name='L518'> 518             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3549.html' title='Multiple defined in 3 places.'>OFPPF_100MB_FD</a>;
<a name='L519'> 519         <font color='red'>}</font>
<a name='L520'> 520         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/910.html' title='Multiple used in 2 places.'>SUPPORTED_1000baseT_Half</a>) <font color='red'>{</font>
<a name='L521'> 521             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3555.html' title='Multiple defined in 3 places.'>OFPPF_1GB_HD</a>;
<a name='L522'> 522         <font color='red'>}</font>
<a name='L523'> 523         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/909.html' title='Multiple used in 2 places.'>SUPPORTED_1000baseT_Full</a>) <font color='red'>{</font>
<a name='L524'> 524             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3554.html' title='Multiple defined in 3 places.'>OFPPF_1GB_FD</a>;
<a name='L525'> 525         <font color='red'>}</font>
<a name='L526'> 526         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/908.html' title='Multiple used in 2 places.'>SUPPORTED_10000baseT_Full</a>) <font color='red'>{</font>
<a name='L527'> 527             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3551.html' title='Multiple defined in 3 places.'>OFPPF_10GB_FD</a>;
<a name='L528'> 528         <font color='red'>}</font>
<a name='L529'> 529         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/919.html' title='Multiple used in 2 places.'>SUPPORTED_TP</a>) <font color='red'>{</font>
<a name='L530'> 530             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3559.html' title='Multiple defined in 3 places.'>OFPPF_COPPER</a>;
<a name='L531'> 531         <font color='red'>}</font>
<a name='L532'> 532         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/917.html' title='Multiple used in 2 places.'>SUPPORTED_FIBRE</a>) <font color='red'>{</font>
<a name='L533'> 533             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3560.html' title='Multiple defined in 3 places.'>OFPPF_FIBER</a>;
<a name='L534'> 534         <font color='red'>}</font>
<a name='L535'> 535         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/916.html' title='Multiple used in 2 places.'>SUPPORTED_Autoneg</a>) <font color='red'>{</font>
<a name='L536'> 536             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3558.html' title='Multiple defined in 3 places.'>OFPPF_AUTONEG</a>;
<a name='L537'> 537         <font color='red'>}</font>
<a name='L538'> 538 <font color='darkred'>#if</font> <a href='../Y/502.html' title='Multiple used in 39 places.'>LINUX_VERSION_CODE</a> &gt;= <a href='../Y/480.html' title='Multiple used in 39 places.'>KERNEL_VERSION</a>(2,6,14)
<a name='L539'> 539         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/918.html' title='Multiple used in 2 places.'>SUPPORTED_Pause</a>) <font color='red'>{</font>
<a name='L540'> 540             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3562.html' title='Multiple defined in 3 places.'>OFPPF_PAUSE</a>;
<a name='L541'> 541         <font color='red'>}</font>
<a name='L542'> 542         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/915.html' title='Multiple used in 2 places.'>SUPPORTED_Asym_Pause</a>) <font color='red'>{</font>
<a name='L543'> 543             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3563.html' title='Multiple defined in 3 places.'>OFPPF_PAUSE_ASYM</a>;
<a name='L544'> 544         <font color='red'>}</font>
<a name='L545'> 545 <font color='darkred'>#endif</font> <i><font color='green'>/* kernel &gt;= 2.6.14 */</font></i>
<a name='L546'> 546 
<a name='L547'> 547         <i><font color='green'>/* Set the advertised features */</font></i>
<a name='L548'> 548         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/12.html' title='Multiple used in 2 places.'>ADVERTISED_10baseT_Half</a>) <font color='red'>{</font>
<a name='L549'> 549             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3553.html' title='Multiple defined in 3 places.'>OFPPF_10MB_HD</a>;
<a name='L550'> 550         <font color='red'>}</font>
<a name='L551'> 551         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/11.html' title='Multiple used in 2 places.'>ADVERTISED_10baseT_Full</a>) <font color='red'>{</font>
<a name='L552'> 552             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3552.html' title='Multiple defined in 3 places.'>OFPPF_10MB_FD</a>;
<a name='L553'> 553         <font color='red'>}</font>
<a name='L554'> 554         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/10.html' title='Multiple used in 2 places.'>ADVERTISED_100baseT_Half</a>) <font color='red'>{</font>
<a name='L555'> 555             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3550.html' title='Multiple defined in 3 places.'>OFPPF_100MB_HD</a>;
<a name='L556'> 556         <font color='red'>}</font>
<a name='L557'> 557         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/9.html' title='Multiple used in 2 places.'>ADVERTISED_100baseT_Full</a>) <font color='red'>{</font>
<a name='L558'> 558             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3549.html' title='Multiple defined in 3 places.'>OFPPF_100MB_FD</a>;
<a name='L559'> 559         <font color='red'>}</font>
<a name='L560'> 560         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/8.html' title='Multiple used in 2 places.'>ADVERTISED_1000baseT_Half</a>) <font color='red'>{</font>
<a name='L561'> 561             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3555.html' title='Multiple defined in 3 places.'>OFPPF_1GB_HD</a>;
<a name='L562'> 562         <font color='red'>}</font>
<a name='L563'> 563         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/7.html' title='Multiple used in 2 places.'>ADVERTISED_1000baseT_Full</a>) <font color='red'>{</font>
<a name='L564'> 564             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3554.html' title='Multiple defined in 3 places.'>OFPPF_1GB_FD</a>;
<a name='L565'> 565         <font color='red'>}</font>
<a name='L566'> 566         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/6.html' title='Multiple used in 2 places.'>ADVERTISED_10000baseT_Full</a>) <font color='red'>{</font>
<a name='L567'> 567             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3551.html' title='Multiple defined in 3 places.'>OFPPF_10GB_FD</a>;
<a name='L568'> 568         <font color='red'>}</font>
<a name='L569'> 569         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/17.html' title='Multiple used in 2 places.'>ADVERTISED_TP</a>) <font color='red'>{</font>
<a name='L570'> 570             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3559.html' title='Multiple defined in 3 places.'>OFPPF_COPPER</a>;
<a name='L571'> 571         <font color='red'>}</font>
<a name='L572'> 572         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/15.html' title='Multiple used in 2 places.'>ADVERTISED_FIBRE</a>) <font color='red'>{</font>
<a name='L573'> 573             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3560.html' title='Multiple defined in 3 places.'>OFPPF_FIBER</a>;
<a name='L574'> 574         <font color='red'>}</font>
<a name='L575'> 575         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/14.html' title='Multiple used in 2 places.'>ADVERTISED_Autoneg</a>) <font color='red'>{</font>
<a name='L576'> 576             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3558.html' title='Multiple defined in 3 places.'>OFPPF_AUTONEG</a>;
<a name='L577'> 577         <font color='red'>}</font>
<a name='L578'> 578 <font color='darkred'>#if</font> <a href='../Y/502.html' title='Multiple used in 39 places.'>LINUX_VERSION_CODE</a> &gt;= <a href='../Y/480.html' title='Multiple used in 39 places.'>KERNEL_VERSION</a>(2,6,14)
<a name='L579'> 579         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/16.html' title='Multiple used in 2 places.'>ADVERTISED_Pause</a>) <font color='red'>{</font>
<a name='L580'> 580             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3562.html' title='Multiple defined in 3 places.'>OFPPF_PAUSE</a>;
<a name='L581'> 581         <font color='red'>}</font>
<a name='L582'> 582         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/13.html' title='Multiple used in 2 places.'>ADVERTISED_Asym_Pause</a>) <font color='red'>{</font>
<a name='L583'> 583             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3563.html' title='Multiple defined in 3 places.'>OFPPF_PAUSE_ASYM</a>;
<a name='L584'> 584         <font color='red'>}</font>
<a name='L585'> 585 <font color='darkred'>#endif</font> <i><font color='green'>/* kernel &gt;= 2.6.14 */</font></i>
<a name='L586'> 586 
<a name='L587'> 587         <i><font color='green'>/* Set the current features */</font></i>
<a name='L588'> 588         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> == <a href='../Y/842.html' title='Multiple used in 2 places.'>SPEED_10</a>) <font color='red'>{</font>
<a name='L589'> 589             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/2610.html' title='Multiple used in 7 places.'>duplex</a>) ? <a href='../D/3552.html' title='Multiple defined in 3 places.'>OFPPF_10MB_FD</a> : <a href='../D/3553.html' title='Multiple defined in 3 places.'>OFPPF_10MB_HD</a>;
<a name='L590'> 590         <font color='red'>}</font>
<a name='L591'> 591         <b>else</b> <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> == <a href='../Y/843.html' title='Multiple used in 2 places.'>SPEED_100</a>) <font color='red'>{</font>
<a name='L592'> 592             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/2610.html' title='Multiple used in 7 places.'>duplex</a>) ? <a href='../D/3549.html' title='Multiple defined in 3 places.'>OFPPF_100MB_FD</a> : <a href='../D/3550.html' title='Multiple defined in 3 places.'>OFPPF_100MB_HD</a>;
<a name='L593'> 593         <font color='red'>}</font>
<a name='L594'> 594         <b>else</b> <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> == <a href='../Y/844.html' title='Multiple used in 3 places.'>SPEED_1000</a>) <font color='red'>{</font>
<a name='L595'> 595             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/2610.html' title='Multiple used in 7 places.'>duplex</a>) ? <a href='../D/3554.html' title='Multiple defined in 3 places.'>OFPPF_1GB_FD</a> : <a href='../D/3555.html' title='Multiple defined in 3 places.'>OFPPF_1GB_HD</a>;
<a name='L596'> 596         <font color='red'>}</font>
<a name='L597'> 597         <b>else</b> <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> == <a href='../Y/845.html' title='Multiple used in 3 places.'>SPEED_10000</a>) <font color='red'>{</font>
<a name='L598'> 598             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = <a href='../D/3551.html' title='Multiple defined in 3 places.'>OFPPF_10GB_FD</a>;
<a name='L599'> 599         <font color='red'>}</font>
<a name='L600'> 600 
<a name='L601'> 601         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a> == <a href='../Y/694.html' title='Multiple used in 3 places.'>PORT_TP</a>) <font color='red'>{</font>
<a name='L602'> 602             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> |= <a href='../D/3559.html' title='Multiple defined in 3 places.'>OFPPF_COPPER</a>;
<a name='L603'> 603         <font color='red'>}</font>
<a name='L604'> 604         <b>else</b> <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a> == <a href='../Y/693.html' title='Multiple used in 2 places.'>PORT_FIBRE</a>) <font color='red'>{</font>
<a name='L605'> 605             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> |= <a href='../D/3560.html' title='Multiple defined in 3 places.'>OFPPF_FIBER</a>;
<a name='L606'> 606         <font color='red'>}</font>
<a name='L607'> 607 
<a name='L608'> 608         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1533.html' title='Multiple used in 3 places.'>autoneg</a>) <font color='red'>{</font>
<a name='L609'> 609             <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> |= <a href='../D/3558.html' title='Multiple defined in 3 places.'>OFPPF_AUTONEG</a>;
<a name='L610'> 610         <font color='red'>}</font>
<a name='L611'> 611 
<a name='L612'> 612         <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> = <a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a>;
<a name='L613'> 613 
<a name='L614'> 614     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L615'> 615         <a href='../S/859.html#L153' title='Defined at 153 in cbench/openflow/lib/vlog.h.'>VLOG_DBG</a>("ioctl(SIOCETHTOOL) failed: %s", <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L616'> 616     <font color='red'>}</font>
<a name='L617'> 617 <font color='red'>}</font>
<a name='L618'> 618 
<a name='L619'> 619 <i><font color='green'>/* Opens the network device named 'name' (e.g. "eth0") and returns zero if</font></i>
<a name='L620'> 620 <i><font color='green'> * successful, otherwise a positive errno value.  On success, sets '*netdevp'</font></i>
<a name='L621'> 621 <i><font color='green'> * to the new network device, otherwise to null.</font></i>
<a name='L622'> 622 <i><font color='green'> *</font></i>
<a name='L623'> 623 <i><font color='green'> * 'ethertype' may be a 16-bit Ethernet protocol value in host byte order to</font></i>
<a name='L624'> 624 <i><font color='green'> * capture frames of that type received on the device.  It may also be one of</font></i>
<a name='L625'> 625 <i><font color='green'> * the 'enum netdev_pseudo_ethertype' values to receive frames in one of those</font></i>
<a name='L626'> 626 <i><font color='green'> * categories. */</font></i>
<a name='L627'> 627 <b>int</b>
<a name='L628'> 628 <a href='../R/3586.html' title='Multiple refered from 8 places.'>netdev_open</a>(<b>const</b> <b>char</b> *<a href='../Y/4631.html' title='Multiple used in 221 places.'>name</a>, <b>int</b> <a href='../Y/2814.html' title='Multiple used in 20 places.'>ethertype</a>, <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> **<a href='../Y/4719.html' title='Multiple used in 5 places.'>netdevp</a>)
<a name='L629'> 629 <font color='red'>{</font>
<a name='L630'> 630     <b>if</b> (!<a href='../Y/7101.html' title='Multiple used in 25 places.'>strncmp</a>(<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, "tap:", 4)) <font color='red'>{</font>
<a name='L631'> 631         <b>return</b> <a href='../S/851.html#L643' title='Defined at 643 in cbench/openflow/lib/netdev.c.'>netdev_open_tap</a>(<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a> + 4, <a href='../Y/4719.html' title='Multiple used in 5 places.'>netdevp</a>);
<a name='L632'> 632     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L633'> 633         <b>return</b> <a href='../S/851.html#L684' title='Defined at 684 in cbench/openflow/lib/netdev.c.'>do_open_netdev</a>(<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/2814.html' title='Multiple used in 20 places.'>ethertype</a>, -1, <a href='../Y/4719.html' title='Multiple used in 5 places.'>netdevp</a>);
<a name='L634'> 634     <font color='red'>}</font>
<a name='L635'> 635 <font color='red'>}</font>
<a name='L636'> 636 
<a name='L637'> 637 <i><font color='green'>/* Opens a TAP virtual network device.  If 'name' is a nonnull, non-empty</font></i>
<a name='L638'> 638 <i><font color='green'> * string, attempts to assign that name to the TAP device (failing if the name</font></i>
<a name='L639'> 639 <i><font color='green'> * is already in use); otherwise, a name is automatically assigned.  Returns</font></i>
<a name='L640'> 640 <i><font color='green'> * zero if successful, otherwise a positive errno value.  On success, sets</font></i>
<a name='L641'> 641 <i><font color='green'> * '*netdevp' to the new network device, otherwise to null.  */</font></i>
<a name='L642'> 642 <b>int</b>
<a name='L643'> 643 <a href='../R/3587.html' title='Multiple refered from 2 places.'>netdev_open_tap</a>(<b>const</b> <b>char</b> *<a href='../Y/4631.html' title='Multiple used in 221 places.'>name</a>, <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> **<a href='../Y/4719.html' title='Multiple used in 5 places.'>netdevp</a>)
<a name='L644'> 644 <font color='red'>{</font>
<a name='L645'> 645     <b>static</b> <b>const</b> <b>char</b> <a href='../Y/7243.html' title='Multiple used in 5 places.'>tap_dev</a>[] = "/dev/net/tun";
<a name='L646'> 646     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L647'> 647     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L648'> 648     <b>int</b> <a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>;
<a name='L649'> 649 
<a name='L650'> 650     <a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a> = <a href='../Y/5465.html' title='Multiple used in 21 places.'>open</a>(<a href='../Y/7243.html' title='Multiple used in 5 places.'>tap_dev</a>, <a href='../Y/636.html' title='Multiple used in 4 places.'>O_RDWR</a>);
<a name='L651'> 651     <b>if</b> (<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a> &lt; 0) <font color='red'>{</font>
<a name='L652'> 652         <a href='../S/878.html#L169' title='Defined at 169 in cbench/openflow/lib/util.c.'>ofp_error</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>, "opening \"%s\" failed", <a href='../Y/7243.html' title='Multiple used in 5 places.'>tap_dev</a>);
<a name='L653'> 653         <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L654'> 654     <font color='red'>}</font>
<a name='L655'> 655 
<a name='L656'> 656     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>, 0, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>);
<a name='L657'> 657     <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3743.html' title='Multiple used in 6 places.'>ifr_flags</a> = IFF_TAP | IFF_NO_PI;
<a name='L658'> 658     <b>if</b> (<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>) <font color='red'>{</font>
<a name='L659'> 659         <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L660'> 660     <font color='red'>}</font>
<a name='L661'> 661     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>, TUNSETIFF, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L662'> 662         <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L663'> 663         <a href='../S/878.html#L169' title='Defined at 169 in cbench/openflow/lib/util.c.'>ofp_error</a>(<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>, "ioctl(TUNSETIFF) on \"%s\" failed", <a href='../Y/7243.html' title='Multiple used in 5 places.'>tap_dev</a>);
<a name='L664'> 664         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>);
<a name='L665'> 665         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L666'> 666     <font color='red'>}</font>
<a name='L667'> 667 
<a name='L668'> 668     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/835.html#L56' title='Defined at 56 in cbench/openflow/lib/socket-util.c.'>set_nonblocking</a>(<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>);
<a name='L669'> 669     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L670'> 670         <a href='../S/878.html#L169' title='Defined at 169 in cbench/openflow/lib/util.c.'>ofp_error</a>(<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>, "set_nonblocking on \"%s\" failed", <a href='../Y/7243.html' title='Multiple used in 5 places.'>tap_dev</a>);
<a name='L671'> 671         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>);
<a name='L672'> 672         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L673'> 673     <font color='red'>}</font>
<a name='L674'> 674 
<a name='L675'> 675     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L684' title='Defined at 684 in cbench/openflow/lib/netdev.c.'>do_open_netdev</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../S/814.html#L66' title='Defined at 66 in cbench/openflow/lib/netdev.h.'>NETDEV_ETH_TYPE_NONE</a>, <a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>,
<a name='L676'> 676                            <a href='../Y/4719.html' title='Multiple used in 5 places.'>netdevp</a>);
<a name='L677'> 677     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L678'> 678         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>);
<a name='L679'> 679     <font color='red'>}</font>
<a name='L680'> 680     <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L681'> 681 <font color='red'>}</font>
<a name='L682'> 682 
<a name='L683'> 683 <b>static</b> <b>int</b>
<a name='L684'> 684 <a href='../R/2739.html' title='Multiple refered from 3 places.'>do_open_netdev</a>(<b>const</b> <b>char</b> *<a href='../Y/4631.html' title='Multiple used in 221 places.'>name</a>, <b>int</b> <a href='../Y/2814.html' title='Multiple used in 20 places.'>ethertype</a>, <b>int</b> <a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>,
<a name='L685'> 685                <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> **<a href='../Y/4710.html' title='Multiple used in 4 places.'>netdev_</a>)
<a name='L686'> 686 <font color='red'>{</font>
<a name='L687'> 687     <b>int</b> <a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>;
<a name='L688'> 688     <b>struct</b> <a href='../Y/6897.html' title='Multiple used in 6 places.'>sockaddr_ll</a> <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>;
<a name='L689'> 689     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L690'> 690     <b>unsigned</b> <b>int</b> <a href='../Y/3735.html' title='Multiple used in 13 places.'>ifindex</a>;
<a name='L691'> 691     <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> <a href='../Y/2811.html' title='Multiple used in 6 places.'>etheraddr</a>[<a href='../S/860.html#L42' title='Defined at 42 in cbench/openflow/lib/packets.h.'>ETH_ADDR_LEN</a>];
<a name='L692'> 692     <b>struct</b> <a href='../Y/3762.html' title='Multiple used in 7 places.'>in6_addr</a> <a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>;
<a name='L693'> 693     <b>int</b> <a href='../Y/4539.html' title='Multiple used in 9 places.'>mtu</a>;
<a name='L694'> 694     <b>int</b> <a href='../Y/7551.html' title='Multiple used in 5 places.'>txqlen</a>;
<a name='L695'> 695     <b>int</b> <a href='../Y/3698.html' title='Multiple used in 7 places.'>hwaddr_family</a>;
<a name='L696'> 696     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L697'> 697     <b>struct</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a> *<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>;
<a name='L698'> 698 
<a name='L699'> 699     <a href='../S/851.html#L1511' title='Defined at 1511 in cbench/openflow/lib/netdev.c.'>init_netdev</a>();
<a name='L700'> 700     *<a href='../Y/4710.html' title='Multiple used in 4 places.'>netdev_</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L701'> 701 
<a name='L702'> 702     <i><font color='green'>/* Create raw socket. */</font></i>
<a name='L703'> 703     <a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a> = <a href='../Y/6901.html' title='Multiple used in 21 places.'>socket</a>(<a href='../Y/673.html' title='Multiple used in 4 places.'>PF_PACKET</a>, <a href='../Y/829.html' title='Multiple used in 4 places.'>SOCK_RAW</a>,
<a name='L704'> 704                        <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/2814.html' title='Multiple used in 20 places.'>ethertype</a> == <a href='../S/814.html#L66' title='Defined at 66 in cbench/openflow/lib/netdev.h.'>NETDEV_ETH_TYPE_NONE</a> ? 0
<a name='L705'> 705                              : <a href='../Y/2814.html' title='Multiple used in 20 places.'>ethertype</a> == <a href='../S/814.html#L67' title='Defined at 67 in cbench/openflow/lib/netdev.h.'>NETDEV_ETH_TYPE_ANY</a> ? <a href='../Y/305.html' title='Multiple used in 4 places.'>ETH_P_ALL</a>
<a name='L706'> 706                              : <a href='../Y/2814.html' title='Multiple used in 20 places.'>ethertype</a> == <a href='../S/814.html#L68' title='Defined at 68 in cbench/openflow/lib/netdev.h.'>NETDEV_ETH_TYPE_802_2</a> ? ETH_P_802_2
<a name='L707'> 707                              : <a href='../Y/2814.html' title='Multiple used in 20 places.'>ethertype</a>));
<a name='L708'> 708     <b>if</b> (<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a> &lt; 0) <font color='red'>{</font>
<a name='L709'> 709         <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L710'> 710     <font color='red'>}</font>
<a name='L711'> 711 
<a name='L712'> 712     <i><font color='green'>/* Set non-blocking mode. */</font></i>
<a name='L713'> 713     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/835.html#L56' title='Defined at 56 in cbench/openflow/lib/socket-util.c.'>set_nonblocking</a>(<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>);
<a name='L714'> 714     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L715'> 715         <b>goto</b> <a href='../Y/2764.html' title='Multiple used in 5 places.'>error_already_set</a>;
<a name='L716'> 716     <font color='red'>}</font>
<a name='L717'> 717 
<a name='L718'> 718     <i><font color='green'>/* Get ethernet device index. */</font></i>
<a name='L719'> 719     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L720'> 720     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>, <a href='../Y/814.html' title='Multiple used in 5 places.'>SIOCGIFINDEX</a>, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L721'> 721         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("ioctl(SIOCGIFINDEX) on %s device failed: %s",
<a name='L722'> 722                  <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L723'> 723         <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L724'> 724     <font color='red'>}</font>
<a name='L725'> 725     <a href='../Y/3735.html' title='Multiple used in 13 places.'>ifindex</a> = <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3745.html' title='Multiple used in 5 places.'>ifr_ifindex</a>;
<a name='L726'> 726 
<a name='L727'> 727     <i><font color='green'>/* Bind to specific ethernet device. */</font></i>
<a name='L728'> 728     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>, 0, <b>sizeof</b> <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>);
<a name='L729'> 729     <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>.<a href='../Y/6834.html' title='Multiple used in 4 places.'>sll_family</a> = <a href='../Y/20.html' title='Multiple used in 3 places.'>AF_PACKET</a>;
<a name='L730'> 730     <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>.<a href='../Y/6837.html' title='Multiple used in 4 places.'>sll_ifindex</a> = <a href='../Y/3735.html' title='Multiple used in 13 places.'>ifindex</a>;
<a name='L731'> 731     <b>if</b> (<a href='../Y/1622.html' title='Multiple used in 14 places.'>bind</a>(<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>, (<b>struct</b> <a href='../Y/6895.html' title='Multiple used in 43 places.'>sockaddr</a> *) &amp;<a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>, <b>sizeof</b> <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>) &lt; 0) <font color='red'>{</font>
<a name='L732'> 732         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("bind to %s failed: %s", <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L733'> 733         <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L734'> 734     <font color='red'>}</font>
<a name='L735'> 735 
<a name='L736'> 736     <b>if</b> (<a href='../Y/2814.html' title='Multiple used in 20 places.'>ethertype</a> != <a href='../S/814.html#L66' title='Defined at 66 in cbench/openflow/lib/netdev.h.'>NETDEV_ETH_TYPE_NONE</a>) <font color='red'>{</font>
<a name='L737'> 737         <i><font color='green'>/* Between the socket() and bind() calls above, the socket receives all</font></i>
<a name='L738'> 738 <i><font color='green'>         * packets of the requested type on all system interfaces.  We do not</font></i>
<a name='L739'> 739 <i><font color='green'>         * want to receive that data, but there is no way to avoid it.  So we</font></i>
<a name='L740'> 740 <i><font color='green'>         * must now drain out the receive queue. */</font></i>
<a name='L741'> 741         <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/835.html#L167' title='Defined at 167 in cbench/openflow/lib/socket-util.c.'>drain_rcvbuf</a>(<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>);
<a name='L742'> 742         <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L743'> 743             <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L744'> 744         <font color='red'>}</font>
<a name='L745'> 745     <font color='red'>}</font>
<a name='L746'> 746 
<a name='L747'> 747     <i><font color='green'>/* Get MAC address. */</font></i>
<a name='L748'> 748     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>, SIOCGIFHWADDR, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L749'> 749         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("ioctl(SIOCGIFHWADDR) on %s device failed: %s",
<a name='L750'> 750                  <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L751'> 751         <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L752'> 752     <font color='red'>}</font>
<a name='L753'> 753     <a href='../Y/3698.html' title='Multiple used in 7 places.'>hwaddr_family</a> = <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3744.html' title='Multiple used in 4 places.'>ifr_hwaddr</a>.<a href='../Y/6567.html' title='Multiple used in 4 places.'>sa_family</a>;
<a name='L754'> 754     <b>if</b> (<a href='../Y/3698.html' title='Multiple used in 7 places.'>hwaddr_family</a> != AF_UNSPEC &amp;&amp; <a href='../Y/3698.html' title='Multiple used in 7 places.'>hwaddr_family</a> != <a href='../S/399.html#L40' title='Defined at 40 in cbench/openflow/utilities/wireshark_dissectors/wireshark-1.0.0-includes/epan/arptypes.h.'>ARPHRD_ETHER</a>) <font color='red'>{</font>
<a name='L755'> 755         <a href='../S/859.html#L151' title='Defined at 151 in cbench/openflow/lib/vlog.h.'>VLOG_WARN</a>("%s device has unknown hardware address family %d",
<a name='L756'> 756                   <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/3698.html' title='Multiple used in 7 places.'>hwaddr_family</a>);
<a name='L757'> 757     <font color='red'>}</font>
<a name='L758'> 758     <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/2811.html' title='Multiple used in 6 places.'>etheraddr</a>, <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3744.html' title='Multiple used in 4 places.'>ifr_hwaddr</a>.<a href='../Y/6566.html' title='Multiple used in 5 places.'>sa_data</a>, <b>sizeof</b> <a href='../Y/2811.html' title='Multiple used in 6 places.'>etheraddr</a>);
<a name='L759'> 759 
<a name='L760'> 760     <i><font color='green'>/* Get MTU. */</font></i>
<a name='L761'> 761     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>, SIOCGIFMTU, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L762'> 762         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("ioctl(SIOCGIFMTU) on %s device failed: %s",
<a name='L763'> 763                  <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L764'> 764         <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L765'> 765     <font color='red'>}</font>
<a name='L766'> 766     <a href='../Y/4539.html' title='Multiple used in 9 places.'>mtu</a> = <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.ifr_mtu;
<a name='L767'> 767 
<a name='L768'> 768     <i><font color='green'>/* Get TX queue length. */</font></i>
<a name='L769'> 769     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>, SIOCGIFTXQLEN, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L770'> 770         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("ioctl(SIOCGIFTXQLEN) on %s device failed: %s",
<a name='L771'> 771                  <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L772'> 772         <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L773'> 773     <font color='red'>}</font>
<a name='L774'> 774     <a href='../Y/7551.html' title='Multiple used in 5 places.'>txqlen</a> = <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.ifr_qlen;
<a name='L775'> 775 
<a name='L776'> 776     <a href='../S/851.html#L151' title='Defined at 151 in cbench/openflow/lib/netdev.c.'>get_ipv6_address</a>(<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, &amp;<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>);
<a name='L777'> 777 
<a name='L778'> 778     <i><font color='green'>/* Allocate network device. */</font></i>
<a name='L779'> 779     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a> = <a href='../D/10153.html' title='Multiple defined in 2 places.'>xmalloc</a>(<b>sizeof</b> *<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>);
<a name='L780'> 780     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a> = <a href='../S/878.html#L98' title='Defined at 98 in cbench/openflow/lib/util.c.'>xstrdup</a>(<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L781'> 781     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/3735.html' title='Multiple used in 13 places.'>ifindex</a> = <a href='../Y/3735.html' title='Multiple used in 13 places.'>ifindex</a>;
<a name='L782'> 782     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7551.html' title='Multiple used in 5 places.'>txqlen</a> = <a href='../Y/7551.html' title='Multiple used in 5 places.'>txqlen</a>;
<a name='L783'> 783     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/3698.html' title='Multiple used in 7 places.'>hwaddr_family</a> = <a href='../Y/3698.html' title='Multiple used in 7 places.'>hwaddr_family</a>;
<a name='L784'> 784     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a> = <a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>;
<a name='L785'> 785     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a> = <a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a> &lt; 0 ? <a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a> : <a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>;
<a name='L786'> 786     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6208.html' title='Multiple used in 5 places.'>queue_fd</a>[0] = <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>;
<a name='L787'> 787     <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2811.html' title='Multiple used in 6 places.'>etheraddr</a>, <a href='../Y/2811.html' title='Multiple used in 6 places.'>etheraddr</a>, <b>sizeof</b> <a href='../Y/2811.html' title='Multiple used in 6 places.'>etheraddr</a>);
<a name='L788'> 788     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4539.html' title='Multiple used in 9 places.'>mtu</a> = <a href='../Y/4539.html' title='Multiple used in 9 places.'>mtu</a>;
<a name='L789'> 789     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a> = <a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>;
<a name='L790'> 790     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4996.html' title='Multiple used in 24 places.'>num_queues</a> = 0;
<a name='L791'> 791 
<a name='L792'> 792     <i><font color='green'>/* Get speed, features. */</font></i>
<a name='L793'> 793     <a href='../S/851.html#L490' title='Defined at 490 in cbench/openflow/lib/netdev.c.'>do_ethtool</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>);
<a name='L794'> 794 
<a name='L795'> 795     <i><font color='green'>/* Save flags to restore at close or exit. */</font></i>
<a name='L796'> 796     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L1566' title='Defined at 1566 in cbench/openflow/lib/netdev.c.'>get_flags</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, &amp;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6587.html' title='Multiple used in 4 places.'>save_flags</a>);
<a name='L797'> 797     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L798'> 798         <b>goto</b> <a href='../Y/2764.html' title='Multiple used in 5 places.'>error_already_set</a>;
<a name='L799'> 799     <font color='red'>}</font>
<a name='L800'> 800     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1854.html' title='Multiple used in 4 places.'>changed_flags</a> = 0;
<a name='L801'> 801     <a href='../S/891.html#L97' title='Defined at 97 in cbench/openflow/lib/fatal-signal.c.'>fatal_signal_block</a>();
<a name='L802'> 802     <a href='../S/845.html#L85' title='Defined at 85 in cbench/openflow/lib/list.c.'>list_push_back</a>(&amp;<a href='../Y/4714.html' title='Multiple used in 3 places.'>netdev_list</a>, &amp;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4917.html' title='Multiple used in 268 places.'>node</a>);
<a name='L803'> 803     <a href='../S/891.html#L131' title='Defined at 131 in cbench/openflow/lib/fatal-signal.c.'>fatal_signal_unblock</a>();
<a name='L804'> 804 
<a name='L805'> 805     <i><font color='green'>/* Success! */</font></i>
<a name='L806'> 806     *<a href='../Y/4710.html' title='Multiple used in 4 places.'>netdev_</a> = <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>;
<a name='L807'> 807     <b>return</b> 0;
<a name='L808'> 808 
<a name='L809'> 809 <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>:
<a name='L810'> 810     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L811'> 811 <a href='../Y/2764.html' title='Multiple used in 5 places.'>error_already_set</a>:
<a name='L812'> 812     <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>);
<a name='L813'> 813     <b>if</b> (<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a> &gt;= 0) <font color='red'>{</font>
<a name='L814'> 814         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>);
<a name='L815'> 815     <font color='red'>}</font>
<a name='L816'> 816     <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L817'> 817 <font color='red'>}</font>
<a name='L818'> 818 
<a name='L819'> 819 <i><font color='green'>/* Closes and destroys 'netdev'. */</font></i>
<a name='L820'> 820 <b>void</b>
<a name='L821'> 821 <a href='../R/3566.html' title='Multiple refered from 11 places.'>netdev_close</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>)
<a name='L822'> 822 <font color='red'>{</font>
<a name='L823'> 823     <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L824'> 824 
<a name='L825'> 825     <b>if</b> (<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>) <font color='red'>{</font>
<a name='L826'> 826         <i><font color='green'>/* Bring down interface and drop promiscuous mode, if we brought up</font></i>
<a name='L827'> 827 <i><font color='green'>         * the interface or enabled promiscuous mode. */</font></i>
<a name='L828'> 828         <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L829'> 829         <a href='../S/891.html#L97' title='Defined at 97 in cbench/openflow/lib/fatal-signal.c.'>fatal_signal_block</a>();
<a name='L830'> 830         <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L1530' title='Defined at 1530 in cbench/openflow/lib/netdev.c.'>restore_flags</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>);
<a name='L831'> 831         <a href='../S/845.html#L104' title='Defined at 104 in cbench/openflow/lib/list.c.'>list_remove</a>(&amp;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4917.html' title='Multiple used in 268 places.'>node</a>);
<a name='L832'> 832         <a href='../S/891.html#L131' title='Defined at 131 in cbench/openflow/lib/fatal-signal.c.'>fatal_signal_unblock</a>();
<a name='L833'> 833         <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L834'> 834             <a href='../S/859.html#L151' title='Defined at 151 in cbench/openflow/lib/vlog.h.'>VLOG_WARN</a>("failed to restore network device flags on %s: %s",
<a name='L835'> 835                       <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>));
<a name='L836'> 836         <font color='red'>}</font>
<a name='L837'> 837 
<a name='L838'> 838         <i><font color='green'>/* Free. */</font></i>
<a name='L839'> 839         <a href='../Y/3233.html' title='Multiple used in 336 places.'>free</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L840'> 840         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>);
<a name='L841'> 841         <b>if</b> (<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a> != <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>) <font color='red'>{</font>
<a name='L842'> 842             <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>);
<a name='L843'> 843         <font color='red'>}</font>
<a name='L844'> 844 
<a name='L845'> 845         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> =1; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> &lt;= <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4996.html' title='Multiple used in 24 places.'>num_queues</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L846'> 846             <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6208.html' title='Multiple used in 5 places.'>queue_fd</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>]);
<a name='L847'> 847         <font color='red'>}</font>
<a name='L848'> 848         <a href='../Y/3233.html' title='Multiple used in 336 places.'>free</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>);
<a name='L849'> 849     <font color='red'>}</font>
<a name='L850'> 850 <font color='red'>}</font>
<a name='L851'> 851 
<a name='L852'> 852 <i><font color='green'>/* Pads 'buffer' out with zero-bytes to the minimum valid length of an</font></i>
<a name='L853'> 853 <i><font color='green'> * Ethernet packet, if necessary.  */</font></i>
<a name='L854'> 854 <b>static</b> <b>void</b>
<a name='L855'> 855 <a href='../S/851.html#L924' title='Refered from 924 in cbench/openflow/lib/netdev.c.'>pad_to_minimum_length</a>(<b>struct</b> <a href='../Y/5376.html' title='Multiple used in 231 places.'>ofpbuf</a> *<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>)
<a name='L856'> 856 <font color='red'>{</font>
<a name='L857'> 857     <b>if</b> (<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>-&gt;<a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a> &lt; <a href='../S/860.html#L116' title='Defined at 116 in cbench/openflow/lib/packets.h.'>ETH_TOTAL_MIN</a>) <font color='red'>{</font>
<a name='L858'> 858         <a href='../S/887.html#L188' title='Defined at 188 in cbench/openflow/lib/ofpbuf.c.'>ofpbuf_put_zeros</a>(<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>, <a href='../S/860.html#L116' title='Defined at 116 in cbench/openflow/lib/packets.h.'>ETH_TOTAL_MIN</a> - <a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>-&gt;<a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a>);
<a name='L859'> 859     <font color='red'>}</font>
<a name='L860'> 860 <font color='red'>}</font>
<a name='L861'> 861 
<a name='L862'> 862 <i><font color='green'>/* Attempts to receive a packet from 'netdev' into 'buffer', which the caller</font></i>
<a name='L863'> 863 <i><font color='green'> * must have initialized with sufficient room for the packet.  The space</font></i>
<a name='L864'> 864 <i><font color='green'> * required to receive any packet is ETH_HEADER_LEN bytes, plus VLAN_HEADER_LEN</font></i>
<a name='L865'> 865 <i><font color='green'> * bytes, plus the device's MTU (which may be retrieved via netdev_get_mtu()).</font></i>
<a name='L866'> 866 <i><font color='green'> * (Some devices do not allow for a VLAN header, in which case VLAN_HEADER_LEN</font></i>
<a name='L867'> 867 <i><font color='green'> * need not be included.)</font></i>
<a name='L868'> 868 <i><font color='green'> *</font></i>
<a name='L869'> 869 <i><font color='green'> * If a packet is successfully retrieved, returns 0.  In this case 'buffer' is</font></i>
<a name='L870'> 870 <i><font color='green'> * guaranteed to contain at least ETH_TOTAL_MIN bytes.  Otherwise, returns a</font></i>
<a name='L871'> 871 <i><font color='green'> * positive errno value.  Returns EAGAIN immediately if no packet is ready to</font></i>
<a name='L872'> 872 <i><font color='green'> * be returned.</font></i>
<a name='L873'> 873 <i><font color='green'> */</font></i>
<a name='L874'> 874 <b>int</b>
<a name='L875'> 875 <a href='../R/3588.html' title='Multiple refered from 3 places.'>netdev_recv</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>struct</b> <a href='../Y/5376.html' title='Multiple used in 231 places.'>ofpbuf</a> *<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>)
<a name='L876'> 876 <font color='red'>{</font>
<a name='L877'> 877     <a href='../Y/6954.html' title='Multiple used in 20 places.'>ssize_t</a> <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a>;
<a name='L878'> 878     <b>struct</b> <a href='../Y/6897.html' title='Multiple used in 6 places.'>sockaddr_ll</a> <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>;
<a name='L879'> 879     <a href='../Y/6904.html' title='Multiple used in 17 places.'>socklen_t</a> <a href='../Y/6838.html' title='Multiple used in 3 places.'>sll_len</a>;
<a name='L880'> 880 
<a name='L881'> 881     <a href='../Y/1502.html' title='Multiple used in 179 places.'>assert</a>(<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>-&gt;<a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a> == 0);
<a name='L882'> 882     <a href='../Y/1502.html' title='Multiple used in 179 places.'>assert</a>(<a href='../S/887.html#L131' title='Defined at 131 in cbench/openflow/lib/ofpbuf.c.'>ofpbuf_tailroom</a>(<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>) &gt;= <a href='../S/860.html#L116' title='Defined at 116 in cbench/openflow/lib/packets.h.'>ETH_TOTAL_MIN</a>);
<a name='L883'> 883 
<a name='L884'> 884     <i><font color='green'>/* prepare to call recvfrom */</font></i>
<a name='L885'> 885     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>,0,<b>sizeof</b> <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>);
<a name='L886'> 886     <a href='../Y/6838.html' title='Multiple used in 3 places.'>sll_len</a> = <b>sizeof</b> <a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>;
<a name='L887'> 887 
<a name='L888'> 888     <i><font color='green'>/* cannot execute recvfrom over a tap device */</font></i>
<a name='L889'> 889     <b>if</b> (!<a href='../Y/7101.html' title='Multiple used in 25 places.'>strncmp</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, "tap", 3)) <font color='red'>{</font>
<a name='L890'> 890         <b>do</b> <font color='red'>{</font>
<a name='L891'> 891             <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> = <a href='../Y/6277.html' title='Multiple used in 17 places.'>read</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>, <a href='../S/887.html#L252' title='Defined at 252 in cbench/openflow/lib/ofpbuf.c.'>ofpbuf_tail</a>(<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>),
<a name='L892'> 892                            (<a href='../Y/6954.html' title='Multiple used in 20 places.'>ssize_t</a>)<a href='../S/887.html#L131' title='Defined at 131 in cbench/openflow/lib/ofpbuf.c.'>ofpbuf_tailroom</a>(<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>));
<a name='L893'> 893         <font color='red'>}</font> <b>while</b> (<a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> &lt; 0 &amp;&amp; <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> == <a href='../Y/266.html' title='Multiple used in 24 places.'>EINTR</a>);
<a name='L894'> 894     <font color='red'>}</font>
<a name='L895'> 895     <b>else</b> <font color='red'>{</font>
<a name='L896'> 896         <b>do</b> <font color='red'>{</font>
<a name='L897'> 897             <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> = <a href='../Y/6314.html' title='Multiple used in 2 places.'>recvfrom</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>, <a href='../S/887.html#L252' title='Defined at 252 in cbench/openflow/lib/ofpbuf.c.'>ofpbuf_tail</a>(<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>),
<a name='L898'> 898                                (<a href='../Y/6954.html' title='Multiple used in 20 places.'>ssize_t</a>)<a href='../S/887.html#L131' title='Defined at 131 in cbench/openflow/lib/ofpbuf.c.'>ofpbuf_tailroom</a>(<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>), 0,
<a name='L899'> 899                                (<b>struct</b> <a href='../Y/6895.html' title='Multiple used in 43 places.'>sockaddr</a> *)&amp;<a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>, &amp;<a href='../Y/6838.html' title='Multiple used in 3 places.'>sll_len</a>);
<a name='L900'> 900         <font color='red'>}</font> <b>while</b> (<a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> &lt; 0 &amp;&amp; <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> == <a href='../Y/266.html' title='Multiple used in 24 places.'>EINTR</a>);
<a name='L901'> 901     <font color='red'>}</font>
<a name='L902'> 902     <b>if</b> (<a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> &lt; 0) <font color='red'>{</font>
<a name='L903'> 903         <b>if</b> (<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>) <font color='red'>{</font>
<a name='L904'> 904             <a href='../S/859.html#L171' title='Defined at 171 in cbench/openflow/lib/vlog.h.'>VLOG_WARN_RL</a>(&amp;<a href='../Y/6448.html' title='Multiple used in 214 places.'>rl</a>, "error receiving Ethernet packet on %s: %s",
<a name='L905'> 905                          <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>), <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L906'> 906         <font color='red'>}</font>
<a name='L907'> 907         <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L908'> 908     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L909'> 909         <i><font color='green'>/* we have multiple raw sockets at the same interface, so we also</font></i>
<a name='L910'> 910 <i><font color='green'>         * receive what others send, and need to filter them out.</font></i>
<a name='L911'> 911 <i><font color='green'>         * TODO(yiannisy): can we install this as a BPF at kernel? */</font></i>
<a name='L912'> 912         <b>if</b> (<a href='../Y/6833.html' title='Multiple used in 15 places.'>sll</a>.<a href='../Y/6839.html' title='Multiple used in 2 places.'>sll_pkttype</a> == PACKET_OUTGOING) <font color='red'>{</font>
<a name='L913'> 913             <b>return</b> <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>;
<a name='L914'> 914         <font color='red'>}</font>
<a name='L915'> 915 
<a name='L916'> 916 
<a name='L917'> 917         <a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>-&gt;<a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a> += <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a>;
<a name='L918'> 918 
<a name='L919'> 919         <i><font color='green'>/* When the kernel internally sends out an Ethernet frame on an</font></i>
<a name='L920'> 920 <i><font color='green'>         * interface, it gives us a copy *before* padding the frame to the</font></i>
<a name='L921'> 921 <i><font color='green'>         * minimum length.  Thus, when it sends out something like an ARP</font></i>
<a name='L922'> 922 <i><font color='green'>         * request, we see a too-short frame.  So pad it out to the minimum</font></i>
<a name='L923'> 923 <i><font color='green'>         * length. */</font></i>
<a name='L924'> 924         <a href='../S/851.html#L855' title='Defined at 855 in cbench/openflow/lib/netdev.c.'>pad_to_minimum_length</a>(<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>);
<a name='L925'> 925         <b>return</b> 0;
<a name='L926'> 926     <font color='red'>}</font>
<a name='L927'> 927 <font color='red'>}</font>
<a name='L928'> 928 
<a name='L929'> 929 <i><font color='green'>/* Registers with the poll loop to wake up from the next call to poll_block()</font></i>
<a name='L930'> 930 <i><font color='green'> * when a packet is ready to be received with netdev_recv() on 'netdev'. */</font></i>
<a name='L931'> 931 <b>void</b>
<a name='L932'> 932 <a href='../R/3589.html' title='Multiple refered from 3 places.'>netdev_recv_wait</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>)
<a name='L933'> 933 <font color='red'>{</font>
<a name='L934'> 934     <a href='../S/854.html#L93' title='Defined at 93 in cbench/openflow/lib/poll-loop.c.'>poll_fd_wait</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>, <a href='../Y/688.html' title='Multiple used in 21 places.'>POLLIN</a>);
<a name='L935'> 935 <font color='red'>}</font>
<a name='L936'> 936 
<a name='L937'> 937 <i><font color='green'>/* Discards all packets waiting to be received from 'netdev'. */</font></i>
<a name='L938'> 938 <b>int</b>
<a name='L939'> 939 <a href='../R/3568.html' title='Multiple refered from 4 places.'>netdev_drain</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>)
<a name='L940'> 940 <font color='red'>{</font>
<a name='L941'> 941     <b>if</b> (<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a> != <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>) <font color='red'>{</font>
<a name='L942'> 942         <a href='../S/835.html#L207' title='Defined at 207 in cbench/openflow/lib/socket-util.c.'>drain_fd</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7551.html' title='Multiple used in 5 places.'>txqlen</a>);
<a name='L943'> 943         <b>return</b> 0;
<a name='L944'> 944     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L945'> 945         <b>return</b> <a href='../S/835.html#L167' title='Defined at 167 in cbench/openflow/lib/socket-util.c.'>drain_rcvbuf</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>);
<a name='L946'> 946     <font color='red'>}</font>
<a name='L947'> 947 <font color='red'>}</font>
<a name='L948'> 948 
<a name='L949'> 949 <i><font color='green'>/* Sends 'buffer' on 'netdev'.  Returns 0 if successful, otherwise a positive</font></i>
<a name='L950'> 950 <i><font color='green'> * errno value.  Returns EAGAIN without blocking if the packet cannot be queued</font></i>
<a name='L951'> 951 <i><font color='green'> * immediately.  Returns EMSGSIZE if a partial packet was transmitted or if</font></i>
<a name='L952'> 952 <i><font color='green'> * the packet is too big or too small to transmit on the device.</font></i>
<a name='L953'> 953 <i><font color='green'> *</font></i>
<a name='L954'> 954 <i><font color='green'> * class_id denotes the queue to send the packet. If 0, it goes to the</font></i>
<a name='L955'> 955 <i><font color='green'> * default,best-effort queue.</font></i>
<a name='L956'> 956 <i><font color='green'> *</font></i>
<a name='L957'> 957 <i><font color='green'> * The caller retains ownership of 'buffer' in all cases.</font></i>
<a name='L958'> 958 <i><font color='green'> *</font></i>
<a name='L959'> 959 <i><font color='green'> * The kernel maintains a packet transmission queue, so the caller is not</font></i>
<a name='L960'> 960 <i><font color='green'> * expected to do additional queuing of packets.</font></i>
<a name='L961'> 961 <i><font color='green'> */</font></i>
<a name='L962'> 962 <b>int</b>
<a name='L963'> 963 <a href='../R/3590.html' title='Multiple refered from 3 places.'>netdev_send</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>const</b> <b>struct</b> <a href='../Y/5376.html' title='Multiple used in 231 places.'>ofpbuf</a> *<a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>,
<a name='L964'> 964             <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>)
<a name='L965'> 965 <font color='red'>{</font>
<a name='L966'> 966     <a href='../Y/6954.html' title='Multiple used in 20 places.'>ssize_t</a> <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a>;
<a name='L967'> 967 
<a name='L968'> 968     <a href='../Y/1502.html' title='Multiple used in 179 places.'>assert</a>(<a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a> &lt;= <a href='../S/814.html#L71' title='Defined at 71 in cbench/openflow/lib/netdev.h.'>NETDEV_MAX_QUEUES</a>);
<a name='L969'> 969 
<a name='L970'> 970     <b>do</b> <font color='red'>{</font>
<a name='L971'> 971         <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> = <a href='../Y/7898.html' title='Multiple used in 44 places.'>write</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6208.html' title='Multiple used in 5 places.'>queue_fd</a>[<a href='../Y/1892.html' title='Multiple used in 28 places.'>class_id</a>], <a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>-&gt;<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>, <a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>-&gt;<a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a>);
<a name='L972'> 972     <font color='red'>}</font> <b>while</b> (<a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> &lt; 0 &amp;&amp; <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> == <a href='../Y/266.html' title='Multiple used in 24 places.'>EINTR</a>);
<a name='L973'> 973 
<a name='L974'> 974     <b>if</b> (<a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> &lt; 0) <font color='red'>{</font>
<a name='L975'> 975         <i><font color='green'>/* The Linux AF_PACKET implementation never blocks waiting for room</font></i>
<a name='L976'> 976 <i><font color='green'>         * for packets, instead returning ENOBUFS.  Translate this into EAGAIN</font></i>
<a name='L977'> 977 <i><font color='green'>         * for the caller. */</font></i>
<a name='L978'> 978         <b>if</b> (<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> == <a href='../Y/273.html' title='Multiple used in 24 places.'>ENOBUFS</a>) <font color='red'>{</font>
<a name='L979'> 979             <b>return</b> <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>;
<a name='L980'> 980         <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>) <font color='red'>{</font>
<a name='L981'> 981             <a href='../S/859.html#L171' title='Defined at 171 in cbench/openflow/lib/vlog.h.'>VLOG_WARN_RL</a>(&amp;<a href='../Y/6448.html' title='Multiple used in 214 places.'>rl</a>, "error sending Ethernet packet on %s: %s",
<a name='L982'> 982                          <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L983'> 983         <font color='red'>}</font>
<a name='L984'> 984         <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L985'> 985     <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> != <a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>-&gt;<a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a>) <font color='red'>{</font>
<a name='L986'> 986         <a href='../S/859.html#L171' title='Defined at 171 in cbench/openflow/lib/vlog.h.'>VLOG_WARN_RL</a>(&amp;<a href='../Y/6448.html' title='Multiple used in 214 places.'>rl</a>,
<a name='L987'> 987                      "send partial Ethernet packet (%d bytes of %zu) on %s",
<a name='L988'> 988                      (<b>int</b>) <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a>, <a href='../Y/1704.html' title='Multiple used in 387 places.'>buffer</a>-&gt;<a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L989'> 989         <b>return</b> EMSGSIZE;
<a name='L990'> 990     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L991'> 991         <b>return</b> 0;
<a name='L992'> 992     <font color='red'>}</font>
<a name='L993'> 993 <font color='red'>}</font>
<a name='L994'> 994 
<a name='L995'> 995 <i><font color='green'>/* Registers with the poll loop to wake up from the next call to poll_block()</font></i>
<a name='L996'> 996 <i><font color='green'> * when the packet transmission queue has sufficient room to transmit a packet</font></i>
<a name='L997'> 997 <i><font color='green'> * with netdev_send().</font></i>
<a name='L998'> 998 <i><font color='green'> *</font></i>
<a name='L999'> 999 <i><font color='green'> * The kernel maintains a packet transmission queue, so the client is not</font></i>
<a name='L1000'>1000 <i><font color='green'> * expected to do additional queuing of packets.  Thus, this function is</font></i>
<a name='L1001'>1001 <i><font color='green'> * unlikely to ever be used.  It is included for completeness. */</font></i>
<a name='L1002'>1002 <b>void</b>
<a name='L1003'>1003 <a href='../S/814.html#L83' title='Refered from 83 in cbench/openflow/lib/netdev.h.'>netdev_send_wait</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>)
<a name='L1004'>1004 <font color='red'>{</font>
<a name='L1005'>1005     <b>if</b> (<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a> == <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>) <font color='red'>{</font>
<a name='L1006'>1006         <a href='../S/854.html#L93' title='Defined at 93 in cbench/openflow/lib/poll-loop.c.'>poll_fd_wait</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7248.html' title='Multiple used in 25 places.'>tap_fd</a>, <a href='../Y/690.html' title='Multiple used in 21 places.'>POLLOUT</a>);
<a name='L1007'>1007     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1008'>1008         <i><font color='green'>/* TAP device always accepts packets.*/</font></i>
<a name='L1009'>1009         <a href='../S/854.html#L119' title='Defined at 119 in cbench/openflow/lib/poll-loop.c.'>poll_immediate_wake</a>();
<a name='L1010'>1010     <font color='red'>}</font>
<a name='L1011'>1011 <font color='red'>}</font>
<a name='L1012'>1012 
<a name='L1013'>1013 <i><font color='green'>/* Attempts to set 'netdev''s MAC address to 'mac'.  Returns 0 if successful,</font></i>
<a name='L1014'>1014 <i><font color='green'> * otherwise a positive errno value. */</font></i>
<a name='L1015'>1015 <b>int</b>
<a name='L1016'>1016 <a href='../R/3592.html' title='Multiple refered from 2 places.'>netdev_set_etheraddr</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>const</b> <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> <a href='../Y/4297.html' title='Multiple used in 196 places.'>mac</a>[<a href='../S/860.html#L42' title='Defined at 42 in cbench/openflow/lib/packets.h.'>ETH_ADDR_LEN</a>])
<a name='L1017'>1017 <font color='red'>{</font>
<a name='L1018'>1018     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L1019'>1019 
<a name='L1020'>1020     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>, 0, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>);
<a name='L1021'>1021     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L1022'>1022     <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3744.html' title='Multiple used in 4 places.'>ifr_hwaddr</a>.<a href='../Y/6567.html' title='Multiple used in 4 places.'>sa_family</a> = <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/3698.html' title='Multiple used in 7 places.'>hwaddr_family</a>;
<a name='L1023'>1023     <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3744.html' title='Multiple used in 4 places.'>ifr_hwaddr</a>.<a href='../Y/6566.html' title='Multiple used in 5 places.'>sa_data</a>, <a href='../Y/4297.html' title='Multiple used in 196 places.'>mac</a>, <a href='../S/860.html#L42' title='Defined at 42 in cbench/openflow/lib/packets.h.'>ETH_ADDR_LEN</a>);
<a name='L1024'>1024     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>, SIOCSIFHWADDR, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L1025'>1025         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("ioctl(SIOCSIFHWADDR) on %s device failed: %s",
<a name='L1026'>1026                  <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L1027'>1027         <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L1028'>1028     <font color='red'>}</font>
<a name='L1029'>1029     <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2811.html' title='Multiple used in 6 places.'>etheraddr</a>, <a href='../Y/4297.html' title='Multiple used in 196 places.'>mac</a>, <a href='../S/860.html#L42' title='Defined at 42 in cbench/openflow/lib/packets.h.'>ETH_ADDR_LEN</a>);
<a name='L1030'>1030     <b>return</b> 0;
<a name='L1031'>1031 <font color='red'>}</font>
<a name='L1032'>1032 
<a name='L1033'>1033 <i><font color='green'>/* Returns a pointer to 'netdev''s MAC address.  The caller must not modify or</font></i>
<a name='L1034'>1034 <i><font color='green'> * free the returned buffer. */</font></i>
<a name='L1035'>1035 <b>const</b> <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> *
<a name='L1036'>1036 <a href='../R/3571.html' title='Multiple refered from 9 places.'>netdev_get_etheraddr</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>)
<a name='L1037'>1037 <font color='red'>{</font>
<a name='L1038'>1038     <b>return</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2811.html' title='Multiple used in 6 places.'>etheraddr</a>;
<a name='L1039'>1039 <font color='red'>}</font>
<a name='L1040'>1040 
<a name='L1041'>1041 <i><font color='green'>/* Returns the name of the network device that 'netdev' represents,</font></i>
<a name='L1042'>1042 <i><font color='green'> * e.g. "eth0".  The caller must not modify or free the returned string. */</font></i>
<a name='L1043'>1043 <b>const</b> <b>char</b> *
<a name='L1044'>1044 <a href='../R/3577.html' title='Multiple refered from 11 places.'>netdev_get_name</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>)
<a name='L1045'>1045 <font color='red'>{</font>
<a name='L1046'>1046     <b>return</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>;
<a name='L1047'>1047 <font color='red'>}</font>
<a name='L1048'>1048 
<a name='L1049'>1049 <i><font color='green'>/* Returns the maximum size of transmitted (and received) packets on 'netdev',</font></i>
<a name='L1050'>1050 <i><font color='green'> * in bytes, not including the hardware header; thus, this is typically 1500</font></i>
<a name='L1051'>1051 <i><font color='green'> * bytes for Ethernet devices. */</font></i>
<a name='L1052'>1052 <b>int</b>
<a name='L1053'>1053 <a href='../R/3576.html' title='Multiple refered from 3 places.'>netdev_get_mtu</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>)
<a name='L1054'>1054 <font color='red'>{</font>
<a name='L1055'>1055     <b>return</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4539.html' title='Multiple used in 9 places.'>mtu</a>;
<a name='L1056'>1056 <font color='red'>}</font>
<a name='L1057'>1057 
<a name='L1058'>1058 <i><font color='green'>/* Returns the features supported by 'netdev' of type 'type', as a bitmap</font></i>
<a name='L1059'>1059 <i><font color='green'> * of bits from enum ofp_phy_features, in host byte order. */</font></i>
<a name='L1060'>1060 <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a>
<a name='L1061'>1061 <a href='../R/3572.html' title='Multiple refered from 5 places.'>netdev_get_features</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>int</b> <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>)
<a name='L1062'>1062 <font color='red'>{</font>
<a name='L1063'>1063     <a href='../S/851.html#L490' title='Defined at 490 in cbench/openflow/lib/netdev.c.'>do_ethtool</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>);
<a name='L1064'>1064     <b>switch</b> (<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>) <font color='red'>{</font>
<a name='L1065'>1065     <b>case</b> <a href='../S/814.html#L53' title='Defined at 53 in cbench/openflow/lib/netdev.h.'>NETDEV_FEAT_CURRENT</a>:
<a name='L1066'>1066         <b>return</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a>;
<a name='L1067'>1067     <b>case</b> <a href='../S/814.html#L54' title='Defined at 54 in cbench/openflow/lib/netdev.h.'>NETDEV_FEAT_ADVERTISED</a>:
<a name='L1068'>1068         <b>return</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a>;
<a name='L1069'>1069     <b>case</b> <a href='../S/814.html#L55' title='Defined at 55 in cbench/openflow/lib/netdev.h.'>NETDEV_FEAT_SUPPORTED</a>:
<a name='L1070'>1070         <b>return</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a>;
<a name='L1071'>1071     <b>case</b> <a href='../S/814.html#L56' title='Defined at 56 in cbench/openflow/lib/netdev.h.'>NETDEV_FEAT_PEER</a>:
<a name='L1072'>1072         <b>return</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/5700.html' title='Multiple used in 46 places.'>peer</a>;
<a name='L1073'>1073     <b>default</b>:
<a name='L1074'>1074         <a href='../S/859.html#L151' title='Defined at 151 in cbench/openflow/lib/vlog.h.'>VLOG_WARN</a>("Unknown feature type: %d\n", <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>);
<a name='L1075'>1075         <b>return</b> 0;
<a name='L1076'>1076     <font color='red'>}</font>
<a name='L1077'>1077 <font color='red'>}</font>
<a name='L1078'>1078 
<a name='L1079'>1079 <i><font color='green'>/* If 'netdev' has an assigned IPv4 address, sets '*in4' to that address (if</font></i>
<a name='L1080'>1080 <i><font color='green'> * 'in4' is non-null) and returns true.  Otherwise, returns false. */</font></i>
<a name='L1081'>1081 <a href='../Y/1645.html' title='Multiple used in 313 places.'>bool</a>
<a name='L1082'>1082 <a href='../R/3574.html' title='Multiple refered from 3 places.'>netdev_get_in4</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>struct</b> <a href='../Y/3768.html' title='Multiple used in 89 places.'>in_addr</a> *<a href='../Y/3760.html' title='Multiple used in 6 places.'>in4</a>)
<a name='L1083'>1083 <font color='red'>{</font>
<a name='L1084'>1084     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L1085'>1085     <b>struct</b> <a href='../Y/3768.html' title='Multiple used in 89 places.'>in_addr</a> <a href='../Y/3874.html' title='Multiple used in 230 places.'>ip</a> = <font color='red'>{</font> <a href='../Y/453.html' title='Multiple used in 12 places.'>INADDR_ANY</a> <font color='red'>}</font>;
<a name='L1086'>1086 
<a name='L1087'>1087     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L1088'>1088     <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3741.html' title='Multiple used in 6 places.'>ifr_addr</a>.<a href='../Y/6567.html' title='Multiple used in 4 places.'>sa_family</a> = <a href='../Y/18.html' title='Multiple used in 29 places.'>AF_INET</a>;
<a name='L1089'>1089     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a>, <a href='../Y/811.html' title='Multiple used in 3 places.'>SIOCGIFADDR</a>, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) == 0) <font color='red'>{</font>
<a name='L1090'>1090         <b>struct</b> <a href='../Y/6896.html' title='Multiple used in 27 places.'>sockaddr_in</a> *<a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a> = (<b>struct</b> <a href='../Y/6896.html' title='Multiple used in 27 places.'>sockaddr_in</a> *) &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3741.html' title='Multiple used in 6 places.'>ifr_addr</a>;
<a name='L1091'>1091         <a href='../Y/3874.html' title='Multiple used in 230 places.'>ip</a> = <a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a>-&gt;<a href='../Y/6789.html' title='Multiple used in 20 places.'>sin_addr</a>;
<a name='L1092'>1092     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1093'>1093         <a href='../S/859.html#L173' title='Defined at 173 in cbench/openflow/lib/vlog.h.'>VLOG_DBG_RL</a>(&amp;<a href='../Y/6448.html' title='Multiple used in 214 places.'>rl</a>, "%s: ioctl(SIOCGIFADDR) failed: %s",
<a name='L1094'>1094                     <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L1095'>1095     <font color='red'>}</font>
<a name='L1096'>1096     <b>if</b> (<a href='../Y/3760.html' title='Multiple used in 6 places.'>in4</a>) <font color='red'>{</font>
<a name='L1097'>1097         *<a href='../Y/3760.html' title='Multiple used in 6 places.'>in4</a> = <a href='../Y/3874.html' title='Multiple used in 230 places.'>ip</a>;
<a name='L1098'>1098     <font color='red'>}</font>
<a name='L1099'>1099     <b>return</b> <a href='../Y/3874.html' title='Multiple used in 230 places.'>ip</a>.<a href='../Y/6559.html' title='Multiple used in 125 places.'>s_addr</a> != <a href='../Y/453.html' title='Multiple used in 12 places.'>INADDR_ANY</a>;
<a name='L1100'>1100 <font color='red'>}</font>
<a name='L1101'>1101 
<a name='L1102'>1102 <b>static</b> <b>void</b>
<a name='L1103'>1103 <a href='../R/3478.html' title='Multiple refered from 4 places.'>make_in4_sockaddr</a>(<b>struct</b> <a href='../Y/6895.html' title='Multiple used in 43 places.'>sockaddr</a> *<a href='../Y/6564.html' title='Multiple used in 28 places.'>sa</a>, <b>struct</b> <a href='../Y/3768.html' title='Multiple used in 89 places.'>in_addr</a> <a href='../Y/1322.html' title='Multiple used in 61 places.'>addr</a>)
<a name='L1104'>1104 <font color='red'>{</font>
<a name='L1105'>1105     <b>struct</b> <a href='../Y/6896.html' title='Multiple used in 27 places.'>sockaddr_in</a> <a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a>;
<a name='L1106'>1106     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a>, 0, <b>sizeof</b> <a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a>);
<a name='L1107'>1107     <a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a>.<a href='../Y/6790.html' title='Multiple used in 13 places.'>sin_family</a> = <a href='../Y/18.html' title='Multiple used in 29 places.'>AF_INET</a>;
<a name='L1108'>1108     <a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a>.<a href='../Y/6789.html' title='Multiple used in 20 places.'>sin_addr</a> = <a href='../Y/1322.html' title='Multiple used in 61 places.'>addr</a>;
<a name='L1109'>1109     <a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a>.<a href='../Y/6792.html' title='Multiple used in 18 places.'>sin_port</a> = 0;
<a name='L1110'>1110 
<a name='L1111'>1111     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/6564.html' title='Multiple used in 28 places.'>sa</a>, 0, <b>sizeof</b> *<a href='../Y/6564.html' title='Multiple used in 28 places.'>sa</a>);
<a name='L1112'>1112     <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/6564.html' title='Multiple used in 28 places.'>sa</a>, &amp;<a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a>, <b>sizeof</b> <a href='../Y/6788.html' title='Multiple used in 65 places.'>sin</a>);
<a name='L1113'>1113 <font color='red'>}</font>
<a name='L1114'>1114 
<a name='L1115'>1115 <b>static</b> <b>int</b>
<a name='L1116'>1116 <a href='../R/2752.html' title='Multiple refered from 2 places.'>do_set_addr</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>int</b> <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>,
<a name='L1117'>1117             <b>int</b> <a href='../Y/3869.html' title='Multiple used in 2 places.'>ioctl_nr</a>, <b>const</b> <b>char</b> *<a href='../Y/3868.html' title='Multiple used in 2 places.'>ioctl_name</a>, <b>struct</b> <a href='../Y/3768.html' title='Multiple used in 89 places.'>in_addr</a> <a href='../Y/1322.html' title='Multiple used in 61 places.'>addr</a>)
<a name='L1118'>1118 <font color='red'>{</font>
<a name='L1119'>1119     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L1120'>1120     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1121'>1121 
<a name='L1122'>1122     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L1123'>1123     <a href='../S/851.html#L1103' title='Defined at 1103 in cbench/openflow/lib/netdev.c.'>make_in4_sockaddr</a>(&amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3741.html' title='Multiple used in 6 places.'>ifr_addr</a>, <a href='../Y/1322.html' title='Multiple used in 61 places.'>addr</a>);
<a name='L1124'>1124     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/3869.html' title='Multiple used in 2 places.'>ioctl_nr</a>, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0 ? <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> : 0;
<a name='L1125'>1125     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L1126'>1126         <a href='../S/859.html#L151' title='Defined at 151 in cbench/openflow/lib/vlog.h.'>VLOG_WARN</a>("ioctl(%s): %s", <a href='../Y/3868.html' title='Multiple used in 2 places.'>ioctl_name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>));
<a name='L1127'>1127     <font color='red'>}</font>
<a name='L1128'>1128     <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1129'>1129 <font color='red'>}</font>
<a name='L1130'>1130 
<a name='L1131'>1131 <i><font color='green'>/* Assigns 'addr' as 'netdev''s IPv4 address and 'mask' as its netmask.  If</font></i>
<a name='L1132'>1132 <i><font color='green'> * 'addr' is INADDR_ANY, 'netdev''s IPv4 address is cleared.  Returns a</font></i>
<a name='L1133'>1133 <i><font color='green'> * positive errno value. */</font></i>
<a name='L1134'>1134 <b>int</b>
<a name='L1135'>1135 <a href='../R/3594.html' title='Multiple refered from 2 places.'>netdev_set_in4</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>struct</b> <a href='../Y/3768.html' title='Multiple used in 89 places.'>in_addr</a> <a href='../Y/1322.html' title='Multiple used in 61 places.'>addr</a>, <b>struct</b> <a href='../Y/3768.html' title='Multiple used in 89 places.'>in_addr</a> <a href='../Y/4338.html' title='Multiple used in 220 places.'>mask</a>)
<a name='L1136'>1136 <font color='red'>{</font>
<a name='L1137'>1137     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1138'>1138 
<a name='L1139'>1139     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L1116' title='Defined at 1116 in cbench/openflow/lib/netdev.c.'>do_set_addr</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>, <a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a>,
<a name='L1140'>1140                         SIOCSIFADDR, "SIOCSIFADDR", <a href='../Y/1322.html' title='Multiple used in 61 places.'>addr</a>);
<a name='L1141'>1141     <b>if</b> (!<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> &amp;&amp; <a href='../Y/1322.html' title='Multiple used in 61 places.'>addr</a>.<a href='../Y/6559.html' title='Multiple used in 125 places.'>s_addr</a> != <a href='../Y/453.html' title='Multiple used in 12 places.'>INADDR_ANY</a>) <font color='red'>{</font>
<a name='L1142'>1142         <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L1116' title='Defined at 1116 in cbench/openflow/lib/netdev.c.'>do_set_addr</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>, <a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a>,
<a name='L1143'>1143                             SIOCSIFNETMASK, "SIOCSIFNETMASK", <a href='../Y/4338.html' title='Multiple used in 220 places.'>mask</a>);
<a name='L1144'>1144     <font color='red'>}</font>
<a name='L1145'>1145     <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1146'>1146 <font color='red'>}</font>
<a name='L1147'>1147 
<a name='L1148'>1148 <i><font color='green'>/* Adds 'router' as a default IP gateway. */</font></i>
<a name='L1149'>1149 <b>int</b>
<a name='L1150'>1150 <a href='../R/3563.html' title='Multiple refered from 2 places.'>netdev_add_router</a>(<b>struct</b> <a href='../Y/3768.html' title='Multiple used in 89 places.'>in_addr</a> <a href='../Y/6469.html' title='Multiple used in 16 places.'>router</a>)
<a name='L1151'>1151 <font color='red'>{</font>
<a name='L1152'>1152     <b>struct</b> <a href='../Y/3768.html' title='Multiple used in 89 places.'>in_addr</a> <a href='../Y/1394.html' title='Multiple used in 6 places.'>any</a> = <font color='red'>{</font> <a href='../Y/453.html' title='Multiple used in 12 places.'>INADDR_ANY</a> <font color='red'>}</font>;
<a name='L1153'>1153     <b>struct</b> rtentry <a href='../Y/6486.html' title='Multiple used in 7 places.'>rt</a>;
<a name='L1154'>1154     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1155'>1155 
<a name='L1156'>1156     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/6486.html' title='Multiple used in 7 places.'>rt</a>, 0, <b>sizeof</b> <a href='../Y/6486.html' title='Multiple used in 7 places.'>rt</a>);
<a name='L1157'>1157     <a href='../S/851.html#L1103' title='Defined at 1103 in cbench/openflow/lib/netdev.c.'>make_in4_sockaddr</a>(&amp;<a href='../Y/6486.html' title='Multiple used in 7 places.'>rt</a>.rt_dst, <a href='../Y/1394.html' title='Multiple used in 6 places.'>any</a>);
<a name='L1158'>1158     <a href='../S/851.html#L1103' title='Defined at 1103 in cbench/openflow/lib/netdev.c.'>make_in4_sockaddr</a>(&amp;<a href='../Y/6486.html' title='Multiple used in 7 places.'>rt</a>.rt_gateway, <a href='../Y/6469.html' title='Multiple used in 16 places.'>router</a>);
<a name='L1159'>1159     <a href='../S/851.html#L1103' title='Defined at 1103 in cbench/openflow/lib/netdev.c.'>make_in4_sockaddr</a>(&amp;<a href='../Y/6486.html' title='Multiple used in 7 places.'>rt</a>.rt_genmask, <a href='../Y/1394.html' title='Multiple used in 6 places.'>any</a>);
<a name='L1160'>1160     <a href='../Y/6486.html' title='Multiple used in 7 places.'>rt</a>.rt_flags = RTF_UP | RTF_GATEWAY;
<a name='L1161'>1161     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a>, SIOCADDRT, &amp;<a href='../Y/6486.html' title='Multiple used in 7 places.'>rt</a>) &lt; 0 ? <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> : 0;
<a name='L1162'>1162     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L1163'>1163         <a href='../S/859.html#L151' title='Defined at 151 in cbench/openflow/lib/vlog.h.'>VLOG_WARN</a>("ioctl(SIOCADDRT): %s", <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>));
<a name='L1164'>1164     <font color='red'>}</font>
<a name='L1165'>1165     <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1166'>1166 <font color='red'>}</font>
<a name='L1167'>1167 
<a name='L1168'>1168 <i><font color='green'>/* If 'netdev' has an assigned IPv6 address, sets '*in6' to that address (if</font></i>
<a name='L1169'>1169 <i><font color='green'> * 'in6' is non-null) and returns true.  Otherwise, returns false. */</font></i>
<a name='L1170'>1170 <a href='../Y/1645.html' title='Multiple used in 313 places.'>bool</a>
<a name='L1171'>1171 <a href='../R/3575.html' title='Multiple refered from 2 places.'>netdev_get_in6</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>struct</b> <a href='../Y/3762.html' title='Multiple used in 7 places.'>in6_addr</a> *<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>)
<a name='L1172'>1172 <font color='red'>{</font>
<a name='L1173'>1173     <b>if</b> (<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>) <font color='red'>{</font>
<a name='L1174'>1174         *<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a> = <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>;
<a name='L1175'>1175     <font color='red'>}</font>
<a name='L1176'>1176     <b>return</b> <a href='../Y/4416.html' title='Multiple used in 69 places.'>memcmp</a>(&amp;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>, &amp;<a href='../Y/3764.html' title='Multiple used in 3 places.'>in6addr_any</a>, <b>sizeof</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/3761.html' title='Multiple used in 15 places.'>in6</a>) != 0;
<a name='L1177'>1177 <font color='red'>}</font>
<a name='L1178'>1178 
<a name='L1179'>1179 <i><font color='green'>/* Obtains the current flags for 'netdev' and stores them into '*flagsp'.</font></i>
<a name='L1180'>1180 <i><font color='green'> * Returns 0 if successful, otherwise a positive errno value. */</font></i>
<a name='L1181'>1181 <b>int</b>
<a name='L1182'>1182 <a href='../S/814.html#L93' title='Refered from 93 in cbench/openflow/lib/netdev.h.'>netdev_get_flags</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>enum</b> <a href='../Y/4713.html' title='Multiple used in 13 places.'>netdev_flags</a> *<a href='../Y/3122.html' title='Multiple used in 8 places.'>flagsp</a>)
<a name='L1183'>1183 <font color='red'>{</font>
<a name='L1184'>1184     <b>return</b> <a href='../S/851.html#L1317' title='Defined at 1317 in cbench/openflow/lib/netdev.c.'>netdev_nodev_get_flags</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/3122.html' title='Multiple used in 8 places.'>flagsp</a>);
<a name='L1185'>1185 <font color='red'>}</font>
<a name='L1186'>1186 
<a name='L1187'>1187 <b>static</b> <b>int</b>
<a name='L1188'>1188 <a href='../S/851.html#L1216' title='Refered from 1216 in cbench/openflow/lib/netdev.c.'>nd_to_iff_flags</a>(<b>enum</b> <a href='../Y/4713.html' title='Multiple used in 13 places.'>netdev_flags</a> <a href='../Y/4664.html' title='Multiple used in 3 places.'>nd</a>)
<a name='L1189'>1189 <font color='red'>{</font>
<a name='L1190'>1190     <b>int</b> <a href='../Y/3734.html' title='Multiple used in 4 places.'>iff</a> = 0;
<a name='L1191'>1191     <b>if</b> (<a href='../Y/4664.html' title='Multiple used in 3 places.'>nd</a> &amp; <a href='../S/814.html#L60' title='Defined at 60 in cbench/openflow/lib/netdev.h.'>NETDEV_UP</a>) <font color='red'>{</font>
<a name='L1192'>1192         <a href='../Y/3734.html' title='Multiple used in 4 places.'>iff</a> |= <a href='../Y/450.html' title='Multiple used in 6 places.'>IFF_UP</a>;
<a name='L1193'>1193     <font color='red'>}</font>
<a name='L1194'>1194     <b>if</b> (<a href='../Y/4664.html' title='Multiple used in 3 places.'>nd</a> &amp; <a href='../S/814.html#L61' title='Defined at 61 in cbench/openflow/lib/netdev.h.'>NETDEV_PROMISC</a>) <font color='red'>{</font>
<a name='L1195'>1195         <a href='../Y/3734.html' title='Multiple used in 4 places.'>iff</a> |= <a href='../Y/448.html' title='Multiple used in 3 places.'>IFF_PROMISC</a>;
<a name='L1196'>1196     <font color='red'>}</font>
<a name='L1197'>1197     <b>return</b> <a href='../Y/3734.html' title='Multiple used in 4 places.'>iff</a>;
<a name='L1198'>1198 <font color='red'>}</font>
<a name='L1199'>1199 
<a name='L1200'>1200 <i><font color='green'>/* On 'netdev', turns off the flags in 'off' and then turns on the flags in</font></i>
<a name='L1201'>1201 <i><font color='green'> * 'on'.  If 'permanent' is true, the changes will persist; otherwise, they</font></i>
<a name='L1202'>1202 <i><font color='green'> * will be reverted when 'netdev' is closed or the program exits.  Returns 0 if</font></i>
<a name='L1203'>1203 <i><font color='green'> * successful, otherwise a positive errno value. */</font></i>
<a name='L1204'>1204 <b>static</b> <b>int</b>
<a name='L1205'>1205 <a href='../R/2764.html' title='Multiple refered from 3 places.'>do_update_flags</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>enum</b> <a href='../Y/4713.html' title='Multiple used in 13 places.'>netdev_flags</a> <a href='../Y/5063.html' title='Multiple used in 3 places.'>off</a>,
<a name='L1206'>1206                 <b>enum</b> <a href='../Y/4713.html' title='Multiple used in 13 places.'>netdev_flags</a> <a href='../Y/5455.html' title='Multiple used in 8 places.'>on</a>, <a href='../Y/1645.html' title='Multiple used in 313 places.'>bool</a> <a href='../Y/5715.html' title='Multiple used in 11 places.'>permanent</a>)
<a name='L1207'>1207 <font color='red'>{</font>
<a name='L1208'>1208     <b>int</b> <a href='../Y/5430.html' title='Multiple used in 5 places.'>old_flags</a>, <a href='../Y/4760.html' title='Multiple used in 5 places.'>new_flags</a>;
<a name='L1209'>1209     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1210'>1210 
<a name='L1211'>1211     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L1566' title='Defined at 1566 in cbench/openflow/lib/netdev.c.'>get_flags</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, &amp;<a href='../Y/5430.html' title='Multiple used in 5 places.'>old_flags</a>);
<a name='L1212'>1212     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L1213'>1213         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1214'>1214     <font color='red'>}</font>
<a name='L1215'>1215 
<a name='L1216'>1216     <a href='../Y/4760.html' title='Multiple used in 5 places.'>new_flags</a> = (<a href='../Y/5430.html' title='Multiple used in 5 places.'>old_flags</a> &amp; ~<a href='../S/851.html#L1188' title='Defined at 1188 in cbench/openflow/lib/netdev.c.'>nd_to_iff_flags</a>(<a href='../Y/5063.html' title='Multiple used in 3 places.'>off</a>)) | <a href='../S/851.html#L1188' title='Defined at 1188 in cbench/openflow/lib/netdev.c.'>nd_to_iff_flags</a>(<a href='../Y/5455.html' title='Multiple used in 8 places.'>on</a>);
<a name='L1217'>1217     <b>if</b> (!<a href='../Y/5715.html' title='Multiple used in 11 places.'>permanent</a>) <font color='red'>{</font>
<a name='L1218'>1218         <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1854.html' title='Multiple used in 4 places.'>changed_flags</a> |= <a href='../Y/4760.html' title='Multiple used in 5 places.'>new_flags</a> ^ <a href='../Y/5430.html' title='Multiple used in 5 places.'>old_flags</a>;
<a name='L1219'>1219     <font color='red'>}</font>
<a name='L1220'>1220     <b>if</b> (<a href='../Y/4760.html' title='Multiple used in 5 places.'>new_flags</a> != <a href='../Y/5430.html' title='Multiple used in 5 places.'>old_flags</a>) <font color='red'>{</font>
<a name='L1221'>1221         <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L1580' title='Defined at 1580 in cbench/openflow/lib/netdev.c.'>set_flags</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/4760.html' title='Multiple used in 5 places.'>new_flags</a>);
<a name='L1222'>1222     <font color='red'>}</font>
<a name='L1223'>1223     <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1224'>1224 <font color='red'>}</font>
<a name='L1225'>1225 
<a name='L1226'>1226 <i><font color='green'>/* Sets the flags for 'netdev' to 'flags'.</font></i>
<a name='L1227'>1227 <i><font color='green'> * If 'permanent' is true, the changes will persist; otherwise, they</font></i>
<a name='L1228'>1228 <i><font color='green'> * will be reverted when 'netdev' is closed or the program exits.</font></i>
<a name='L1229'>1229 <i><font color='green'> * Returns 0 if successful, otherwise a positive errno value. */</font></i>
<a name='L1230'>1230 <b>int</b>
<a name='L1231'>1231 <a href='../R/3593.html' title='Multiple refered from 3 places.'>netdev_set_flags</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>enum</b> <a href='../Y/4713.html' title='Multiple used in 13 places.'>netdev_flags</a> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>,
<a name='L1232'>1232                  <a href='../Y/1645.html' title='Multiple used in 313 places.'>bool</a> <a href='../Y/5715.html' title='Multiple used in 11 places.'>permanent</a>)
<a name='L1233'>1233 <font color='red'>{</font>
<a name='L1234'>1234     <b>return</b> <a href='../S/851.html#L1205' title='Defined at 1205 in cbench/openflow/lib/netdev.c.'>do_update_flags</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>, -1, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>, <a href='../Y/5715.html' title='Multiple used in 11 places.'>permanent</a>);
<a name='L1235'>1235 <font color='red'>}</font>
<a name='L1236'>1236 
<a name='L1237'>1237 <i><font color='green'>/* Turns on the specified 'flags' on 'netdev'.</font></i>
<a name='L1238'>1238 <i><font color='green'> * If 'permanent' is true, the changes will persist; otherwise, they</font></i>
<a name='L1239'>1239 <i><font color='green'> * will be reverted when 'netdev' is closed or the program exits.</font></i>
<a name='L1240'>1240 <i><font color='green'> * Returns 0 if successful, otherwise a positive errno value. */</font></i>
<a name='L1241'>1241 <b>int</b>
<a name='L1242'>1242 <a href='../R/3599.html' title='Multiple refered from 6 places.'>netdev_turn_flags_on</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>enum</b> <a href='../Y/4713.html' title='Multiple used in 13 places.'>netdev_flags</a> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>,
<a name='L1243'>1243                      <a href='../Y/1645.html' title='Multiple used in 313 places.'>bool</a> <a href='../Y/5715.html' title='Multiple used in 11 places.'>permanent</a>)
<a name='L1244'>1244 <font color='red'>{</font>
<a name='L1245'>1245     <b>return</b> <a href='../S/851.html#L1205' title='Defined at 1205 in cbench/openflow/lib/netdev.c.'>do_update_flags</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>, 0, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>, <a href='../Y/5715.html' title='Multiple used in 11 places.'>permanent</a>);
<a name='L1246'>1246 <font color='red'>}</font>
<a name='L1247'>1247 
<a name='L1248'>1248 <i><font color='green'>/* Turns off the specified 'flags' on 'netdev'.</font></i>
<a name='L1249'>1249 <i><font color='green'> * If 'permanent' is true, the changes will persist; otherwise, they</font></i>
<a name='L1250'>1250 <i><font color='green'> * will be reverted when 'netdev' is closed or the program exits.</font></i>
<a name='L1251'>1251 <i><font color='green'> * Returns 0 if successful, otherwise a positive errno value. */</font></i>
<a name='L1252'>1252 <b>int</b>
<a name='L1253'>1253 <a href='../R/3598.html' title='Multiple refered from 2 places.'>netdev_turn_flags_off</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>, <b>enum</b> <a href='../Y/4713.html' title='Multiple used in 13 places.'>netdev_flags</a> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>,
<a name='L1254'>1254                       <a href='../Y/1645.html' title='Multiple used in 313 places.'>bool</a> <a href='../Y/5715.html' title='Multiple used in 11 places.'>permanent</a>)
<a name='L1255'>1255 <font color='red'>{</font>
<a name='L1256'>1256     <b>return</b> <a href='../S/851.html#L1205' title='Defined at 1205 in cbench/openflow/lib/netdev.c.'>do_update_flags</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>, 0, <a href='../Y/5715.html' title='Multiple used in 11 places.'>permanent</a>);
<a name='L1257'>1257 <font color='red'>}</font>
<a name='L1258'>1258 
<a name='L1259'>1259 <i><font color='green'>/* Looks up the ARP table entry for 'ip' on 'netdev'.  If one exists and can be</font></i>
<a name='L1260'>1260 <i><font color='green'> * successfully retrieved, it stores the corresponding MAC address in 'mac' and</font></i>
<a name='L1261'>1261 <i><font color='green'> * returns 0.  Otherwise, it returns a positive errno value; in particular,</font></i>
<a name='L1262'>1262 <i><font color='green'> * ENXIO indicates that there is not ARP table entry for 'ip' on 'netdev'. */</font></i>
<a name='L1263'>1263 <b>int</b>
<a name='L1264'>1264 <a href='../R/3564.html' title='Multiple refered from 2 places.'>netdev_arp_lookup</a>(<b>const</b> <b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>,
<a name='L1265'>1265                   <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/3874.html' title='Multiple used in 230 places.'>ip</a>, <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> <a href='../Y/4297.html' title='Multiple used in 196 places.'>mac</a>[<a href='../S/860.html#L42' title='Defined at 42 in cbench/openflow/lib/packets.h.'>ETH_ADDR_LEN</a>])
<a name='L1266'>1266 <font color='red'>{</font>
<a name='L1267'>1267     <b>struct</b> arpreq <a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>;
<a name='L1268'>1268     <b>struct</b> <a href='../Y/6896.html' title='Multiple used in 27 places.'>sockaddr_in</a> *<a href='../Y/5590.html' title='Multiple used in 22 places.'>pa</a>;
<a name='L1269'>1269     <b>int</b> <a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a>;
<a name='L1270'>1270 
<a name='L1271'>1271     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>, 0, <b>sizeof</b> <a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>);
<a name='L1272'>1272     <a href='../Y/5590.html' title='Multiple used in 22 places.'>pa</a> = (<b>struct</b> <a href='../Y/6896.html' title='Multiple used in 27 places.'>sockaddr_in</a> *) &amp;<a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>.arp_pa;
<a name='L1273'>1273     <a href='../Y/5590.html' title='Multiple used in 22 places.'>pa</a>-&gt;<a href='../Y/6790.html' title='Multiple used in 13 places.'>sin_family</a> = <a href='../Y/18.html' title='Multiple used in 29 places.'>AF_INET</a>;
<a name='L1274'>1274     <a href='../Y/5590.html' title='Multiple used in 22 places.'>pa</a>-&gt;<a href='../Y/6789.html' title='Multiple used in 20 places.'>sin_addr</a>.<a href='../Y/6559.html' title='Multiple used in 125 places.'>s_addr</a> = <a href='../Y/3874.html' title='Multiple used in 230 places.'>ip</a>;
<a name='L1275'>1275     <a href='../Y/5590.html' title='Multiple used in 22 places.'>pa</a>-&gt;<a href='../Y/6792.html' title='Multiple used in 18 places.'>sin_port</a> = 0;
<a name='L1276'>1276     <a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>.<a href='../Y/1480.html' title='Multiple used in 2 places.'>arp_ha</a>.<a href='../Y/6567.html' title='Multiple used in 4 places.'>sa_family</a> = <a href='../S/399.html#L40' title='Defined at 40 in cbench/openflow/utilities/wireshark_dissectors/wireshark-1.0.0-includes/epan/arptypes.h.'>ARPHRD_ETHER</a>;
<a name='L1277'>1277     <a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>.arp_flags = 0;
<a name='L1278'>1278     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>.arp_dev, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>.arp_dev);
<a name='L1279'>1279     <a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a> = <a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a>, SIOCGARP, &amp;<a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>) &lt; 0 ? <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> : 0;
<a name='L1280'>1280     <b>if</b> (!<a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a>) <font color='red'>{</font>
<a name='L1281'>1281         <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/4297.html' title='Multiple used in 196 places.'>mac</a>, <a href='../Y/6224.html' title='Multiple used in 137 places.'>r</a>.<a href='../Y/1480.html' title='Multiple used in 2 places.'>arp_ha</a>.<a href='../Y/6566.html' title='Multiple used in 5 places.'>sa_data</a>, <a href='../S/860.html#L42' title='Defined at 42 in cbench/openflow/lib/packets.h.'>ETH_ADDR_LEN</a>);
<a name='L1282'>1282     <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a> != ENXIO) <font color='red'>{</font>
<a name='L1283'>1283         <a href='../S/859.html#L171' title='Defined at 171 in cbench/openflow/lib/vlog.h.'>VLOG_WARN_RL</a>(&amp;<a href='../Y/6448.html' title='Multiple used in 214 places.'>rl</a>, "%s: could not look up ARP entry for "<a href='../S/860.html#L180' title='Defined at 180 in cbench/openflow/lib/packets.h.'>IP_FMT</a>": %s",
<a name='L1284'>1284                      <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../S/860.html#L181' title='Defined at 181 in cbench/openflow/lib/packets.h.'>IP_ARGS</a>(&amp;<a href='../Y/3874.html' title='Multiple used in 230 places.'>ip</a>), <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a>));
<a name='L1285'>1285     <font color='red'>}</font>
<a name='L1286'>1286     <b>return</b> <a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a>;
<a name='L1287'>1287 <font color='red'>}</font>
<a name='L1288'>1288 
<a name='L1289'>1289 <i><font color='green'>/* Initializes 'svec' with a list of the names of all known network devices. */</font></i>
<a name='L1290'>1290 <b>void</b>
<a name='L1291'>1291 <a href='../S/814.html#L103' title='Refered from 103 in cbench/openflow/lib/netdev.h.'>netdev_enumerate</a>(<b>struct</b> <a href='../Y/7171.html' title='Multiple used in 51 places.'>svec</a> *<a href='../Y/7171.html' title='Multiple used in 51 places.'>svec</a>)
<a name='L1292'>1292 <font color='red'>{</font>
<a name='L1293'>1293     <b>struct</b> <a href='../Y/3727.html' title='Multiple used in 2 places.'>if_nameindex</a> *<a href='../Y/4644.html' title='Multiple used in 45 places.'>names</a>;
<a name='L1294'>1294 
<a name='L1295'>1295     <a href='../S/911.html#L47' title='Defined at 47 in cbench/openflow/lib/svec.c.'>svec_init</a>(<a href='../S/839.html#L40' title='Defined at 40 in cbench/openflow/lib/svec.h.'>svec</a>);
<a name='L1296'>1296     <a href='../Y/4644.html' title='Multiple used in 45 places.'>names</a> = <a href='../Y/3727.html' title='Multiple used in 2 places.'>if_nameindex</a>();
<a name='L1297'>1297     <b>if</b> (<a href='../Y/4644.html' title='Multiple used in 45 places.'>names</a>) <font color='red'>{</font>
<a name='L1298'>1298         <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L1299'>1299 
<a name='L1300'>1300         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> = 0; <a href='../Y/4644.html' title='Multiple used in 45 places.'>names</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>].<a href='../Y/3726.html' title='Multiple used in 6 places.'>if_name</a> != <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L1301'>1301             <a href='../S/911.html#L73' title='Defined at 73 in cbench/openflow/lib/svec.c.'>svec_add</a>(<a href='../S/839.html#L40' title='Defined at 40 in cbench/openflow/lib/svec.h.'>svec</a>, <a href='../Y/4644.html' title='Multiple used in 45 places.'>names</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>].<a href='../Y/3726.html' title='Multiple used in 6 places.'>if_name</a>);
<a name='L1302'>1302         <font color='red'>}</font>
<a name='L1303'>1303         if_freenameindex(<a href='../Y/4644.html' title='Multiple used in 45 places.'>names</a>);
<a name='L1304'>1304     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1305'>1305         <a href='../S/859.html#L151' title='Defined at 151 in cbench/openflow/lib/vlog.h.'>VLOG_WARN</a>("could not obtain list of network device names: %s",
<a name='L1306'>1306                   <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L1307'>1307     <font color='red'>}</font>
<a name='L1308'>1308 <font color='red'>}</font>
<a name='L1309'>1309 
<a name='L1310'>1310 <i><font color='green'>/* Obtains the current flags for the network device named 'netdev_name' and</font></i>
<a name='L1311'>1311 <i><font color='green'> * stores them into '*flagsp'.  Returns 0 if successful, otherwise a positive</font></i>
<a name='L1312'>1312 <i><font color='green'> * errno value.</font></i>
<a name='L1313'>1313 <i><font color='green'> *</font></i>
<a name='L1314'>1314 <i><font color='green'> * If only device flags are needed, this is more efficient than calling</font></i>
<a name='L1315'>1315 <i><font color='green'> * netdev_open(), netdev_get_flags(), netdev_close(). */</font></i>
<a name='L1316'>1316 <b>int</b>
<a name='L1317'>1317 <a href='../R/3585.html' title='Multiple refered from 3 places.'>netdev_nodev_get_flags</a>(<b>const</b> <b>char</b> *<a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, <b>enum</b> <a href='../Y/4713.html' title='Multiple used in 13 places.'>netdev_flags</a> *<a href='../Y/3122.html' title='Multiple used in 8 places.'>flagsp</a>)
<a name='L1318'>1318 <font color='red'>{</font>
<a name='L1319'>1319     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>;
<a name='L1320'>1320 
<a name='L1321'>1321     <a href='../S/851.html#L1511' title='Defined at 1511 in cbench/openflow/lib/netdev.c.'>init_netdev</a>();
<a name='L1322'>1322 
<a name='L1323'>1323     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/851.html#L1566' title='Defined at 1566 in cbench/openflow/lib/netdev.c.'>get_flags</a>(<a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, &amp;<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>);
<a name='L1324'>1324     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L1325'>1325         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1326'>1326     <font color='red'>}</font>
<a name='L1327'>1327 
<a name='L1328'>1328     *<a href='../Y/3122.html' title='Multiple used in 8 places.'>flagsp</a> = 0;
<a name='L1329'>1329     <b>if</b> (<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> &amp; <a href='../Y/450.html' title='Multiple used in 6 places.'>IFF_UP</a>) <font color='red'>{</font>
<a name='L1330'>1330         *<a href='../Y/3122.html' title='Multiple used in 8 places.'>flagsp</a> |= <a href='../S/814.html#L60' title='Defined at 60 in cbench/openflow/lib/netdev.h.'>NETDEV_UP</a>;
<a name='L1331'>1331     <font color='red'>}</font>
<a name='L1332'>1332     <b>if</b> (<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> &amp; <a href='../Y/448.html' title='Multiple used in 3 places.'>IFF_PROMISC</a>) <font color='red'>{</font>
<a name='L1333'>1333         *<a href='../Y/3122.html' title='Multiple used in 8 places.'>flagsp</a> |= <a href='../S/814.html#L61' title='Defined at 61 in cbench/openflow/lib/netdev.h.'>NETDEV_PROMISC</a>;
<a name='L1334'>1334     <font color='red'>}</font>
<a name='L1335'>1335     <b>if</b> (<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> &amp; <a href='../S/851.html#L92' title='Defined at 92 in cbench/openflow/lib/netdev.c.'>IFF_LOWER_UP</a>) <font color='red'>{</font>
<a name='L1336'>1336         *<a href='../Y/3122.html' title='Multiple used in 8 places.'>flagsp</a> |= <a href='../S/814.html#L62' title='Defined at 62 in cbench/openflow/lib/netdev.h.'>NETDEV_CARRIER</a>;
<a name='L1337'>1337     <font color='red'>}</font>
<a name='L1338'>1338     <b>return</b> 0;
<a name='L1339'>1339 <font color='red'>}</font>
<a name='L1340'>1340 
<a name='L1341'>1341 <b>struct</b> <a href='../R/3578.html' title='Multiple refered from 3 places.'>netdev_monitor</a> <font color='red'>{</font>
<a name='L1342'>1342     <b>struct</b> <a href='../S/826.html#L69' title='Defined at 69 in cbench/openflow/lib/netlink.c.'>nl_sock</a> *<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>;
<a name='L1343'>1343     <b>struct</b> <a href='../S/839.html#L40' title='Defined at 40 in cbench/openflow/lib/svec.h.'>svec</a> <a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>;
<a name='L1344'>1344     <b>struct</b> <a href='../S/839.html#L40' title='Defined at 40 in cbench/openflow/lib/svec.h.'>svec</a> <a href='../Y/1853.html' title='Multiple used in 16 places.'>changed</a>;
<a name='L1345'>1345 <font color='red'>}</font>;
<a name='L1346'>1346 
<a name='L1347'>1347 <i><font color='green'>/* Policy for RTNLGRP_LINK messages.</font></i>
<a name='L1348'>1348 <i><font color='green'> *</font></i>
<a name='L1349'>1349 <i><font color='green'> * There are *many* more fields in these messages, but currently we only care</font></i>
<a name='L1350'>1350 <i><font color='green'> * about interface names. */</font></i>
<a name='L1351'>1351 <b>static</b> <b>const</b> <b>struct</b> <a href='../S/892.html#L129' title='Defined at 129 in cbench/openflow/lib/netlink.h.'>nl_policy</a> <a href='../Y/6494.html' title='Multiple used in 4 places.'>rtnlgrp_link_policy</a>[] = <font color='red'>{</font>
<a name='L1352'>1352     [<a href='../Y/451.html' title='Multiple used in 2 places.'>IFLA_IFNAME</a>] = <font color='red'>{</font> .<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../Y/589.html' title='Multiple used in 5 places.'>NL_A_STRING</a>, .<a href='../Y/5505.html' title='Multiple used in 6 places.'>optional</a> = <a href='../Y/2997.html' title='Multiple used in 198 places.'>false</a> <font color='red'>}</font>,
<a name='L1353'>1353 <font color='red'>}</font>;
<a name='L1354'>1354 
<a name='L1355'>1355 <b>static</b> <b>const</b> <b>char</b> *<a href='../S/851.html#L1479' title='Defined at 1479 in cbench/openflow/lib/netdev.c.'>lookup_netdev</a>(<b>const</b> <b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *, <b>const</b> <b>char</b> *);
<a name='L1356'>1356 <b>static</b> <b>const</b> <b>char</b> *<a href='../S/851.html#L1486' title='Defined at 1486 in cbench/openflow/lib/netdev.c.'>pop_changed</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *);
<a name='L1357'>1357 <b>static</b> <b>const</b> <b>char</b> *<a href='../S/851.html#L1499' title='Defined at 1499 in cbench/openflow/lib/netdev.c.'>all_netdevs_changed</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *);
<a name='L1358'>1358 
<a name='L1359'>1359 <i><font color='green'>/* Creates a new network device monitor that initially monitors no</font></i>
<a name='L1360'>1360 <i><font color='green'> * devices.  On success, sets '*monp' to the new network monitor and returns</font></i>
<a name='L1361'>1361 <i><font color='green'> * 0; on failure, sets '*monp' to a null pointer and returns a positive errno</font></i>
<a name='L1362'>1362 <i><font color='green'> * value. */</font></i>
<a name='L1363'>1363 <b>int</b>
<a name='L1364'>1364 <a href='../R/3579.html' title='Multiple refered from 2 places.'>netdev_monitor_create</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> **<a href='../Y/4501.html' title='Multiple used in 3 places.'>monp</a>)
<a name='L1365'>1365 <font color='red'>{</font>
<a name='L1366'>1366     <b>struct</b> <a href='../S/851.html#L1341' title='Defined at 1341 in cbench/openflow/lib/netdev.c.'>netdev_monitor</a> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>;
<a name='L1367'>1367     <b>struct</b> <a href='../S/826.html#L69' title='Defined at 69 in cbench/openflow/lib/netlink.c.'>nl_sock</a> *<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>;
<a name='L1368'>1368     <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1369'>1369 
<a name='L1370'>1370     *<a href='../Y/4501.html' title='Multiple used in 3 places.'>monp</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1371'>1371     <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../S/826.html#L100' title='Defined at 100 in cbench/openflow/lib/netlink.c.'>nl_sock_create</a>(NETLINK_ROUTE, RTNLGRP_LINK, 0, 0, &amp;<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>);
<a name='L1372'>1372     <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>) <font color='red'>{</font>
<a name='L1373'>1373         <i><font color='green'>/* XXX Fall back to polling?  Non-root is not allowed to subscribe to</font></i>
<a name='L1374'>1374 <i><font color='green'>         * multicast groups but can still poll network device state. */</font></i>
<a name='L1375'>1375         <a href='../S/859.html#L151' title='Defined at 151 in cbench/openflow/lib/vlog.h.'>VLOG_WARN</a>("could not create rtnetlink socket: %s", <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>));
<a name='L1376'>1376         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1377'>1377     <font color='red'>}</font>
<a name='L1378'>1378 
<a name='L1379'>1379     <a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a> = *<a href='../Y/4501.html' title='Multiple used in 3 places.'>monp</a> = <a href='../D/10153.html' title='Multiple defined in 2 places.'>xmalloc</a>(<b>sizeof</b> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>);
<a name='L1380'>1380     <a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a> = <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>;
<a name='L1381'>1381     <a href='../S/911.html#L47' title='Defined at 47 in cbench/openflow/lib/svec.c.'>svec_init</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>);
<a name='L1382'>1382     <a href='../S/911.html#L47' title='Defined at 47 in cbench/openflow/lib/svec.c.'>svec_init</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/1853.html' title='Multiple used in 16 places.'>changed</a>);
<a name='L1383'>1383     <b>return</b> 0;
<a name='L1384'>1384 <font color='red'>}</font>
<a name='L1385'>1385 
<a name='L1386'>1386 <b>void</b>
<a name='L1387'>1387 <a href='../S/814.html#L114' title='Refered from 114 in cbench/openflow/lib/netdev.h.'>netdev_monitor_destroy</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>)
<a name='L1388'>1388 <font color='red'>{</font>
<a name='L1389'>1389     <b>if</b> (<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>) <font color='red'>{</font>
<a name='L1390'>1390         <a href='../S/826.html#L204' title='Defined at 204 in cbench/openflow/lib/netlink.c.'>nl_sock_destroy</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>);
<a name='L1391'>1391         <a href='../S/911.html#L55' title='Defined at 55 in cbench/openflow/lib/svec.c.'>svec_destroy</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>);
<a name='L1392'>1392         <a href='../S/911.html#L55' title='Defined at 55 in cbench/openflow/lib/svec.c.'>svec_destroy</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/1853.html' title='Multiple used in 16 places.'>changed</a>);
<a name='L1393'>1393         <a href='../Y/3233.html' title='Multiple used in 336 places.'>free</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>);
<a name='L1394'>1394     <font color='red'>}</font>
<a name='L1395'>1395 <font color='red'>}</font>
<a name='L1396'>1396 
<a name='L1397'>1397 <i><font color='green'>/* Sets the set of network devices monitored by 'mon' to the 'n_netdevs'</font></i>
<a name='L1398'>1398 <i><font color='green'> * network devices named in 'netdevs'.  The caller retains ownership of</font></i>
<a name='L1399'>1399 <i><font color='green'> * 'netdevs'. */</font></i>
<a name='L1400'>1400 <b>void</b>
<a name='L1401'>1401 <a href='../R/3583.html' title='Multiple refered from 2 places.'>netdev_monitor_set_devices</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>,
<a name='L1402'>1402                            <b>char</b> **<a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>, <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/4604.html' title='Multiple used in 2 places.'>n_netdevs</a>)
<a name='L1403'>1403 <font color='red'>{</font>
<a name='L1404'>1404     <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L1405'>1405 
<a name='L1406'>1406     <a href='../S/911.html#L62' title='Defined at 62 in cbench/openflow/lib/svec.c.'>svec_clear</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>);
<a name='L1407'>1407     <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> = 0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> &lt; <a href='../Y/4604.html' title='Multiple used in 2 places.'>n_netdevs</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L1408'>1408         <a href='../S/911.html#L73' title='Defined at 73 in cbench/openflow/lib/svec.c.'>svec_add</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>, <a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>]);
<a name='L1409'>1409     <font color='red'>}</font>
<a name='L1410'>1410     <a href='../S/911.html#L119' title='Defined at 119 in cbench/openflow/lib/svec.c.'>svec_sort</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>);
<a name='L1411'>1411 <font color='red'>}</font>
<a name='L1412'>1412 
<a name='L1413'>1413 <i><font color='green'>/* If the state of any network device has changed, returns its name.  The</font></i>
<a name='L1414'>1414 <i><font color='green'> * caller must not modify or free the name.</font></i>
<a name='L1415'>1415 <i><font color='green'> *</font></i>
<a name='L1416'>1416 <i><font color='green'> * This function can return "false positives".  The caller is responsible for</font></i>
<a name='L1417'>1417 <i><font color='green'> * verifying that the network device's state actually changed, if necessary.</font></i>
<a name='L1418'>1418 <i><font color='green'> *</font></i>
<a name='L1419'>1419 <i><font color='green'> * If no network device's state has changed, returns a null pointer. */</font></i>
<a name='L1420'>1420 <b>const</b> <b>char</b> *
<a name='L1421'>1421 <a href='../R/3581.html' title='Multiple refered from 2 places.'>netdev_monitor_poll</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>)
<a name='L1422'>1422 <font color='red'>{</font>
<a name='L1423'>1423     <b>static</b> <b>struct</b> <a href='../D/10099.html' title='Multiple defined in 2 places.'>vlog_rate_limit</a> <a href='../Y/6842.html' title='Multiple used in 4 places.'>slow_rl</a> = <a href='../S/859.html#L107' title='Defined at 107 in cbench/openflow/lib/vlog.h.'>VLOG_RATE_LIMIT_INIT</a>(1, 5);
<a name='L1424'>1424     <b>const</b> <b>char</b> *<a href='../Y/1855.html' title='Multiple used in 4 places.'>changed_name</a>;
<a name='L1425'>1425 
<a name='L1426'>1426     <a href='../Y/1855.html' title='Multiple used in 4 places.'>changed_name</a> = <a href='../S/851.html#L1486' title='Defined at 1486 in cbench/openflow/lib/netdev.c.'>pop_changed</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>);
<a name='L1427'>1427     <b>if</b> (<a href='../Y/1855.html' title='Multiple used in 4 places.'>changed_name</a>) <font color='red'>{</font>
<a name='L1428'>1428         <b>return</b> <a href='../Y/1855.html' title='Multiple used in 4 places.'>changed_name</a>;
<a name='L1429'>1429     <font color='red'>}</font>
<a name='L1430'>1430 
<a name='L1431'>1431     <b>for</b> (;;) <font color='red'>{</font>
<a name='L1432'>1432         <b>struct</b> <a href='../S/865.html#L41' title='Defined at 41 in cbench/openflow/lib/ofpbuf.h.'>ofpbuf</a> *<a href='../Y/1693.html' title='Multiple used in 469 places.'>buf</a>;
<a name='L1433'>1433         <b>int</b> <a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a>;
<a name='L1434'>1434 
<a name='L1435'>1435         <a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a> = <a href='../S/826.html#L272' title='Defined at 272 in cbench/openflow/lib/netlink.c.'>nl_sock_recv</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, &amp;<a href='../Y/1693.html' title='Multiple used in 469 places.'>buf</a>, <a href='../Y/2997.html' title='Multiple used in 198 places.'>false</a>);
<a name='L1436'>1436         <b>if</b> (<a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a> == <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>) <font color='red'>{</font>
<a name='L1437'>1437             <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1438'>1438         <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a> == <a href='../Y/273.html' title='Multiple used in 24 places.'>ENOBUFS</a>) <font color='red'>{</font>
<a name='L1439'>1439             <a href='../S/859.html#L171' title='Defined at 171 in cbench/openflow/lib/vlog.h.'>VLOG_WARN_RL</a>(&amp;<a href='../Y/6842.html' title='Multiple used in 4 places.'>slow_rl</a>, "network monitor socket overflowed");
<a name='L1440'>1440             <b>return</b> <a href='../S/851.html#L1499' title='Defined at 1499 in cbench/openflow/lib/netdev.c.'>all_netdevs_changed</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>);
<a name='L1441'>1441         <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a>) <font color='red'>{</font>
<a name='L1442'>1442             <a href='../S/859.html#L171' title='Defined at 171 in cbench/openflow/lib/vlog.h.'>VLOG_WARN_RL</a>(&amp;<a href='../Y/6842.html' title='Multiple used in 4 places.'>slow_rl</a>, "error on network monitor socket: %s",
<a name='L1443'>1443                          <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a>));
<a name='L1444'>1444             <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1445'>1445         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1446'>1446             <b>struct</b> <a href='../S/867.html#L108' title='Defined at 108 in cbench/openflow/lib/netlink-protocol.h.'>nlattr</a> *<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/840.html#L69' title='Defined at 69 in cbench/openflow/lib/util.h.'>ARRAY_SIZE</a>(<a href='../Y/6494.html' title='Multiple used in 4 places.'>rtnlgrp_link_policy</a>)];
<a name='L1447'>1447             <b>const</b> <b>char</b> *<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>;
<a name='L1448'>1448 
<a name='L1449'>1449             <b>if</b> (!<a href='../S/826.html#L772' title='Defined at 772 in cbench/openflow/lib/netlink.c.'>nl_policy_parse</a>(<a href='../Y/1693.html' title='Multiple used in 469 places.'>buf</a>, <a href='../S/867.html#L86' title='Defined at 86 in cbench/openflow/lib/netlink-protocol.h.'>NLMSG_HDRLEN</a> + <b>sizeof</b>(<b>struct</b> ifinfomsg),
<a name='L1450'>1450                                  <a href='../Y/6494.html' title='Multiple used in 4 places.'>rtnlgrp_link_policy</a>,
<a name='L1451'>1451                                  <a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>, <a href='../S/840.html#L69' title='Defined at 69 in cbench/openflow/lib/util.h.'>ARRAY_SIZE</a>(<a href='../Y/6494.html' title='Multiple used in 4 places.'>rtnlgrp_link_policy</a>))) <font color='red'>{</font>
<a name='L1452'>1452                 <a href='../S/859.html#L171' title='Defined at 171 in cbench/openflow/lib/vlog.h.'>VLOG_WARN_RL</a>(&amp;<a href='../Y/6842.html' title='Multiple used in 4 places.'>slow_rl</a>, "received bad rtnl message");
<a name='L1453'>1453                 <b>return</b> <a href='../S/851.html#L1499' title='Defined at 1499 in cbench/openflow/lib/netdev.c.'>all_netdevs_changed</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>);
<a name='L1454'>1454             <font color='red'>}</font>
<a name='L1455'>1455             <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a> = <a href='../S/851.html#L1479' title='Defined at 1479 in cbench/openflow/lib/netdev.c.'>lookup_netdev</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>, <a href='../S/826.html#L745' title='Defined at 745 in cbench/openflow/lib/netlink.c.'>nl_attr_get_string</a>(<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../Y/451.html' title='Multiple used in 2 places.'>IFLA_IFNAME</a>]));
<a name='L1456'>1456             <a href='../S/887.html#L110' title='Defined at 110 in cbench/openflow/lib/ofpbuf.c.'>ofpbuf_delete</a>(<a href='../Y/1693.html' title='Multiple used in 469 places.'>buf</a>);
<a name='L1457'>1457             <b>if</b> (<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>) <font color='red'>{</font>
<a name='L1458'>1458                 <i><font color='green'>/* Return the looked-up string instead of the attribute string,</font></i>
<a name='L1459'>1459 <i><font color='green'>                 * because we freed the buffer that contains the attribute. */</font></i>
<a name='L1460'>1460                 <b>return</b> <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>;
<a name='L1461'>1461             <font color='red'>}</font>
<a name='L1462'>1462         <font color='red'>}</font>
<a name='L1463'>1463     <font color='red'>}</font>
<a name='L1464'>1464 <font color='red'>}</font>
<a name='L1465'>1465 
<a name='L1466'>1466 <b>void</b>
<a name='L1467'>1467 <a href='../R/3582.html' title='Multiple refered from 2 places.'>netdev_monitor_run</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a> <a href='../D/5808.html' title='Multiple defined in 5 places.'>UNUSED</a>)
<a name='L1468'>1468 <font color='red'>{</font>
<a name='L1469'>1469     <i><font color='green'>/* Nothing to do in this implementation. */</font></i>
<a name='L1470'>1470 <font color='red'>}</font>
<a name='L1471'>1471 
<a name='L1472'>1472 <b>void</b>
<a name='L1473'>1473 <a href='../R/3584.html' title='Multiple refered from 2 places.'>netdev_monitor_wait</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>)
<a name='L1474'>1474 <font color='red'>{</font>
<a name='L1475'>1475     <a href='../S/826.html#L432' title='Defined at 432 in cbench/openflow/lib/netlink.c.'>nl_sock_wait</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/688.html' title='Multiple used in 21 places.'>POLLIN</a>);
<a name='L1476'>1476 <font color='red'>}</font>
<a name='L1477'>1477 
<a name='L1478'>1478 <b>static</b> <b>const</b> <b>char</b> *
<a name='L1479'>1479 <a href='../R/3432.html' title='Multiple refered from 3 places.'>lookup_netdev</a>(<b>const</b> <b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>, <b>const</b> <b>char</b> *<a href='../Y/4631.html' title='Multiple used in 221 places.'>name</a>)
<a name='L1480'>1480 <font color='red'>{</font>
<a name='L1481'>1481     <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/3716.html' title='Multiple used in 200 places.'>idx</a> = <a href='../S/911.html#L209' title='Defined at 209 in cbench/openflow/lib/svec.c.'>svec_find</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>, <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L1482'>1482     <b>return</b> <a href='../Y/3716.html' title='Multiple used in 200 places.'>idx</a> != <a href='../Y/823.html' title='Multiple used in 53 places.'>SIZE_MAX</a> ? <a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>.<a href='../Y/4644.html' title='Multiple used in 45 places.'>names</a>[<a href='../Y/3716.html' title='Multiple used in 200 places.'>idx</a>] : <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1483'>1483 <font color='red'>}</font>
<a name='L1484'>1484 
<a name='L1485'>1485 <b>static</b> <b>const</b> <b>char</b> *
<a name='L1486'>1486 <a href='../R/4059.html' title='Multiple refered from 3 places.'>pop_changed</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>)
<a name='L1487'>1487 <font color='red'>{</font>
<a name='L1488'>1488     <b>while</b> (<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/1853.html' title='Multiple used in 16 places.'>changed</a>.<a href='../Y/4560.html' title='Multiple used in 375 places.'>n</a>) <font color='red'>{</font>
<a name='L1489'>1489         <b>const</b> <b>char</b> *<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a> = <a href='../S/851.html#L1479' title='Defined at 1479 in cbench/openflow/lib/netdev.c.'>lookup_netdev</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>, <a href='../S/911.html#L351' title='Defined at 351 in cbench/openflow/lib/svec.c.'>svec_back</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/1853.html' title='Multiple used in 16 places.'>changed</a>));
<a name='L1490'>1490         <a href='../S/911.html#L358' title='Defined at 358 in cbench/openflow/lib/svec.c.'>svec_pop_back</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/1853.html' title='Multiple used in 16 places.'>changed</a>);
<a name='L1491'>1491         <b>if</b> (<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>) <font color='red'>{</font>
<a name='L1492'>1492             <b>return</b> <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>;
<a name='L1493'>1493         <font color='red'>}</font>
<a name='L1494'>1494     <font color='red'>}</font>
<a name='L1495'>1495     <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1496'>1496 <font color='red'>}</font>
<a name='L1497'>1497 
<a name='L1498'>1498 <b>static</b> <b>const</b> <b>char</b> *
<a name='L1499'>1499 <a href='../R/2180.html' title='Multiple refered from 3 places.'>all_netdevs_changed</a>(<b>struct</b> <a href='../Y/4715.html' title='Multiple used in 18 places.'>netdev_monitor</a> *<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>)
<a name='L1500'>1500 <font color='red'>{</font>
<a name='L1501'>1501     <a href='../S/911.html#L62' title='Defined at 62 in cbench/openflow/lib/svec.c.'>svec_clear</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/1853.html' title='Multiple used in 16 places.'>changed</a>);
<a name='L1502'>1502     <a href='../S/911.html#L95' title='Defined at 95 in cbench/openflow/lib/svec.c.'>svec_append</a>(&amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/1853.html' title='Multiple used in 16 places.'>changed</a>, &amp;<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>-&gt;<a href='../Y/4720.html' title='Multiple used in 15 places.'>netdevs</a>);
<a name='L1503'>1503     <b>return</b> <a href='../S/851.html#L1486' title='Defined at 1486 in cbench/openflow/lib/netdev.c.'>pop_changed</a>(<a href='../Y/4497.html' title='Multiple used in 41 places.'>mon</a>);
<a name='L1504'>1504 <font color='red'>}</font>
<a name='L1505'>1505 
<a name='L1506'>1506 <b>static</b> <b>void</b> <a href='../S/851.html#L1557' title='Defined at 1557 in cbench/openflow/lib/netdev.c.'>restore_all_flags</a>(<b>void</b> *<a href='../Y/1539.html' title='Multiple used in 86 places.'>aux</a>);
<a name='L1507'>1507 
<a name='L1508'>1508 <i><font color='green'>/* Set up a signal hook to restore network device flags on program</font></i>
<a name='L1509'>1509 <i><font color='green'> * termination.  */</font></i>
<a name='L1510'>1510 <b>static</b> <b>void</b>
<a name='L1511'>1511 <a href='../R/3294.html' title='Multiple refered from 3 places.'>init_netdev</a>(<b>void</b>)
<a name='L1512'>1512 <font color='red'>{</font>
<a name='L1513'>1513     <b>static</b> <a href='../Y/1645.html' title='Multiple used in 313 places.'>bool</a> <a href='../Y/3825.html' title='Multiple used in 22 places.'>inited</a>;
<a name='L1514'>1514     <b>if</b> (!<a href='../Y/3825.html' title='Multiple used in 22 places.'>inited</a>) <font color='red'>{</font>
<a name='L1515'>1515         <a href='../Y/3825.html' title='Multiple used in 22 places.'>inited</a> = <a href='../Y/7480.html' title='Multiple used in 168 places.'>true</a>;
<a name='L1516'>1516         <a href='../S/891.html#L78' title='Defined at 78 in cbench/openflow/lib/fatal-signal.c.'>fatal_signal_add_hook</a>(<a href='../S/851.html#L1557' title='Defined at 1557 in cbench/openflow/lib/netdev.c.'>restore_all_flags</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>, <a href='../Y/7480.html' title='Multiple used in 168 places.'>true</a>);
<a name='L1517'>1517         <a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a> = <a href='../Y/6901.html' title='Multiple used in 21 places.'>socket</a>(<a href='../Y/18.html' title='Multiple used in 29 places.'>AF_INET</a>, <a href='../Y/828.html' title='Multiple used in 6 places.'>SOCK_DGRAM</a>, 0);
<a name='L1518'>1518         <b>if</b> (<a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a> &lt; 0) <font color='red'>{</font>
<a name='L1519'>1519             <a href='../S/878.html#L153' title='Defined at 153 in cbench/openflow/lib/util.c.'>ofp_fatal</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>, "socket(AF_INET)");
<a name='L1520'>1520         <font color='red'>}</font>
<a name='L1521'>1521     <font color='red'>}</font>
<a name='L1522'>1522 <font color='red'>}</font>
<a name='L1523'>1523 
<a name='L1524'>1524 <i><font color='green'>/* Restore the network device flags on 'netdev' to those that were active</font></i>
<a name='L1525'>1525 <i><font color='green'> * before we changed them.  Returns 0 if successful, otherwise a positive</font></i>
<a name='L1526'>1526 <i><font color='green'> * errno value.</font></i>
<a name='L1527'>1527 <i><font color='green'> *</font></i>
<a name='L1528'>1528 <i><font color='green'> * To avoid reentry, the caller must ensure that fatal signals are blocked. */</font></i>
<a name='L1529'>1529 <b>static</b> <b>int</b>
<a name='L1530'>1530 <a href='../R/4378.html' title='Multiple refered from 8 places.'>restore_flags</a>(<b>struct</b> <a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a> *<a href='../Y/4709.html' title='Multiple used in 79 places.'>netdev</a>)
<a name='L1531'>1531 <font color='red'>{</font>
<a name='L1532'>1532     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L1533'>1533     <b>int</b> <a href='../S/851.html#L1530' title='Defined at 1530 in cbench/openflow/lib/netdev.c.'>restore_flags</a>;
<a name='L1534'>1534 
<a name='L1535'>1535     <i><font color='green'>/* Get current flags. */</font></i>
<a name='L1536'>1536     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L1537'>1537     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>, <a href='../Y/812.html' title='Multiple used in 2 places.'>SIOCGIFFLAGS</a>, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L1538'>1538         <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L1539'>1539     <font color='red'>}</font>
<a name='L1540'>1540 
<a name='L1541'>1541     <i><font color='green'>/* Restore flags that we might have changed, if necessary. */</font></i>
<a name='L1542'>1542     <a href='../S/851.html#L1530' title='Defined at 1530 in cbench/openflow/lib/netdev.c.'>restore_flags</a> = <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/1854.html' title='Multiple used in 4 places.'>changed_flags</a> &amp; (<a href='../Y/448.html' title='Multiple used in 3 places.'>IFF_PROMISC</a> | <a href='../Y/450.html' title='Multiple used in 6 places.'>IFF_UP</a>);
<a name='L1543'>1543     <b>if</b> ((<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3743.html' title='Multiple used in 6 places.'>ifr_flags</a> ^ <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6587.html' title='Multiple used in 4 places.'>save_flags</a>) &amp; <a href='../S/851.html#L1530' title='Defined at 1530 in cbench/openflow/lib/netdev.c.'>restore_flags</a>) <font color='red'>{</font>
<a name='L1544'>1544         <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3743.html' title='Multiple used in 6 places.'>ifr_flags</a> &amp;= ~<a href='../S/851.html#L1530' title='Defined at 1530 in cbench/openflow/lib/netdev.c.'>restore_flags</a>;
<a name='L1545'>1545         <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3743.html' title='Multiple used in 6 places.'>ifr_flags</a> |= <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/6587.html' title='Multiple used in 4 places.'>save_flags</a> &amp; <a href='../S/851.html#L1530' title='Defined at 1530 in cbench/openflow/lib/netdev.c.'>restore_flags</a>;
<a name='L1546'>1546         <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../Y/4712.html' title='Multiple used in 23 places.'>netdev_fd</a>, <a href='../Y/819.html' title='Multiple used in 2 places.'>SIOCSIFFLAGS</a>, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L1547'>1547             <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L1548'>1548         <font color='red'>}</font>
<a name='L1549'>1549     <font color='red'>}</font>
<a name='L1550'>1550 
<a name='L1551'>1551     <b>return</b> 0;
<a name='L1552'>1552 <font color='red'>}</font>
<a name='L1553'>1553 
<a name='L1554'>1554 <i><font color='green'>/* Retores all the flags on all network devices that we modified.  Called from</font></i>
<a name='L1555'>1555 <i><font color='green'> * a signal handler, so it does not attempt to report error conditions. */</font></i>
<a name='L1556'>1556 <b>static</b> <b>void</b>
<a name='L1557'>1557 <a href='../R/4377.html' title='Multiple refered from 2 places.'>restore_all_flags</a>(<b>void</b> *<a href='../Y/1539.html' title='Multiple used in 86 places.'>aux</a> <a href='../D/5808.html' title='Multiple defined in 5 places.'>UNUSED</a>)
<a name='L1558'>1558 <font color='red'>{</font>
<a name='L1559'>1559     <b>struct</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a> *<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>;
<a name='L1560'>1560     <a href='../S/916.html#L73' title='Defined at 73 in cbench/openflow/lib/list.h.'>LIST_FOR_EACH</a> (<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>, <b>struct</b> <a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>, <a href='../Y/4917.html' title='Multiple used in 268 places.'>node</a>, &amp;<a href='../Y/4714.html' title='Multiple used in 3 places.'>netdev_list</a>) <font color='red'>{</font>
<a name='L1561'>1561         <a href='../S/851.html#L1530' title='Defined at 1530 in cbench/openflow/lib/netdev.c.'>restore_flags</a>(<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>);
<a name='L1562'>1562     <font color='red'>}</font>
<a name='L1563'>1563 <font color='red'>}</font>
<a name='L1564'>1564 
<a name='L1565'>1565 <b>static</b> <b>int</b>
<a name='L1566'>1566 <a href='../R/3161.html' title='Multiple refered from 4 places.'>get_flags</a>(<b>const</b> <b>char</b> *<a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, <b>int</b> *<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>)
<a name='L1567'>1567 <font color='red'>{</font>
<a name='L1568'>1568     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L1569'>1569     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L1570'>1570     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a>, <a href='../Y/812.html' title='Multiple used in 2 places.'>SIOCGIFFLAGS</a>, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L1571'>1571         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("ioctl(SIOCGIFFLAGS) on %s device failed: %s",
<a name='L1572'>1572                  <a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L1573'>1573         <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L1574'>1574     <font color='red'>}</font>
<a name='L1575'>1575     *<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3743.html' title='Multiple used in 6 places.'>ifr_flags</a>;
<a name='L1576'>1576     <b>return</b> 0;
<a name='L1577'>1577 <font color='red'>}</font>
<a name='L1578'>1578 
<a name='L1579'>1579 <b>static</b> <b>int</b>
<a name='L1580'>1580 <a href='../R/4428.html' title='Multiple refered from 2 places.'>set_flags</a>(<b>const</b> <b>char</b> *<a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, <b>int</b> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>)
<a name='L1581'>1581 <font color='red'>{</font>
<a name='L1582'>1582     <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>;
<a name='L1583'>1583     <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>, <a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, <b>sizeof</b> <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3748.html' title='Multiple used in 16 places.'>ifr_name</a>);
<a name='L1584'>1584     <a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>.<a href='../Y/3743.html' title='Multiple used in 6 places.'>ifr_flags</a> = <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>;
<a name='L1585'>1585     <b>if</b> (<a href='../Y/3867.html' title='Multiple used in 34 places.'>ioctl</a>(<a href='../Y/1348.html' title='Multiple used in 10 places.'>af_inet_sock</a>, <a href='../Y/819.html' title='Multiple used in 2 places.'>SIOCSIFFLAGS</a>, &amp;<a href='../Y/3740.html' title='Multiple used in 71 places.'>ifr</a>) &lt; 0) <font color='red'>{</font>
<a name='L1586'>1586         <a href='../S/859.html#L150' title='Defined at 150 in cbench/openflow/lib/vlog.h.'>VLOG_ERR</a>("ioctl(SIOCSIFFLAGS) on %s device failed: %s",
<a name='L1587'>1587                  <a href='../Y/4716.html' title='Multiple used in 32 places.'>netdev_name</a>, <a href='../Y/7090.html' title='Multiple used in 143 places.'>strerror</a>(<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>));
<a name='L1588'>1588         <b>return</b> <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a>;
<a name='L1589'>1589     <font color='red'>}</font>
<a name='L1590'>1590     <b>return</b> 0;
<a name='L1591'>1591 <font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L151'>[^]</a><a href='#L1580'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
