<html>
<head>
<title>southbound/src/southbound.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/1177.html'>southbound</a>/<a href='../files/1178.html'>src</a>/southbound.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L57'>[^]</a><a href='#L884'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L57' title='Defined at 57.'>init_ds_queue</a>
<li><a href='#L68' title='Defined at 68.'>ds_push_back</a>
<li><a href='#L85' title='Defined at 85.'>ds_pop_front</a>
<li><a href='#L102' title='Defined at 102.'>ds_get_qsize</a>
<li><a href='#L119' title='Defined at 119.'>ds_msg_proc</a>
<li><a href='#L163' title='Defined at 163.'>init_queue</a>
<li><a href='#L174' title='Defined at 174.'>push_back</a>
<li><a href='#L191' title='Defined at 191.'>pop_front</a>
<li><a href='#L208' title='Defined at 208.'>get_qsize</a>
<li><a href='#L222' title='Defined at 222.'>msg_proc</a>
<li><a href='#L260' title='Defined at 260.'>init_epoll</a>
<li><a href='#L278' title='Defined at 278.'>link_epoll</a>
<li><a href='#L299' title='Defined at 299.'>relink_epoll</a>
<li><a href='#L329' title='Defined at 329.'>ds_recv_cb_register</a>
<li><a href='#L338' title='Defined at 338.'>do_ds_tasks</a>
<li><a href='#L411' title='Defined at 411.'>init_ds_workers</a>
<li><a href='#L445' title='Defined at 445.'>recv_cb_register</a>
<li><a href='#L454' title='Defined at 454.'>do_tasks</a>
<li><a href='#L525' title='Defined at 525.'>init_workers</a>
<li><a href='#L550' title='Defined at 550.'>nonblocking_mode</a>
<li><a href='#L576' title='Defined at 576.'>init_socket</a>
<li><a href='#L628' title='Defined at 628.'>ds_socket_listen</a>
<li><a href='#L661' title='Defined at 661.'>socket_listen</a>
<li><a href='#L765' title='Defined at 765.'>init_sb</a>
<li><a href='#L798' title='Defined at 798.'>cleanup_sb</a>
<li><a href='#L838' title='Defined at 838.'>sigint_handler</a>
<li><a href='#L851' title='Defined at 851.'>sigkill_handler</a>
<li><a href='#L864' title='Defined at 864.'>sigterm_handler</a>
<li><a href='#L876' title='Defined at 876.'>print_usage</a>
<li><a href='#L884' title='Defined at 884.'>main</a>
</ol>
<hr>
<pre>
<a name='L1'>   1 <i><font color='green'>/*</font></i>
<a name='L2'>   2 <i><font color='green'> * Copyright 2015-2018 NSSLab, KAIST</font></i>
<a name='L3'>   3 <i><font color='green'> */</font></i>
<a name='L4'>   4 
<a name='L5'>   5 <i><font color='green'>/**</font></i>
<a name='L6'>   6 <i><font color='green'> * \ingroup extensions</font></i>
<a name='L7'>   7 <i><font color='green'> * @{</font></i>
<a name='L8'>   8 <i><font color='green'> * \defgroup southbound External Packet I/O Engine</font></i>
<a name='L9'>   9 <i><font color='green'> * \brief Packet I/O engine located outside of the Barista NOS</font></i>
<a name='L10'>  10 <i><font color='green'> * @{</font></i>
<a name='L11'>  11 <i><font color='green'> */</font></i>
<a name='L12'>  12 
<a name='L13'>  13 <i><font color='green'>/**</font></i>
<a name='L14'>  14 <i><font color='green'> * \file</font></i>
<a name='L15'>  15 <i><font color='green'> * \author Jaehyun Nam &lt;namjh@kaist.ac.kr&gt;</font></i>
<a name='L16'>  16 <i><font color='green'> */</font></i>
<a name='L17'>  17 
<a name='L18'>  18 <font color='darkred'>#include</font> "<a href='950.html'>southbound.h</a>"
<a name='L19'>  19 
<a name='L20'>  20 <i><font color='green'>/////////////////////////////////////////////////////////////////////</font></i>
<a name='L21'>  21 
<a name='L22'>  22 <i><font color='green'>/** \brief The running flag for external packet I/O engine */</font></i>
<a name='L23'>  23 <b>int</b> <a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a>;
<a name='L24'>  24 
<a name='L25'>  25 <i><font color='green'>/////////////////////////////////////////////////////////////////////</font></i>
<a name='L26'>  26 
<a name='L27'>  27 <i><font color='green'>/** \brief Socket mapping table (network socket -&gt; domain socket) */</font></i>
<a name='L28'>  28 <b>int</b> <a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../D/6484.html' title='Multiple defined in 6 places.'>__DEFAULT_TABLE_SIZE</a>];
<a name='L29'>  29 
<a name='L30'>  30 <i><font color='green'>/** \brief Socket mapping table (domain socket -&gt; network socket) */</font></i>
<a name='L31'>  31 <b>int</b> <a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../D/6484.html' title='Multiple defined in 6 places.'>__DEFAULT_TABLE_SIZE</a>];
<a name='L32'>  32 
<a name='L33'>  33 <i><font color='green'>// socket queue handling part (domain socket) ///////////////////////</font></i>
<a name='L34'>  34 
<a name='L35'>  35 <i><font color='green'>/** \brief The size of a domain socket queue */</font></i>
<a name='L36'>  36 <font color='darkred'>#define</font> <a href='../R/396.html' title='Multiple refered from 3 places.'>DS_MAXQLEN</a> 1024
<a name='L37'>  37 
<a name='L38'>  38 <i><font color='green'>/** \brief The pointer of the first entry in a domain socket queue */</font></i>
<a name='L39'>  39 <font color='darkred'>#define</font> <a href='../R/394.html' title='Multiple refered from 3 places.'>DS_FIRST</a> &amp;<a href='../Y/2572.html' title='Multiple used in 4 places.'>ds_queue</a>[0]
<a name='L40'>  40 
<a name='L41'>  41 <i><font color='green'>/** \brief The pointer of the last entry in a domain socket queue */</font></i>
<a name='L42'>  42 <font color='darkred'>#define</font> <a href='../R/395.html' title='Multiple refered from 2 places.'>DS_LAST</a>  &amp;<a href='../Y/2572.html' title='Multiple used in 4 places.'>ds_queue</a>[<a href='../S/952.html#L36' title='Defined at 36 in southbound/src/southbound.c.'>DS_MAXQLEN</a> - 1]
<a name='L43'>  43 
<a name='L44'>  44 <i><font color='green'>/** \brief Domain socket queue */</font></i>
<a name='L45'>  45 <b>int</b> <a href='../Y/2572.html' title='Multiple used in 4 places.'>ds_queue</a>[<a href='../S/952.html#L36' title='Defined at 36 in southbound/src/southbound.c.'>DS_MAXQLEN</a>];
<a name='L46'>  46 
<a name='L47'>  47 <i><font color='green'>/** \brief The head and tail pointers of a domain socket queue */</font></i>
<a name='L48'>  48 <b>int</b> *<a href='../Y/2566.html' title='Multiple used in 5 places.'>ds_head</a>, *<a href='../Y/2578.html' title='Multiple used in 5 places.'>ds_tail</a>;
<a name='L49'>  49 
<a name='L50'>  50 <i><font color='green'>/** \brief The number of entries in a domain socket queue */</font></i>
<a name='L51'>  51 <b>int</b> <a href='../Y/2577.html' title='Multiple used in 7 places.'>ds_size</a> = 0;
<a name='L52'>  52 
<a name='L53'>  53 <i><font color='green'>/**</font></i>
<a name='L54'>  54 <i><font color='green'> * \brief Function to initialize a domain socket queue</font></i>
<a name='L55'>  55 <i><font color='green'> * \return None</font></i>
<a name='L56'>  56 <i><font color='green'> */</font></i>
<a name='L57'>  57 <b>void</b> <a href='../S/952.html#L413' title='Refered from 413 in southbound/src/southbound.c.'>init_ds_queue</a>(<b>void</b>)
<a name='L58'>  58 <font color='red'>{</font>
<a name='L59'>  59     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/2572.html' title='Multiple used in 4 places.'>ds_queue</a>, 0, <b>sizeof</b>(<b>int</b>) * <a href='../S/952.html#L36' title='Defined at 36 in southbound/src/southbound.c.'>DS_MAXQLEN</a>);
<a name='L60'>  60     <a href='../Y/2566.html' title='Multiple used in 5 places.'>ds_head</a> = <a href='../Y/2578.html' title='Multiple used in 5 places.'>ds_tail</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L61'>  61     <a href='../Y/2577.html' title='Multiple used in 7 places.'>ds_size</a> = 0;
<a name='L62'>  62 <font color='red'>}</font>
<a name='L63'>  63 
<a name='L64'>  64 <i><font color='green'>/**</font></i>
<a name='L65'>  65 <i><font color='green'> * \brief Function to push a domain socket into a domain socket queue</font></i>
<a name='L66'>  66 <i><font color='green'> * \param v Domain socket</font></i>
<a name='L67'>  67 <i><font color='green'> */</font></i>
<a name='L68'>  68 <b>void</b> <a href='../R/2841.html' title='Multiple refered from 2 places.'>ds_push_back</a>(<b>int</b> <a href='../Y/7702.html' title='Multiple used in 153 places.'>v</a>)
<a name='L69'>  69 <font color='red'>{</font>
<a name='L70'>  70     <b>if</b> (<a href='../Y/2577.html' title='Multiple used in 7 places.'>ds_size</a> == 0) <font color='red'>{</font>
<a name='L71'>  71         <a href='../Y/2566.html' title='Multiple used in 5 places.'>ds_head</a> = <a href='../Y/2578.html' title='Multiple used in 5 places.'>ds_tail</a> = <a href='../S/952.html#L39' title='Defined at 39 in southbound/src/southbound.c.'>DS_FIRST</a>;
<a name='L72'>  72     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L73'>  73         <a href='../Y/2578.html' title='Multiple used in 5 places.'>ds_tail</a> = (<a href='../S/952.html#L42' title='Defined at 42 in southbound/src/southbound.c.'>DS_LAST</a> - <a href='../Y/2578.html' title='Multiple used in 5 places.'>ds_tail</a> &gt; 0) ? <a href='../Y/2578.html' title='Multiple used in 5 places.'>ds_tail</a> + 1 : <a href='../S/952.html#L39' title='Defined at 39 in southbound/src/southbound.c.'>DS_FIRST</a>;
<a name='L74'>  74     <font color='red'>}</font>
<a name='L75'>  75 
<a name='L76'>  76     *<a href='../Y/2578.html' title='Multiple used in 5 places.'>ds_tail</a> = <a href='../Y/7702.html' title='Multiple used in 153 places.'>v</a>;
<a name='L77'>  77 
<a name='L78'>  78     <a href='../Y/2577.html' title='Multiple used in 7 places.'>ds_size</a>++;
<a name='L79'>  79 <font color='red'>}</font>
<a name='L80'>  80 
<a name='L81'>  81 <i><font color='green'>/**</font></i>
<a name='L82'>  82 <i><font color='green'> * \brief Function to pop a domain socket from a domain socket queue</font></i>
<a name='L83'>  83 <i><font color='green'> * \return Domain socket</font></i>
<a name='L84'>  84 <i><font color='green'> */</font></i>
<a name='L85'>  85 <b>int</b> <a href='../S/952.html#L354' title='Refered from 354 in southbound/src/southbound.c.'>ds_pop_front</a>(<b>void</b>)
<a name='L86'>  86 <font color='red'>{</font>
<a name='L87'>  87     <b>int</b> <a href='../Y/6432.html' title='Multiple used in 271 places.'>ret</a> = -1;
<a name='L88'>  88 
<a name='L89'>  89     <b>if</b> (<a href='../Y/2577.html' title='Multiple used in 7 places.'>ds_size</a> &gt; 0) <font color='red'>{</font>
<a name='L90'>  90         <a href='../Y/6432.html' title='Multiple used in 271 places.'>ret</a> = *<a href='../Y/2566.html' title='Multiple used in 5 places.'>ds_head</a>;
<a name='L91'>  91         <a href='../Y/2566.html' title='Multiple used in 5 places.'>ds_head</a> = (<a href='../S/952.html#L42' title='Defined at 42 in southbound/src/southbound.c.'>DS_LAST</a> - <a href='../Y/2566.html' title='Multiple used in 5 places.'>ds_head</a> &gt; 0) ? <a href='../Y/2566.html' title='Multiple used in 5 places.'>ds_head</a> + 1 : <a href='../S/952.html#L39' title='Defined at 39 in southbound/src/southbound.c.'>DS_FIRST</a>;
<a name='L92'>  92         <a href='../Y/2577.html' title='Multiple used in 7 places.'>ds_size</a>--;
<a name='L93'>  93     <font color='red'>}</font>
<a name='L94'>  94 
<a name='L95'>  95     <b>return</b> <a href='../Y/6432.html' title='Multiple used in 271 places.'>ret</a>;
<a name='L96'>  96 <font color='red'>}</font>
<a name='L97'>  97 
<a name='L98'>  98 <i><font color='green'>/**</font></i>
<a name='L99'>  99 <i><font color='green'> * \brief Function to get the number of domain sockets in a domain socket queue</font></i>
<a name='L100'> 100 <i><font color='green'> * \return The number of domain sockets in a domain socket queue</font></i>
<a name='L101'> 101 <i><font color='green'> */</font></i>
<a name='L102'> 102 <b>int</b> <a href='../S/952.html#L399' title='Refered from 399 in southbound/src/southbound.c.'>ds_get_qsize</a>(<b>void</b>)
<a name='L103'> 103 <font color='red'>{</font>
<a name='L104'> 104     <b>return</b> <a href='../Y/2577.html' title='Multiple used in 7 places.'>ds_size</a>;
<a name='L105'> 105 <font color='red'>}</font>
<a name='L106'> 106 
<a name='L107'> 107 <i><font color='green'>// message handling part (domain socket) ////////////////////////////</font></i>
<a name='L108'> 108 
<a name='L109'> 109 <i><font color='green'>/** \brief The size of a recv buffer */</font></i>
<a name='L110'> 110 <font color='darkred'>#define</font> <a href='../R/155.html' title='Multiple refered from 9 places.'>BUFFER_SIZE</a> 8192
<a name='L111'> 111 
<a name='L112'> 112 <i><font color='green'>/**</font></i>
<a name='L113'> 113 <i><font color='green'> * \brief Function to handle incoming messages from domain sockets (to southbound)</font></i>
<a name='L114'> 114 <i><font color='green'> * \param sock Domain socket</font></i>
<a name='L115'> 115 <i><font color='green'> * \param rx_buf Input buffer</font></i>
<a name='L116'> 116 <i><font color='green'> * \param bytes The size of the input buffer</font></i>
<a name='L117'> 117 <i><font color='green'> * \return The size of remaining bytes in the buffer</font></i>
<a name='L118'> 118 <i><font color='green'> */</font></i>
<a name='L119'> 119 <b>int</b> <a href='../S/952.html#L774' title='Refered from 774 in southbound/src/southbound.c.'>ds_msg_proc</a>(<b>int</b> <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> *<a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>, <b>int</b> <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>)
<a name='L120'> 120 <font color='red'>{</font>
<a name='L121'> 121     <b>int</b> <a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a> = <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>;
<a name='L122'> 122     <b>int</b> <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 0;
<a name='L123'> 123 
<a name='L124'> 124     <b>while</b> (<a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a> &gt; 0) <font color='red'>{</font>
<a name='L125'> 125         <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> = <a href='../Y/7898.html' title='Multiple used in 44 places.'>write</a>(<a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>], <a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a> + <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a>, <a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a>);
<a name='L126'> 126         <b>if</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> &lt; 0 &amp;&amp; <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>) <font color='red'>{</font>
<a name='L127'> 127             <b>break</b>;
<a name='L128'> 128         <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> &lt; 0) <font color='red'>{</font>
<a name='L129'> 129             <b>continue</b>;
<a name='L130'> 130         <font color='red'>}</font>
<a name='L131'> 131 
<a name='L132'> 132         <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> += <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>;
<a name='L133'> 133         <a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a> -= <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>;
<a name='L134'> 134     <font color='red'>}</font>
<a name='L135'> 135 
<a name='L136'> 136     <b>return</b> <a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a>;
<a name='L137'> 137 <font color='red'>}</font>
<a name='L138'> 138 
<a name='L139'> 139 <i><font color='green'>// socket queue handling part (network socket) //////////////////////</font></i>
<a name='L140'> 140 
<a name='L141'> 141 <i><font color='green'>/** \brief The size of a network socket queue */</font></i>
<a name='L142'> 142 <font color='darkred'>#define</font> <a href='../R/866.html' title='Multiple refered from 9 places.'>MAXQLEN</a> 1024
<a name='L143'> 143 
<a name='L144'> 144 <i><font color='green'>/** \brief The pointer of the first entry in a network socket queue */</font></i>
<a name='L145'> 145 <font color='darkred'>#define</font> <a href='../R/598.html' title='Multiple refered from 9 places.'>FIRST</a> &amp;<a href='../Y/6203.html' title='Multiple used in 30 places.'>queue</a>[0]
<a name='L146'> 146 
<a name='L147'> 147 <i><font color='green'>/** \brief The pointer of the last entry in a network socket queue */</font></i>
<a name='L148'> 148 <font color='darkred'>#define</font> <a href='../R/753.html' title='Multiple refered from 6 places.'>LAST</a>  &amp;<a href='../Y/6203.html' title='Multiple used in 30 places.'>queue</a>[<a href='../D/2533.html' title='Multiple defined in 3 places.'>MAXQLEN</a> - 1]
<a name='L149'> 149 
<a name='L150'> 150 <i><font color='green'>/** \brief Network socket queue */</font></i>
<a name='L151'> 151 <b>int</b> <a href='../Y/6203.html' title='Multiple used in 30 places.'>queue</a>[<a href='../D/2533.html' title='Multiple defined in 3 places.'>MAXQLEN</a>];
<a name='L152'> 152 
<a name='L153'> 153 <i><font color='green'>/** \brief The head and tail pointers of a network socket queue */</font></i>
<a name='L154'> 154 <b>int</b> *<a href='../Y/3592.html' title='Multiple used in 341 places.'>head</a>, *<a href='../Y/7239.html' title='Multiple used in 214 places.'>tail</a>;
<a name='L155'> 155 
<a name='L156'> 156 <i><font color='green'>/** \brief The number of entries in a network socket queue */</font></i>
<a name='L157'> 157 <b>int</b> <a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a> = 0;
<a name='L158'> 158 
<a name='L159'> 159 <i><font color='green'>/**</font></i>
<a name='L160'> 160 <i><font color='green'> * \brief Function to initialize a network socket queue</font></i>
<a name='L161'> 161 <i><font color='green'> * \return None</font></i>
<a name='L162'> 162 <i><font color='green'> */</font></i>
<a name='L163'> 163 <b>void</b> <a href='../R/3296.html' title='Multiple refered from 3 places.'>init_queue</a>(<b>void</b>)
<a name='L164'> 164 <font color='red'>{</font>
<a name='L165'> 165     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/6203.html' title='Multiple used in 30 places.'>queue</a>, 0, <b>sizeof</b>(<b>int</b>) * <a href='../D/2533.html' title='Multiple defined in 3 places.'>MAXQLEN</a>);
<a name='L166'> 166     <a href='../Y/3592.html' title='Multiple used in 341 places.'>head</a> = <a href='../Y/7239.html' title='Multiple used in 214 places.'>tail</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L167'> 167     <a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a> = 0;
<a name='L168'> 168 <font color='red'>}</font>
<a name='L169'> 169 
<a name='L170'> 170 <i><font color='green'>/**</font></i>
<a name='L171'> 171 <i><font color='green'> * \brief Function to push a network socket into a network socket queue</font></i>
<a name='L172'> 172 <i><font color='green'> * \param v Network socket</font></i>
<a name='L173'> 173 <i><font color='green'> */</font></i>
<a name='L174'> 174 <b>void</b> <a href='../R/4205.html' title='Multiple refered from 6 places.'>push_back</a>(<b>int</b> <a href='../Y/7702.html' title='Multiple used in 153 places.'>v</a>)
<a name='L175'> 175 <font color='red'>{</font>
<a name='L176'> 176     <b>if</b> (<a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a> == 0) <font color='red'>{</font>
<a name='L177'> 177         <a href='../Y/3592.html' title='Multiple used in 341 places.'>head</a> = <a href='../Y/7239.html' title='Multiple used in 214 places.'>tail</a> = <a href='../D/1804.html' title='Multiple defined in 3 places.'>FIRST</a>;
<a name='L178'> 178     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L179'> 179         <a href='../Y/7239.html' title='Multiple used in 214 places.'>tail</a> = (<a href='../D/2311.html' title='Multiple defined in 3 places.'>LAST</a> - <a href='../Y/7239.html' title='Multiple used in 214 places.'>tail</a> &gt; 0) ? <a href='../Y/7239.html' title='Multiple used in 214 places.'>tail</a> + 1 : <a href='../D/1804.html' title='Multiple defined in 3 places.'>FIRST</a>;
<a name='L180'> 180     <font color='red'>}</font>
<a name='L181'> 181 
<a name='L182'> 182     *<a href='../Y/7239.html' title='Multiple used in 214 places.'>tail</a> = <a href='../Y/7702.html' title='Multiple used in 153 places.'>v</a>;
<a name='L183'> 183 
<a name='L184'> 184     <a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a>++;
<a name='L185'> 185 <font color='red'>}</font>
<a name='L186'> 186 
<a name='L187'> 187 <i><font color='green'>/**</font></i>
<a name='L188'> 188 <i><font color='green'> * \brief Function to pop a network socket from a network socket queue</font></i>
<a name='L189'> 189 <i><font color='green'> * \return Network socket</font></i>
<a name='L190'> 190 <i><font color='green'> */</font></i>
<a name='L191'> 191 <b>int</b> <a href='../R/4060.html' title='Multiple refered from 3 places.'>pop_front</a>(<b>void</b>)
<a name='L192'> 192 <font color='red'>{</font>
<a name='L193'> 193     <b>int</b> <a href='../Y/6432.html' title='Multiple used in 271 places.'>ret</a> = -1;
<a name='L194'> 194 
<a name='L195'> 195     <b>if</b> (<a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a> &gt; 0) <font color='red'>{</font>
<a name='L196'> 196         <a href='../Y/6432.html' title='Multiple used in 271 places.'>ret</a> = *<a href='../Y/3592.html' title='Multiple used in 341 places.'>head</a>;
<a name='L197'> 197         <a href='../Y/3592.html' title='Multiple used in 341 places.'>head</a> = (<a href='../D/2311.html' title='Multiple defined in 3 places.'>LAST</a> - <a href='../Y/3592.html' title='Multiple used in 341 places.'>head</a> &gt; 0) ? <a href='../Y/3592.html' title='Multiple used in 341 places.'>head</a> + 1 : <a href='../D/1804.html' title='Multiple defined in 3 places.'>FIRST</a>;
<a name='L198'> 198         <a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a>--;
<a name='L199'> 199     <font color='red'>}</font>
<a name='L200'> 200 
<a name='L201'> 201     <b>return</b> <a href='../Y/6432.html' title='Multiple used in 271 places.'>ret</a>;
<a name='L202'> 202 <font color='red'>}</font>
<a name='L203'> 203 
<a name='L204'> 204 <i><font color='green'>/**</font></i>
<a name='L205'> 205 <i><font color='green'> * \brief Function to get the number of network sockets in a network socket queue</font></i>
<a name='L206'> 206 <i><font color='green'> * \return The number of network sockets in a network socket queue</font></i>
<a name='L207'> 207 <i><font color='green'> */</font></i>
<a name='L208'> 208 <b>int</b> <a href='../R/3184.html' title='Multiple refered from 3 places.'>get_qsize</a>(<b>void</b>)
<a name='L209'> 209 <font color='red'>{</font>
<a name='L210'> 210     <b>return</b> <a href='../Y/6799.html' title='Multiple used in 476 places.'>size</a>;
<a name='L211'> 211 <font color='red'>}</font>
<a name='L212'> 212 
<a name='L213'> 213 <i><font color='green'>// message handling part (network socket) ///////////////////////////</font></i>
<a name='L214'> 214 
<a name='L215'> 215 <i><font color='green'>/**</font></i>
<a name='L216'> 216 <i><font color='green'> * \brief Function to handle incoming messages from network sockets (to core)</font></i>
<a name='L217'> 217 <i><font color='green'> * \param sock Network socket</font></i>
<a name='L218'> 218 <i><font color='green'> * \param rx_buf Input buffer</font></i>
<a name='L219'> 219 <i><font color='green'> * \param bytes The size of the input buffer</font></i>
<a name='L220'> 220 <i><font color='green'> * \return The size of remaining bytes in the buffer</font></i>
<a name='L221'> 221 <i><font color='green'> */</font></i>
<a name='L222'> 222 <b>int</b> <a href='../R/3529.html' title='Multiple refered from 3 places.'>msg_proc</a>(<b>int</b> <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> *<a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>, <b>int</b> <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>)
<a name='L223'> 223 <font color='red'>{</font>
<a name='L224'> 224     <b>int</b> <a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a> = <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>;
<a name='L225'> 225     <b>int</b> <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 0;
<a name='L226'> 226 
<a name='L227'> 227     <b>while</b> (<a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a> &gt; 0) <font color='red'>{</font>
<a name='L228'> 228         <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> = <a href='../Y/7898.html' title='Multiple used in 44 places.'>write</a>(<a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>], <a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a> + <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a>, <a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a>);
<a name='L229'> 229         <b>if</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> &lt; 0 &amp;&amp; <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>) <font color='red'>{</font>
<a name='L230'> 230             <b>break</b>;
<a name='L231'> 231         <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> &lt; 0) <font color='red'>{</font>
<a name='L232'> 232             <b>continue</b>;
<a name='L233'> 233         <font color='red'>}</font>
<a name='L234'> 234 
<a name='L235'> 235         <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> += <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>;
<a name='L236'> 236         <a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a> -= <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>;
<a name='L237'> 237     <font color='red'>}</font>
<a name='L238'> 238 
<a name='L239'> 239     <b>return</b> <a href='../Y/6366.html' title='Multiple used in 18 places.'>remain</a>;
<a name='L240'> 240 <font color='red'>}</font>
<a name='L241'> 241 
<a name='L242'> 242 <i><font color='green'>// epoll handling part //////////////////////////////////////////////</font></i>
<a name='L243'> 243 
<a name='L244'> 244 <i><font color='green'>/** \brief The maximum number of events */</font></i>
<a name='L245'> 245 <font color='darkred'>#define</font> <a href='../R/864.html' title='Multiple refered from 10 places.'>MAXEVENTS</a> 1024
<a name='L246'> 246 
<a name='L247'> 247 <i><font color='green'>/** \brief Epolls for domain and network sockets */</font></i>
<a name='L248'> 248 <b>int</b> <a href='../Y/2563.html' title='Multiple used in 6 places.'>ds_epoll</a>, <a href='../Y/2727.html' title='Multiple used in 23 places.'>epoll</a>;
<a name='L249'> 249 
<a name='L250'> 250 <i><font color='green'>/** \brief Event list for domain sockets */</font></i>
<a name='L251'> 251 <b>struct</b> <a href='../Y/2731.html' title='Multiple used in 15 places.'>epoll_event</a> <a href='../Y/2564.html' title='Multiple used in 3 places.'>ds_events</a>[<a href='../D/2531.html' title='Multiple defined in 3 places.'>MAXEVENTS</a>];
<a name='L252'> 252 
<a name='L253'> 253 <i><font color='green'>/** \brief Event list for network sockets */</font></i>
<a name='L254'> 254 <b>struct</b> <a href='../Y/2731.html' title='Multiple used in 15 places.'>epoll_event</a> <a href='../Y/2905.html' title='Multiple used in 91 places.'>events</a>[<a href='../D/2531.html' title='Multiple defined in 3 places.'>MAXEVENTS</a>];
<a name='L255'> 255 
<a name='L256'> 256 <i><font color='green'>/**</font></i>
<a name='L257'> 257 <i><font color='green'> * \brief Function to create an epoll</font></i>
<a name='L258'> 258 <i><font color='green'> * \return New epoll</font></i>
<a name='L259'> 259 <i><font color='green'> */</font></i>
<a name='L260'> 260 <b>int</b> <a href='../R/3293.html' title='Multiple refered from 4 places.'>init_epoll</a>(<b>void</b>)
<a name='L261'> 261 <font color='red'>{</font>
<a name='L262'> 262     <b>int</b> <a href='../Y/2726.html' title='Multiple used in 15 places.'>epol</a>;
<a name='L263'> 263 
<a name='L264'> 264     <b>if</b> ((<a href='../Y/2726.html' title='Multiple used in 15 places.'>epol</a> = <a href='../Y/2729.html' title='Multiple used in 3 places.'>epoll_create1</a>(0)) &lt; 0) <font color='red'>{</font>
<a name='L265'> 265         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("epoll_create1");
<a name='L266'> 266         <b>return</b> -1;
<a name='L267'> 267     <font color='red'>}</font>
<a name='L268'> 268 
<a name='L269'> 269     <b>return</b> <a href='../Y/2726.html' title='Multiple used in 15 places.'>epol</a>;
<a name='L270'> 270 <font color='red'>}</font>
<a name='L271'> 271 
<a name='L272'> 272 <i><font color='green'>/**</font></i>
<a name='L273'> 273 <i><font color='green'> * \brief Function to add a new socket into an epoll</font></i>
<a name='L274'> 274 <i><font color='green'> * \param epol Epoll</font></i>
<a name='L275'> 275 <i><font color='green'> * \param fd Socket</font></i>
<a name='L276'> 276 <i><font color='green'> * \param flags Epoll flags</font></i>
<a name='L277'> 277 <i><font color='green'> */</font></i>
<a name='L278'> 278 <b>int</b> <a href='../R/3367.html' title='Multiple refered from 7 places.'>link_epoll</a>(<b>int</b> <a href='../Y/2726.html' title='Multiple used in 15 places.'>epol</a>, <b>int</b> <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>, <b>int</b> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>)
<a name='L279'> 279 <font color='red'>{</font>
<a name='L280'> 280     <b>struct</b> <a href='../Y/2731.html' title='Multiple used in 15 places.'>epoll_event</a> <a href='../Y/2899.html' title='Multiple used in 92 places.'>event</a>;
<a name='L281'> 281 
<a name='L282'> 282     <a href='../Y/2899.html' title='Multiple used in 92 places.'>event</a>.<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>.<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a> = <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>;
<a name='L283'> 283     <a href='../Y/2899.html' title='Multiple used in 92 places.'>event</a>.<a href='../Y/2905.html' title='Multiple used in 91 places.'>events</a> = <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>;
<a name='L284'> 284 
<a name='L285'> 285     <b>if</b> (<a href='../Y/2730.html' title='Multiple used in 8 places.'>epoll_ctl</a>(<a href='../Y/2726.html' title='Multiple used in 15 places.'>epol</a>, <a href='../Y/289.html' title='Multiple used in 5 places.'>EPOLL_CTL_ADD</a>, <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>, &amp;<a href='../Y/2899.html' title='Multiple used in 92 places.'>event</a>) &lt; 0) <font color='red'>{</font>
<a name='L286'> 286         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("epoll_ctl");
<a name='L287'> 287         <b>return</b> -1;
<a name='L288'> 288     <font color='red'>}</font>
<a name='L289'> 289 
<a name='L290'> 290     <b>return</b> 0;
<a name='L291'> 291 <font color='red'>}</font>
<a name='L292'> 292 
<a name='L293'> 293 <i><font color='green'>/**</font></i>
<a name='L294'> 294 <i><font color='green'> * \brief Function to add a used socket into an epoll</font></i>
<a name='L295'> 295 <i><font color='green'> * \param epol Epoll</font></i>
<a name='L296'> 296 <i><font color='green'> * \param fd Socket</font></i>
<a name='L297'> 297 <i><font color='green'> * \param flags Epoll flags</font></i>
<a name='L298'> 298 <i><font color='green'> */</font></i>
<a name='L299'> 299 <b>int</b> <a href='../R/4354.html' title='Multiple refered from 4 places.'>relink_epoll</a>(<b>int</b> <a href='../Y/2726.html' title='Multiple used in 15 places.'>epol</a>, <b>int</b> <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>, <b>int</b> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>)
<a name='L300'> 300 <font color='red'>{</font>
<a name='L301'> 301     <b>struct</b> <a href='../Y/2731.html' title='Multiple used in 15 places.'>epoll_event</a> <a href='../Y/2899.html' title='Multiple used in 92 places.'>event</a>;
<a name='L302'> 302 
<a name='L303'> 303     <a href='../Y/2899.html' title='Multiple used in 92 places.'>event</a>.<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>.<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a> = <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>;
<a name='L304'> 304     <a href='../Y/2899.html' title='Multiple used in 92 places.'>event</a>.<a href='../Y/2905.html' title='Multiple used in 91 places.'>events</a> = <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>;
<a name='L305'> 305 
<a name='L306'> 306     <a href='../Y/2730.html' title='Multiple used in 8 places.'>epoll_ctl</a>(<a href='../Y/2726.html' title='Multiple used in 15 places.'>epol</a>, <a href='../Y/290.html' title='Multiple used in 3 places.'>EPOLL_CTL_MOD</a>, <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>, &amp;<a href='../Y/2899.html' title='Multiple used in 92 places.'>event</a>);
<a name='L307'> 307 
<a name='L308'> 308     <b>return</b> 0;
<a name='L309'> 309 <font color='red'>}</font>
<a name='L310'> 310 
<a name='L311'> 311 <i><font color='green'>// worker thread handling part (domain socket) //////////////////////</font></i>
<a name='L312'> 312 
<a name='L313'> 313 <i><font color='green'>/** \brief The callback definition for domain sockets */</font></i>
<a name='L314'> 314 <b>typedef</b> <b>int</b> (*<a href='../Y/2576.html' title='Multiple used in 3 places.'>ds_recv_cb_t</a>)(<b>int</b> <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> *<a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>, <b>int</b> <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>);
<a name='L315'> 315 
<a name='L316'> 316 <i><font color='green'>/** \brief The callback initialization for domain sockets */</font></i>
<a name='L317'> 317 <a href='../Y/2576.html' title='Multiple used in 3 places.'>ds_recv_cb_t</a> <a href='../Y/2575.html' title='Multiple used in 3 places.'>ds_recv_cb</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L318'> 318 
<a name='L319'> 319 <i><font color='green'>/** \brief Mutexlock for workers (domain socket) */</font></i>
<a name='L320'> 320 <a href='../Y/6137.html' title='Multiple used in 7 places.'>pthread_mutex_t</a> <a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>;
<a name='L321'> 321 
<a name='L322'> 322 <i><font color='green'>/** \brief Condition for workers (domain socket) */</font></i>
<a name='L323'> 323 <a href='../Y/6130.html' title='Multiple used in 4 places.'>pthread_cond_t</a> <a href='../Y/2573.html' title='Multiple used in 6 places.'>ds_queue_cond</a>;
<a name='L324'> 324 
<a name='L325'> 325 <i><font color='green'>/**</font></i>
<a name='L326'> 326 <i><font color='green'> * \brief Function to register a callback function for domain sockets</font></i>
<a name='L327'> 327 <i><font color='green'> * \param cb The callback function for domain sockets</font></i>
<a name='L328'> 328 <i><font color='green'> */</font></i>
<a name='L329'> 329 <b>void</b> <a href='../S/952.html#L774' title='Refered from 774 in southbound/src/southbound.c.'>ds_recv_cb_register</a>(<a href='../Y/2576.html' title='Multiple used in 3 places.'>ds_recv_cb_t</a> <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>)
<a name='L330'> 330 <font color='red'>{</font>
<a name='L331'> 331     <a href='../Y/2575.html' title='Multiple used in 3 places.'>ds_recv_cb</a> = <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>;
<a name='L332'> 332 <font color='red'>}</font>
<a name='L333'> 333 
<a name='L334'> 334 <i><font color='green'>/**</font></i>
<a name='L335'> 335 <i><font color='green'> * \brief Function to handle messages from domain sockets</font></i>
<a name='L336'> 336 <i><font color='green'> * \return NULL</font></i>
<a name='L337'> 337 <i><font color='green'> */</font></i>
<a name='L338'> 338 <b>void</b> *<a href='../S/952.html#L421' title='Refered from 421 in southbound/src/southbound.c.'>do_ds_tasks</a>(<b>void</b> *<a href='../Y/4954.html' title='Multiple used in 18 places.'>null</a>)
<a name='L339'> 339 <font color='red'>{</font>
<a name='L340'> 340     <b>int</b> <a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>, <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>, <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 0;
<a name='L341'> 341     <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> <a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>[<a href='../D/519.html' title='Multiple defined in 5 places.'>BUFFER_SIZE</a>] = <font color='red'>{</font>0<font color='red'>}</font>;
<a name='L342'> 342 
<a name='L343'> 343     <a href='../Y/6136.html' title='Multiple used in 31 places.'>pthread_mutex_lock</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L344'> 344 
<a name='L345'> 345     <b>while</b> (<a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a>) <font color='red'>{</font>
<a name='L346'> 346         <a href='../Y/6131.html' title='Multiple used in 4 places.'>pthread_cond_wait</a>(&amp;<a href='../Y/2573.html' title='Multiple used in 6 places.'>ds_queue_cond</a>, &amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L347'> 347 
<a name='L348'> 348 <a href='../Y/244.html' title='Multiple used in 2 places.'>DS_FETCH_ONE_FD</a>:
<a name='L349'> 349         <b>if</b> (<a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a> == <a href='../D/1780.html' title='Multiple defined in 7 places.'>FALSE</a>) <font color='red'>{</font>
<a name='L350'> 350             <a href='../Y/6138.html' title='Multiple used in 31 places.'>pthread_mutex_unlock</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L351'> 351             <b>break</b>;
<a name='L352'> 352         <font color='red'>}</font>
<a name='L353'> 353 
<a name='L354'> 354         <a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a> = <a href='../S/952.html#L85' title='Defined at 85 in southbound/src/southbound.c.'>ds_pop_front</a>();
<a name='L355'> 355         <b>if</b> (<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a> &lt; 0) <b>continue</b>;
<a name='L356'> 356         <a href='../Y/6138.html' title='Multiple used in 31 places.'>pthread_mutex_unlock</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L357'> 357 
<a name='L358'> 358         <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 0;
<a name='L359'> 359         <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> = 1;
<a name='L360'> 360         <b>while</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> &gt; 0) <font color='red'>{</font>
<a name='L361'> 361             <b>if</b> (<a href='../Y/3013.html' title='Multiple used in 29 places.'>fcntl</a>(<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>, F_GETFD) &lt; 0) <font color='red'>{</font>
<a name='L362'> 362                 <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 1;
<a name='L363'> 363                 <b>break</b>;
<a name='L364'> 364             <font color='red'>}</font>
<a name='L365'> 365             <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> = <a href='../Y/6277.html' title='Multiple used in 17 places.'>read</a>(<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>, <a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>, <a href='../D/519.html' title='Multiple defined in 5 places.'>BUFFER_SIZE</a>);
<a name='L366'> 366             <b>if</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> &lt; 0) <font color='red'>{</font>
<a name='L367'> 367                 <b>if</b> (<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>) <font color='red'>{</font>
<a name='L368'> 368                     <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 1;
<a name='L369'> 369                 <font color='red'>}</font>
<a name='L370'> 370                 <b>break</b>;
<a name='L371'> 371             <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> == 0) <font color='red'>{</font>
<a name='L372'> 372                 <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 1;
<a name='L373'> 373                 <b>break</b>;
<a name='L374'> 374             <font color='red'>}</font>
<a name='L375'> 375 
<a name='L376'> 376             <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> = <a href='../Y/2575.html' title='Multiple used in 3 places.'>ds_recv_cb</a>(<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>, <a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>, <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>);
<a name='L377'> 377         <font color='red'>}</font>
<a name='L378'> 378 
<a name='L379'> 379         <b>if</b> (<a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a>) <font color='red'>{</font>
<a name='L380'> 380             <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>]);
<a name='L381'> 381 
<a name='L382'> 382             <a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>]] = 0;
<a name='L383'> 383             <a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>] = 0;
<a name='L384'> 384 
<a name='L385'> 385             <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>);
<a name='L386'> 386         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L387'> 387             <b>if</b> (<a href='../D/9397.html' title='Multiple defined in 3 places.'>relink_epoll</a>(<a href='../Y/2563.html' title='Multiple used in 6 places.'>ds_epoll</a>, <a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>, <a href='../Y/286.html' title='Multiple used in 15 places.'>EPOLLIN</a> | <a href='../Y/285.html' title='Multiple used in 11 places.'>EPOLLET</a> | <a href='../Y/287.html' title='Multiple used in 8 places.'>EPOLLONESHOT</a>) &lt; 0) <font color='red'>{</font>
<a name='L388'> 388                 <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>]);
<a name='L389'> 389 
<a name='L390'> 390                 <a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>]] = 0;
<a name='L391'> 391                 <a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>] = 0;
<a name='L392'> 392 
<a name='L393'> 393                 <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>);
<a name='L394'> 394             <font color='red'>}</font>
<a name='L395'> 395         <font color='red'>}</font>
<a name='L396'> 396 
<a name='L397'> 397         <a href='../Y/6136.html' title='Multiple used in 31 places.'>pthread_mutex_lock</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L398'> 398 
<a name='L399'> 399         <b>if</b> (<a href='../S/952.html#L102' title='Defined at 102 in southbound/src/southbound.c.'>ds_get_qsize</a>() &gt; 0) <font color='red'>{</font>
<a name='L400'> 400             <b>goto</b> <a href='../Y/244.html' title='Multiple used in 2 places.'>DS_FETCH_ONE_FD</a>;
<a name='L401'> 401         <font color='red'>}</font>
<a name='L402'> 402     <font color='red'>}</font>
<a name='L403'> 403 
<a name='L404'> 404     <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L405'> 405 <font color='red'>}</font>
<a name='L406'> 406 
<a name='L407'> 407 <i><font color='green'>/**</font></i>
<a name='L408'> 408 <i><font color='green'> * \brief Function to initialize domain socket workers</font></i>
<a name='L409'> 409 <i><font color='green'> * \return None</font></i>
<a name='L410'> 410 <i><font color='green'> */</font></i>
<a name='L411'> 411 <b>void</b> <a href='../S/952.html#L776' title='Refered from 776 in southbound/src/southbound.c.'>init_ds_workers</a>(<b>void</b>)
<a name='L412'> 412 <font color='red'>{</font>
<a name='L413'> 413     <a href='../S/952.html#L57' title='Defined at 57 in southbound/src/southbound.c.'>init_ds_queue</a>();
<a name='L414'> 414 
<a name='L415'> 415     <a href='../Y/6135.html' title='Multiple used in 6 places.'>pthread_mutex_init</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L416'> 416     <a href='../Y/6128.html' title='Multiple used in 4 places.'>pthread_cond_init</a>(&amp;<a href='../Y/2573.html' title='Multiple used in 6 places.'>ds_queue_cond</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L417'> 417 
<a name='L418'> 418     <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L419'> 419     <a href='../Y/6150.html' title='Multiple used in 27 places.'>pthread_t</a> <a href='../Y/7357.html' title='Multiple used in 58 places.'>thread</a>;
<a name='L420'> 420     <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>&lt;<a href='../Y/1146.html' title='Multiple used in 16 places.'>__NUM_THREADS</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L421'> 421         <b>if</b> (<a href='../Y/6132.html' title='Multiple used in 31 places.'>pthread_create</a>(&amp;<a href='../Y/7357.html' title='Multiple used in 58 places.'>thread</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>, &amp;<a href='../S/952.html#L338' title='Defined at 338 in southbound/src/southbound.c.'>do_ds_tasks</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>) &lt; 0) <font color='red'>{</font>
<a name='L422'> 422             <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("pthread_create");
<a name='L423'> 423         <font color='red'>}</font>
<a name='L424'> 424     <font color='red'>}</font>
<a name='L425'> 425 <font color='red'>}</font>
<a name='L426'> 426 
<a name='L427'> 427 <i><font color='green'>// worker thread handling part (network socket) /////////////////////</font></i>
<a name='L428'> 428 
<a name='L429'> 429 <i><font color='green'>/** \brief The callback definition for network sockets */</font></i>
<a name='L430'> 430 <b>typedef</b> <b>int</b> (*<a href='../Y/6312.html' title='Multiple used in 9 places.'>recv_cb_t</a>)(<b>int</b> <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> *<a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>, <b>int</b> <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>);
<a name='L431'> 431 
<a name='L432'> 432 <i><font color='green'>/** \brief The callback initialization for network sockets */</font></i>
<a name='L433'> 433 <a href='../Y/6312.html' title='Multiple used in 9 places.'>recv_cb_t</a> <a href='../Y/6311.html' title='Multiple used in 6 places.'>recv_cb</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L434'> 434 
<a name='L435'> 435 <i><font color='green'>/** \brief Mutexlock for workers (network socket) */</font></i>
<a name='L436'> 436 <a href='../Y/6137.html' title='Multiple used in 7 places.'>pthread_mutex_t</a> <a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>;
<a name='L437'> 437 
<a name='L438'> 438 <i><font color='green'>/** \brief Condition for workers (network socket) */</font></i>
<a name='L439'> 439 <a href='../Y/6130.html' title='Multiple used in 4 places.'>pthread_cond_t</a> <a href='../Y/6206.html' title='Multiple used in 18 places.'>queue_cond</a>;
<a name='L440'> 440 
<a name='L441'> 441 <i><font color='green'>/**</font></i>
<a name='L442'> 442 <i><font color='green'> * \brief Function to register a callback function for network sockets</font></i>
<a name='L443'> 443 <i><font color='green'> * \param cb The callback function for network sockets</font></i>
<a name='L444'> 444 <i><font color='green'> */</font></i>
<a name='L445'> 445 <b>void</b> <a href='../R/4324.html' title='Multiple refered from 3 places.'>recv_cb_register</a>(<a href='../Y/6312.html' title='Multiple used in 9 places.'>recv_cb_t</a> <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>)
<a name='L446'> 446 <font color='red'>{</font>
<a name='L447'> 447     <a href='../Y/6311.html' title='Multiple used in 6 places.'>recv_cb</a> = <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>;
<a name='L448'> 448 <font color='red'>}</font>
<a name='L449'> 449 
<a name='L450'> 450 <i><font color='green'>/**</font></i>
<a name='L451'> 451 <i><font color='green'> * \brief Function to handle messages from network sockets</font></i>
<a name='L452'> 452 <i><font color='green'> * \return NULL</font></i>
<a name='L453'> 453 <i><font color='green'> */</font></i>
<a name='L454'> 454 <b>void</b> *<a href='../R/2760.html' title='Multiple refered from 3 places.'>do_tasks</a>(<b>void</b> *<a href='../Y/4954.html' title='Multiple used in 18 places.'>null</a>)
<a name='L455'> 455 <font color='red'>{</font>
<a name='L456'> 456     <b>int</b> <a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>, <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>, <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 0;
<a name='L457'> 457     <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> <a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>[<a href='../D/519.html' title='Multiple defined in 5 places.'>BUFFER_SIZE</a>] = <font color='red'>{</font>0<font color='red'>}</font>;
<a name='L458'> 458 
<a name='L459'> 459     <a href='../Y/6136.html' title='Multiple used in 31 places.'>pthread_mutex_lock</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L460'> 460 
<a name='L461'> 461     <b>while</b> (<a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a>) <font color='red'>{</font>
<a name='L462'> 462         <a href='../Y/6131.html' title='Multiple used in 4 places.'>pthread_cond_wait</a>(&amp;<a href='../Y/6206.html' title='Multiple used in 18 places.'>queue_cond</a>, &amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L463'> 463 
<a name='L464'> 464 <a href='../Y/325.html' title='Multiple used in 6 places.'>FETCH_ONE_FD</a>:
<a name='L465'> 465         <b>if</b> (<a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a> == <a href='../D/1780.html' title='Multiple defined in 7 places.'>FALSE</a>) <font color='red'>{</font>
<a name='L466'> 466             <a href='../Y/6138.html' title='Multiple used in 31 places.'>pthread_mutex_unlock</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L467'> 467             <b>break</b>;
<a name='L468'> 468         <font color='red'>}</font>
<a name='L469'> 469 
<a name='L470'> 470         <a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a> = <a href='../D/9071.html' title='Multiple defined in 3 places.'>pop_front</a>();
<a name='L471'> 471         <b>if</b> (<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a> &lt; 0) <b>continue</b>;
<a name='L472'> 472         <a href='../Y/6138.html' title='Multiple used in 31 places.'>pthread_mutex_unlock</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L473'> 473 
<a name='L474'> 474         <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 0;
<a name='L475'> 475         <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> = 1;
<a name='L476'> 476         <b>while</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> &gt; 0) <font color='red'>{</font>
<a name='L477'> 477             <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> = <a href='../Y/6277.html' title='Multiple used in 17 places.'>read</a>(<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>, <a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>, <a href='../D/519.html' title='Multiple defined in 5 places.'>BUFFER_SIZE</a>);
<a name='L478'> 478             <b>if</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> &lt; 0) <font color='red'>{</font>
<a name='L479'> 479                 <b>if</b> (<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>) <font color='red'>{</font>
<a name='L480'> 480                     <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 1;
<a name='L481'> 481                 <font color='red'>}</font>
<a name='L482'> 482                 <b>break</b>;
<a name='L483'> 483             <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> == 0) <font color='red'>{</font>
<a name='L484'> 484                 <a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = 1;
<a name='L485'> 485                 <b>break</b>;
<a name='L486'> 486             <font color='red'>}</font>
<a name='L487'> 487 
<a name='L488'> 488             <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a> = <a href='../Y/6311.html' title='Multiple used in 6 places.'>recv_cb</a>(<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>, <a href='../Y/6514.html' title='Multiple used in 38 places.'>rx_buf</a>, <a href='../Y/1737.html' title='Multiple used in 134 places.'>bytes</a>);
<a name='L489'> 489         <font color='red'>}</font>
<a name='L490'> 490 
<a name='L491'> 491         <b>if</b> (<a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a>) <font color='red'>{</font>
<a name='L492'> 492             <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>]);
<a name='L493'> 493 
<a name='L494'> 494             <a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>]] = 0;
<a name='L495'> 495             <a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>] = 0;
<a name='L496'> 496 
<a name='L497'> 497             <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>);
<a name='L498'> 498         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L499'> 499             <b>if</b> (<a href='../D/9397.html' title='Multiple defined in 3 places.'>relink_epoll</a>(<a href='../Y/2727.html' title='Multiple used in 23 places.'>epoll</a>, <a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>, <a href='../Y/286.html' title='Multiple used in 15 places.'>EPOLLIN</a> | <a href='../Y/285.html' title='Multiple used in 11 places.'>EPOLLET</a> | <a href='../Y/287.html' title='Multiple used in 8 places.'>EPOLLONESHOT</a>) &lt; 0) <font color='red'>{</font>
<a name='L500'> 500                 <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>]);
<a name='L501'> 501 
<a name='L502'> 502                 <a href='../D/1168.html' title='Multiple defined in 13 places.'>DEBUG</a>("Closed (cfd = %2d, fd = %2d)\n", <a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>], <a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>);
<a name='L503'> 503 
<a name='L504'> 504                 <a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>]] = 0;
<a name='L505'> 505                 <a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>] = 0;
<a name='L506'> 506 
<a name='L507'> 507                 <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/7944.html' title='Multiple used in 54 places.'>wsock</a>);
<a name='L508'> 508             <font color='red'>}</font>
<a name='L509'> 509         <font color='red'>}</font>
<a name='L510'> 510 
<a name='L511'> 511         <a href='../Y/6136.html' title='Multiple used in 31 places.'>pthread_mutex_lock</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L512'> 512 
<a name='L513'> 513         <b>if</b> (<a href='../D/7988.html' title='Multiple defined in 3 places.'>get_qsize</a>() &gt; 0) <font color='red'>{</font>
<a name='L514'> 514             <b>goto</b> <a href='../Y/325.html' title='Multiple used in 6 places.'>FETCH_ONE_FD</a>;
<a name='L515'> 515         <font color='red'>}</font>
<a name='L516'> 516     <font color='red'>}</font>
<a name='L517'> 517 
<a name='L518'> 518     <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L519'> 519 <font color='red'>}</font>
<a name='L520'> 520 
<a name='L521'> 521 <i><font color='green'>/**</font></i>
<a name='L522'> 522 <i><font color='green'> * \brief Function to initialize network socket workers</font></i>
<a name='L523'> 523 <i><font color='green'> * \return None</font></i>
<a name='L524'> 524 <i><font color='green'> */</font></i>
<a name='L525'> 525 <b>void</b> <a href='../R/3301.html' title='Multiple refered from 3 places.'>init_workers</a>(<b>void</b>)
<a name='L526'> 526 <font color='red'>{</font>
<a name='L527'> 527     <a href='../D/8116.html' title='Multiple defined in 3 places.'>init_queue</a>();
<a name='L528'> 528 
<a name='L529'> 529     <a href='../Y/6135.html' title='Multiple used in 6 places.'>pthread_mutex_init</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L530'> 530     <a href='../Y/6128.html' title='Multiple used in 4 places.'>pthread_cond_init</a>(&amp;<a href='../Y/6206.html' title='Multiple used in 18 places.'>queue_cond</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L531'> 531 
<a name='L532'> 532     <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L533'> 533     <a href='../Y/6150.html' title='Multiple used in 27 places.'>pthread_t</a> <a href='../Y/7357.html' title='Multiple used in 58 places.'>thread</a>;
<a name='L534'> 534     <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>&lt;<a href='../Y/1146.html' title='Multiple used in 16 places.'>__NUM_THREADS</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L535'> 535         <b>if</b> (<a href='../Y/6132.html' title='Multiple used in 31 places.'>pthread_create</a>(&amp;<a href='../Y/7357.html' title='Multiple used in 58 places.'>thread</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>, &amp;<a href='../D/7500.html' title='Multiple defined in 3 places.'>do_tasks</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>) &lt; 0) <font color='red'>{</font>
<a name='L536'> 536             <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("pthread_create");
<a name='L537'> 537         <font color='red'>}</font>
<a name='L538'> 538     <font color='red'>}</font>
<a name='L539'> 539 <font color='red'>}</font>
<a name='L540'> 540 
<a name='L541'> 541 <i><font color='green'>// network socket handling part /////////////////////////////////////</font></i>
<a name='L542'> 542 
<a name='L543'> 543 <i><font color='green'>/** \brief Network socket */</font></i>
<a name='L544'> 544 <b>int</b> <a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>;
<a name='L545'> 545 
<a name='L546'> 546 <i><font color='green'>/**</font></i>
<a name='L547'> 547 <i><font color='green'> * \brief Function to set the non-blocking mode to a socket</font></i>
<a name='L548'> 548 <i><font color='green'> * \param fd Socket</font></i>
<a name='L549'> 549 <i><font color='green'> */</font></i>
<a name='L550'> 550 <b>int</b> <a href='../R/3758.html' title='Multiple refered from 7 places.'>nonblocking_mode</a>(<b>const</b> <b>int</b> <a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>)
<a name='L551'> 551 <font color='red'>{</font>
<a name='L552'> 552     <b>int</b> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>;
<a name='L553'> 553 
<a name='L554'> 554     <b>if</b> ((<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../Y/3013.html' title='Multiple used in 29 places.'>fcntl</a>(<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>, <a href='../Y/341.html' title='Multiple used in 12 places.'>F_GETFL</a>, 0)) &lt; 0) <font color='red'>{</font>
<a name='L555'> 555         <b>if</b> (<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>) <font color='red'>{</font>
<a name='L556'> 556             <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("fcntl");
<a name='L557'> 557             <b>return</b> -1;
<a name='L558'> 558         <font color='red'>}</font>
<a name='L559'> 559     <font color='red'>}</font>
<a name='L560'> 560 
<a name='L561'> 561     <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> |= <a href='../Y/634.html' title='Multiple used in 13 places.'>O_NONBLOCK</a>;
<a name='L562'> 562     <b>if</b> (<a href='../Y/3013.html' title='Multiple used in 29 places.'>fcntl</a>(<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>, <a href='../Y/344.html' title='Multiple used in 13 places.'>F_SETFL</a>, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>) &lt; 0) <font color='red'>{</font>
<a name='L563'> 563         <b>if</b> (<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a>) <font color='red'>{</font>
<a name='L564'> 564             <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("fcntl");
<a name='L565'> 565             <b>return</b> -1;
<a name='L566'> 566         <font color='red'>}</font>
<a name='L567'> 567     <font color='red'>}</font>
<a name='L568'> 568 
<a name='L569'> 569     <b>return</b> 0;
<a name='L570'> 570 <font color='red'>}</font>
<a name='L571'> 571 
<a name='L572'> 572 <i><font color='green'>/**</font></i>
<a name='L573'> 573 <i><font color='green'> * \brief Function to initialize a socket</font></i>
<a name='L574'> 574 <i><font color='green'> * \param port Port number</font></i>
<a name='L575'> 575 <i><font color='green'> */</font></i>
<a name='L576'> 576 <b>int</b> <a href='../R/3298.html' title='Multiple refered from 3 places.'>init_socket</a>(<a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>)
<a name='L577'> 577 <font color='red'>{</font>
<a name='L578'> 578     <b>struct</b> <a href='../Y/6896.html' title='Multiple used in 27 places.'>sockaddr_in</a> <a href='../Y/6674.html' title='Multiple used in 36 places.'>server</a>;
<a name='L579'> 579     <b>int</b> <a href='../S/557.html#L77' title='Defined at 77 in cbench/openflow/utilities/wireshark_dissectors/wireshark-1.0.0-includes/getopt.h.'>option</a> = 1;
<a name='L580'> 580 
<a name='L581'> 581     <b>if</b> ((<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a> = <a href='../Y/6901.html' title='Multiple used in 21 places.'>socket</a>(<a href='../Y/18.html' title='Multiple used in 29 places.'>AF_INET</a>, <a href='../Y/830.html' title='Multiple used in 15 places.'>SOCK_STREAM</a>, 0)) &lt; 0) <font color='red'>{</font>
<a name='L582'> 582         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("socket");
<a name='L583'> 583         <b>return</b> -1;
<a name='L584'> 584     <font color='red'>}</font>
<a name='L585'> 585 
<a name='L586'> 586     <b>if</b> (<a href='../Y/6713.html' title='Multiple used in 17 places.'>setsockopt</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>, <a href='../Y/831.html' title='Multiple used in 17 places.'>SOL_SOCKET</a>, <a href='../Y/840.html' title='Multiple used in 6 places.'>SO_REUSEADDR</a>, &amp;<a href='../S/557.html#L77' title='Defined at 77 in cbench/openflow/utilities/wireshark_dissectors/wireshark-1.0.0-includes/getopt.h.'>option</a>, <b>sizeof</b>(<a href='../S/557.html#L77' title='Defined at 77 in cbench/openflow/utilities/wireshark_dissectors/wireshark-1.0.0-includes/getopt.h.'>option</a>)) &lt; 0) <font color='red'>{</font>
<a name='L587'> 587         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("setsockopt");
<a name='L588'> 588     <font color='red'>}</font>
<a name='L589'> 589 
<a name='L590'> 590     <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 3 places.'>nonblocking_mode</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>) &lt; 0) <font color='red'>{</font>
<a name='L591'> 591         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>);
<a name='L592'> 592         <b>return</b> -1;
<a name='L593'> 593     <font color='red'>}</font>
<a name='L594'> 594 
<a name='L595'> 595     <a href='../Y/6674.html' title='Multiple used in 36 places.'>server</a>.<a href='../Y/6790.html' title='Multiple used in 13 places.'>sin_family</a> = <a href='../Y/18.html' title='Multiple used in 29 places.'>AF_INET</a>;
<a name='L596'> 596     <a href='../Y/6674.html' title='Multiple used in 36 places.'>server</a>.<a href='../Y/6789.html' title='Multiple used in 20 places.'>sin_addr</a>.<a href='../Y/6559.html' title='Multiple used in 125 places.'>s_addr</a> = <a href='../Y/453.html' title='Multiple used in 12 places.'>INADDR_ANY</a>;
<a name='L597'> 597     <a href='../Y/6674.html' title='Multiple used in 36 places.'>server</a>.<a href='../Y/6792.html' title='Multiple used in 18 places.'>sin_port</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>);
<a name='L598'> 598 
<a name='L599'> 599     <b>if</b> (<a href='../Y/1622.html' title='Multiple used in 14 places.'>bind</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>, (<b>struct</b> <a href='../Y/6895.html' title='Multiple used in 43 places.'>sockaddr</a> *)&amp;<a href='../Y/6674.html' title='Multiple used in 36 places.'>server</a>, <b>sizeof</b>(<a href='../Y/6674.html' title='Multiple used in 36 places.'>server</a>)) &lt; 0) <font color='red'>{</font>
<a name='L600'> 600         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("bind");
<a name='L601'> 601         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>);
<a name='L602'> 602         <b>return</b> -1;
<a name='L603'> 603     <font color='red'>}</font>
<a name='L604'> 604 
<a name='L605'> 605     <b>if</b> (<a href='../Y/4168.html' title='Multiple used in 10 places.'>listen</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>, <a href='../Y/833.html' title='Multiple used in 3 places.'>SOMAXCONN</a>) &lt; 0) <font color='red'>{</font>
<a name='L606'> 606         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("listen");
<a name='L607'> 607         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>);
<a name='L608'> 608         <b>return</b> -1;
<a name='L609'> 609     <font color='red'>}</font>
<a name='L610'> 610 
<a name='L611'> 611     <b>if</b> (<a href='../D/8203.html' title='Multiple defined in 3 places.'>link_epoll</a>(<a href='../Y/2727.html' title='Multiple used in 23 places.'>epoll</a>, <a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>, <a href='../Y/286.html' title='Multiple used in 15 places.'>EPOLLIN</a> | <a href='../Y/285.html' title='Multiple used in 11 places.'>EPOLLET</a>) &lt; 0) <font color='red'>{</font>
<a name='L612'> 612         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>);
<a name='L613'> 613         <b>return</b> -1;
<a name='L614'> 614     <font color='red'>}</font>
<a name='L615'> 615 
<a name='L616'> 616     <b>return</b> <a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>;
<a name='L617'> 617 <font color='red'>}</font>
<a name='L618'> 618 
<a name='L619'> 619 <i><font color='green'>// domain socket listening part /////////////////////////////////////</font></i>
<a name='L620'> 620 
<a name='L621'> 621 <i><font color='green'>/** \brief Domain socket path */</font></i>
<a name='L622'> 622 <font color='darkred'>#define</font> <a href='../R/397.html' title='Multiple refered from 2 places.'>DS_PATH</a> "../tmp/sb_comm"
<a name='L623'> 623 
<a name='L624'> 624 <i><font color='green'>/**</font></i>
<a name='L625'> 625 <i><font color='green'> * \brief Function to receive connections from domain sockets</font></i>
<a name='L626'> 626 <i><font color='green'> * \return NULL</font></i>
<a name='L627'> 627 <i><font color='green'> */</font></i>
<a name='L628'> 628 <b>void</b> *<a href='../S/952.html#L779' title='Refered from 779 in southbound/src/southbound.c.'>ds_socket_listen</a>(<b>void</b> *<a href='../Y/1454.html' title='Multiple used in 77 places.'>arg</a>)
<a name='L629'> 629 <font color='red'>{</font>
<a name='L630'> 630     <b>int</b> <a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a> = 0;
<a name='L631'> 631 
<a name='L632'> 632     <b>while</b> (<a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a>) <font color='red'>{</font>
<a name='L633'> 633         <a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a> = <a href='../Y/2732.html' title='Multiple used in 6 places.'>epoll_wait</a>(<a href='../Y/2563.html' title='Multiple used in 6 places.'>ds_epoll</a>, <a href='../Y/2564.html' title='Multiple used in 3 places.'>ds_events</a>, <a href='../D/2531.html' title='Multiple defined in 3 places.'>MAXEVENTS</a>, 100);
<a name='L634'> 634 
<a name='L635'> 635         <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L636'> 636         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>&lt;<a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L637'> 637             <a href='../Y/6136.html' title='Multiple used in 31 places.'>pthread_mutex_lock</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L638'> 638             <a href='../S/952.html#L68' title='Defined at 68 in southbound/src/southbound.c.'>ds_push_back</a>(<a href='../Y/2564.html' title='Multiple used in 3 places.'>ds_events</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>].<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>.<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>);
<a name='L639'> 639             <a href='../Y/6138.html' title='Multiple used in 31 places.'>pthread_mutex_unlock</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L640'> 640             <a href='../Y/6129.html' title='Multiple used in 8 places.'>pthread_cond_signal</a>(&amp;<a href='../Y/2573.html' title='Multiple used in 6 places.'>ds_queue_cond</a>);
<a name='L641'> 641         <font color='red'>}</font>
<a name='L642'> 642 
<a name='L643'> 643         <b>if</b> (<a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a> &lt; 0 &amp;&amp; <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/266.html' title='Multiple used in 24 places.'>EINTR</a>)
<a name='L644'> 644             <b>break</b>;
<a name='L645'> 645     <font color='red'>}</font>
<a name='L646'> 646 
<a name='L647'> 647     <b>if</b> (<a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a> &lt; 0)
<a name='L648'> 648         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("epoll_wait");
<a name='L649'> 649 
<a name='L650'> 650     <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/2563.html' title='Multiple used in 6 places.'>ds_epoll</a>);
<a name='L651'> 651 
<a name='L652'> 652     <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L653'> 653 <font color='red'>}</font>
<a name='L654'> 654 
<a name='L655'> 655 <i><font color='green'>// network socket listening part ////////////////////////////////////</font></i>
<a name='L656'> 656 
<a name='L657'> 657 <i><font color='green'>/**</font></i>
<a name='L658'> 658 <i><font color='green'> * \brief Function to receive connections from network sockets</font></i>
<a name='L659'> 659 <i><font color='green'> * \return NULL</font></i>
<a name='L660'> 660 <i><font color='green'> */</font></i>
<a name='L661'> 661 <b>void</b> *<a href='../R/4492.html' title='Multiple refered from 3 places.'>socket_listen</a>(<b>void</b> *<a href='../Y/1454.html' title='Multiple used in 77 places.'>arg</a>)
<a name='L662'> 662 <font color='red'>{</font>
<a name='L663'> 663     <b>int</b> <a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>;
<a name='L664'> 664     <b>int</b> <a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a> = 0;
<a name='L665'> 665     <b>struct</b> <a href='../Y/6896.html' title='Multiple used in 27 places.'>sockaddr_in</a> <a href='../Y/1910.html' title='Multiple used in 83 places.'>client</a>;
<a name='L666'> 666     <a href='../Y/6904.html' title='Multiple used in 17 places.'>socklen_t</a> <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a> = <b>sizeof</b>(<b>struct</b> <a href='../Y/6895.html' title='Multiple used in 43 places.'>sockaddr</a>);
<a name='L667'> 667 
<a name='L668'> 668     <b>while</b> (<a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a>) <font color='red'>{</font>
<a name='L669'> 669         <a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a> = <a href='../Y/2732.html' title='Multiple used in 6 places.'>epoll_wait</a>(<a href='../Y/2727.html' title='Multiple used in 23 places.'>epoll</a>, <a href='../Y/2905.html' title='Multiple used in 91 places.'>events</a>, <a href='../D/2531.html' title='Multiple defined in 3 places.'>MAXEVENTS</a>, 100);
<a name='L670'> 670 
<a name='L671'> 671         <b>if</b> (<a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a> == <a href='../D/1780.html' title='Multiple defined in 7 places.'>FALSE</a>) <b>break</b>;
<a name='L672'> 672 
<a name='L673'> 673         <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L674'> 674         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>&lt;<a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L675'> 675             <b>if</b> (<a href='../Y/2905.html' title='Multiple used in 91 places.'>events</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>].<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>.<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a> == <a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>) <font color='red'>{</font>
<a name='L676'> 676                 <b>while</b> (1) <font color='red'>{</font>
<a name='L677'> 677                     <b>if</b> ((<a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a> = <a href='../Y/1266.html' title='Multiple used in 18 places.'>accept</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>, (<b>struct</b> <a href='../Y/6895.html' title='Multiple used in 43 places.'>sockaddr</a> *)&amp;<a href='../Y/1910.html' title='Multiple used in 83 places.'>client</a>, &amp;<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>)) &lt; 0) <font color='red'>{</font>
<a name='L678'> 678                         <b>if</b> (<a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/259.html' title='Multiple used in 75 places.'>EAGAIN</a> &amp;&amp; <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/311.html' title='Multiple used in 8 places.'>EWOULDBLOCK</a>) <font color='red'>{</font>
<a name='L679'> 679                             <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("accept");
<a name='L680'> 680                         <font color='red'>}</font>
<a name='L681'> 681                         <b>break</b>;
<a name='L682'> 682                     <font color='red'>}</font>
<a name='L683'> 683 
<a name='L684'> 684                     <i><font color='green'>// new connection</font></i>
<a name='L685'> 685                     <b>int</b> <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>;
<a name='L686'> 686                     <b>if</b> ((<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a> = <a href='../Y/6901.html' title='Multiple used in 21 places.'>socket</a>(<a href='../Y/21.html' title='Multiple used in 5 places.'>AF_UNIX</a>, <a href='../Y/830.html' title='Multiple used in 15 places.'>SOCK_STREAM</a>, 0)) == -1) <font color='red'>{</font>
<a name='L687'> 687                         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("socket");
<a name='L688'> 688                     <font color='red'>}</font>
<a name='L689'> 689 
<a name='L690'> 690                     <b>struct</b> <a href='../Y/6900.html' title='Multiple used in 13 places.'>sockaddr_un</a> <a href='../S/204.html#L165' title='Defined at 165 in cbench/openflow/udatapath/datapath.c.'>remote</a>;
<a name='L691'> 691                     <a href='../S/204.html#L165' title='Defined at 165 in cbench/openflow/udatapath/datapath.c.'>remote</a>.<a href='../Y/7164.html' title='Multiple used in 5 places.'>sun_family</a> = <a href='../Y/21.html' title='Multiple used in 5 places.'>AF_UNIX</a>;
<a name='L692'> 692                     <a href='../Y/7083.html' title='Multiple used in 242 places.'>strcpy</a>(<a href='../S/204.html#L165' title='Defined at 165 in cbench/openflow/udatapath/datapath.c.'>remote</a>.<a href='../Y/7166.html' title='Multiple used in 17 places.'>sun_path</a>, <a href='../D/1490.html' title='Multiple defined in 2 places.'>DS_PATH</a>);
<a name='L693'> 693                     <b>int</b> <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a> = <a href='../Y/7098.html' title='Multiple used in 203 places.'>strlen</a>(<a href='../S/204.html#L165' title='Defined at 165 in cbench/openflow/udatapath/datapath.c.'>remote</a>.<a href='../Y/7166.html' title='Multiple used in 17 places.'>sun_path</a>) + <b>sizeof</b>(<a href='../S/204.html#L165' title='Defined at 165 in cbench/openflow/udatapath/datapath.c.'>remote</a>.<a href='../Y/7164.html' title='Multiple used in 5 places.'>sun_family</a>);
<a name='L694'> 694 
<a name='L695'> 695                     <b>if</b> (<a href='../Y/2093.html' title='Multiple used in 10 places.'>connect</a>(<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, (<b>struct</b> <a href='../Y/6895.html' title='Multiple used in 43 places.'>sockaddr</a> *)&amp;<a href='../S/204.html#L165' title='Defined at 165 in cbench/openflow/udatapath/datapath.c.'>remote</a>, <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>) == -1) <font color='red'>{</font>
<a name='L696'> 696                         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("connect");
<a name='L697'> 697                     <font color='red'>}</font>
<a name='L698'> 698 
<a name='L699'> 699                     <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 3 places.'>nonblocking_mode</a>(<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>) &lt; 0) <font color='red'>{</font>
<a name='L700'> 700                         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("nonblocking_mode");
<a name='L701'> 701                     <font color='red'>}</font>
<a name='L702'> 702 
<a name='L703'> 703                     <b>if</b> (<a href='../D/8203.html' title='Multiple defined in 3 places.'>link_epoll</a>(<a href='../Y/2563.html' title='Multiple used in 6 places.'>ds_epoll</a>, <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/286.html' title='Multiple used in 15 places.'>EPOLLIN</a> | <a href='../Y/285.html' title='Multiple used in 11 places.'>EPOLLET</a> | <a href='../Y/287.html' title='Multiple used in 8 places.'>EPOLLONESHOT</a>) &lt; 0) <font color='red'>{</font>
<a name='L704'> 704                         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("link_epoll");
<a name='L705'> 705                     <font color='red'>}</font>
<a name='L706'> 706 
<a name='L707'> 707                     <a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>] = <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>;
<a name='L708'> 708                     <a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>] = <a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>;
<a name='L709'> 709 
<a name='L710'> 710                     <a href='../D/1168.html' title='Multiple defined in 13 places.'>DEBUG</a>("Accepted (cfd=%2d, fd=%2d, host=%s, port=%d)\n", <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>, <a href='../Y/3805.html' title='Multiple used in 52 places.'>inet_ntoa</a>(<a href='../Y/1910.html' title='Multiple used in 83 places.'>client</a>.<a href='../Y/6789.html' title='Multiple used in 20 places.'>sin_addr</a>), <a href='../Y/1910.html' title='Multiple used in 83 places.'>client</a>.<a href='../Y/6792.html' title='Multiple used in 18 places.'>sin_port</a>);
<a name='L711'> 711 
<a name='L712'> 712                     <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 3 places.'>nonblocking_mode</a>(<a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>) &lt; 0) <font color='red'>{</font>
<a name='L713'> 713                         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>);
<a name='L714'> 714 
<a name='L715'> 715                         <a href='../D/1168.html' title='Multiple defined in 13 places.'>DEBUG</a>("Closed (cfd = %2d, fd = %2d)\n", <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>);
<a name='L716'> 716 
<a name='L717'> 717                         <a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>] = 0;
<a name='L718'> 718                         <a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>] = 0;
<a name='L719'> 719 
<a name='L720'> 720                         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>);
<a name='L721'> 721 
<a name='L722'> 722                         <b>break</b>;
<a name='L723'> 723                     <font color='red'>}</font>
<a name='L724'> 724 
<a name='L725'> 725                     <b>if</b> (<a href='../D/8203.html' title='Multiple defined in 3 places.'>link_epoll</a>(<a href='../Y/2727.html' title='Multiple used in 23 places.'>epoll</a>, <a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>, <a href='../Y/286.html' title='Multiple used in 15 places.'>EPOLLIN</a> | <a href='../Y/285.html' title='Multiple used in 11 places.'>EPOLLET</a> | <a href='../Y/287.html' title='Multiple used in 8 places.'>EPOLLONESHOT</a>) &lt; 0) <font color='red'>{</font>
<a name='L726'> 726                         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>);
<a name='L727'> 727 
<a name='L728'> 728                         <a href='../D/1168.html' title='Multiple defined in 13 places.'>DEBUG</a>("Closed (cfd = %2d, fd = %2d\n", <a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>, <a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>);
<a name='L729'> 729 
<a name='L730'> 730                         <a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>[<a href='../Y/6894.html' title='Multiple used in 148 places.'>sock</a>] = 0;
<a name='L731'> 731                         <a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>[<a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>] = 0;
<a name='L732'> 732 
<a name='L733'> 733                         <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/2198.html' title='Multiple used in 33 places.'>csock</a>);
<a name='L734'> 734 
<a name='L735'> 735                         <b>break</b>;
<a name='L736'> 736                     <font color='red'>}</font>
<a name='L737'> 737                 <font color='red'>}</font>
<a name='L738'> 738             <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L739'> 739                 <a href='../Y/6136.html' title='Multiple used in 31 places.'>pthread_mutex_lock</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L740'> 740                 <a href='../D/9235.html' title='Multiple defined in 3 places.'>push_back</a>(<a href='../Y/2905.html' title='Multiple used in 91 places.'>events</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>].<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>.<a href='../Y/3016.html' title='Multiple used in 422 places.'>fd</a>);
<a name='L741'> 741                 <a href='../Y/6138.html' title='Multiple used in 31 places.'>pthread_mutex_unlock</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L742'> 742                 <a href='../Y/6129.html' title='Multiple used in 8 places.'>pthread_cond_signal</a>(&amp;<a href='../Y/6206.html' title='Multiple used in 18 places.'>queue_cond</a>);
<a name='L743'> 743             <font color='red'>}</font>
<a name='L744'> 744         <font color='red'>}</font>
<a name='L745'> 745 
<a name='L746'> 746         <b>if</b> (<a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a> &lt; 0 &amp;&amp; <a href='../Y/2760.html' title='Multiple used in 228 places.'>errno</a> != <a href='../Y/266.html' title='Multiple used in 24 places.'>EINTR</a>)
<a name='L747'> 747             <b>break</b>;
<a name='L748'> 748     <font color='red'>}</font>
<a name='L749'> 749 
<a name='L750'> 750     <b>if</b> (<a href='../Y/5013.html' title='Multiple used in 20 places.'>nums</a> &lt; 0)
<a name='L751'> 751         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("epoll_wait");
<a name='L752'> 752 
<a name='L753'> 753     <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/2727.html' title='Multiple used in 23 places.'>epoll</a>);
<a name='L754'> 754     <a href='../Y/1918.html' title='Multiple used in 102 places.'>close</a>(<a href='../Y/6604.html' title='Multiple used in 49 places.'>sc</a>);
<a name='L755'> 755 
<a name='L756'> 756     <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L757'> 757 <font color='red'>}</font>
<a name='L758'> 758 
<a name='L759'> 759 <i><font color='green'>/////////////////////////////////////////////////////////////////////</font></i>
<a name='L760'> 760 
<a name='L761'> 761 <i><font color='green'>/**</font></i>
<a name='L762'> 762 <i><font color='green'> * \brief Function to initialize the external packet I/O engine</font></i>
<a name='L763'> 763 <i><font color='green'> * \param port Port number</font></i>
<a name='L764'> 764 <i><font color='green'> */</font></i>
<a name='L765'> 765 <b>void</b> <a href='../S/952.html#L918' title='Refered from 918 in southbound/src/southbound.c.'>init_sb</a>(<b>char</b> *<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>)
<a name='L766'> 766 <font color='red'>{</font>
<a name='L767'> 767     <a href='../D/4936.html' title='Multiple defined in 12 places.'>PRINTF</a>("Initializing external packet I/O engine (port: %s)\n", <a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>);
<a name='L768'> 768 
<a name='L769'> 769     <a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a> = <a href='../D/5695.html' title='Multiple defined in 7 places.'>TRUE</a>;
<a name='L770'> 770 
<a name='L771'> 771     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/6600.html' title='Multiple used in 15 places.'>sb2cr</a>, 0, <b>sizeof</b>(<b>int</b>) * <a href='../D/6484.html' title='Multiple defined in 6 places.'>__DEFAULT_TABLE_SIZE</a>);
<a name='L772'> 772     <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/2161.html' title='Multiple used in 14 places.'>cr2sb</a>, 0, <b>sizeof</b>(<b>int</b>) * <a href='../D/6484.html' title='Multiple defined in 6 places.'>__DEFAULT_TABLE_SIZE</a>);
<a name='L773'> 773 
<a name='L774'> 774     <a href='../S/952.html#L329' title='Defined at 329 in southbound/src/southbound.c.'>ds_recv_cb_register</a>(<a href='../S/952.html#L119' title='Defined at 119 in southbound/src/southbound.c.'>ds_msg_proc</a>);
<a name='L775'> 775     <a href='../Y/2563.html' title='Multiple used in 6 places.'>ds_epoll</a> = <a href='../D/8113.html' title='Multiple defined in 3 places.'>init_epoll</a>();
<a name='L776'> 776     <a href='../S/952.html#L411' title='Defined at 411 in southbound/src/southbound.c.'>init_ds_workers</a>();
<a name='L777'> 777 
<a name='L778'> 778     <a href='../Y/6150.html' title='Multiple used in 27 places.'>pthread_t</a> <a href='../Y/7357.html' title='Multiple used in 58 places.'>thread</a>;
<a name='L779'> 779     <b>if</b> (<a href='../Y/6132.html' title='Multiple used in 31 places.'>pthread_create</a>(&amp;<a href='../Y/7357.html' title='Multiple used in 58 places.'>thread</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>, &amp;<a href='../S/952.html#L628' title='Defined at 628 in southbound/src/southbound.c.'>ds_socket_listen</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>) &lt; 0) <font color='red'>{</font>
<a name='L780'> 780         <a href='../D/4593.html' title='Multiple defined in 6 places.'>PERROR</a>("pthread_create");
<a name='L781'> 781     <font color='red'>}</font>
<a name='L782'> 782 
<a name='L783'> 783     <a href='../D/10115.html' title='Multiple defined in 6 places.'>waitsec</a>(0, 1000);
<a name='L784'> 784 
<a name='L785'> 785     <a href='../D/9366.html' title='Multiple defined in 3 places.'>recv_cb_register</a>(<a href='../D/8382.html' title='Multiple defined in 3 places.'>msg_proc</a>);
<a name='L786'> 786     <a href='../Y/2727.html' title='Multiple used in 23 places.'>epoll</a> = <a href='../D/8113.html' title='Multiple defined in 3 places.'>init_epoll</a>();
<a name='L787'> 787     <a href='../D/8121.html' title='Multiple defined in 3 places.'>init_workers</a>();
<a name='L788'> 788 
<a name='L789'> 789     <a href='../D/8118.html' title='Multiple defined in 3 places.'>init_socket</a>(<a href='../Y/1510.html' title='Multiple used in 76 places.'>atoi</a>(<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>));
<a name='L790'> 790 
<a name='L791'> 791     <a href='../S/871.html#L55' title='Defined at 55 in cbench/openflow/lib/signals.c.'>signal</a>(<a href='../Y/784.html' title='Multiple used in 12 places.'>SIGPIPE</a>, <a href='../Y/805.html' title='Multiple used in 13 places.'>SIG_IGN</a>);
<a name='L792'> 792 <font color='red'>}</font>
<a name='L793'> 793 
<a name='L794'> 794 <i><font color='green'>/**</font></i>
<a name='L795'> 795 <i><font color='green'> * \brief Function to clean up all socket queues</font></i>
<a name='L796'> 796 <i><font color='green'> * \return None</font></i>
<a name='L797'> 797 <i><font color='green'> */</font></i>
<a name='L798'> 798 <b>int</b> <a href='../R/2357.html' title='Multiple refered from 3 places.'>cleanup_sb</a>(<b>void</b>)
<a name='L799'> 799 <font color='red'>{</font>
<a name='L800'> 800     <a href='../Y/2088.html' title='Multiple used in 17 places.'>conn_sb_on</a> = <a href='../D/1780.html' title='Multiple defined in 7 places.'>FALSE</a>;
<a name='L801'> 801 
<a name='L802'> 802     <i><font color='green'>// domain socket</font></i>
<a name='L803'> 803 
<a name='L804'> 804     <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L805'> 805     <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>&lt;<a href='../Y/1146.html' title='Multiple used in 16 places.'>__NUM_THREADS</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L806'> 806         <a href='../Y/6136.html' title='Multiple used in 31 places.'>pthread_mutex_lock</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L807'> 807         <a href='../S/952.html#L68' title='Defined at 68 in southbound/src/southbound.c.'>ds_push_back</a>(0);
<a name='L808'> 808         <a href='../Y/6138.html' title='Multiple used in 31 places.'>pthread_mutex_unlock</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L809'> 809         <a href='../Y/6129.html' title='Multiple used in 8 places.'>pthread_cond_signal</a>(&amp;<a href='../Y/2573.html' title='Multiple used in 6 places.'>ds_queue_cond</a>);
<a name='L810'> 810     <font color='red'>}</font>
<a name='L811'> 811 
<a name='L812'> 812     <a href='../Y/6127.html' title='Multiple used in 4 places.'>pthread_cond_destroy</a>(&amp;<a href='../Y/2573.html' title='Multiple used in 6 places.'>ds_queue_cond</a>);
<a name='L813'> 813     <a href='../Y/6134.html' title='Multiple used in 5 places.'>pthread_mutex_destroy</a>(&amp;<a href='../Y/2574.html' title='Multiple used in 12 places.'>ds_queue_mutex</a>);
<a name='L814'> 814 
<a name='L815'> 815     <i><font color='green'>// network socket</font></i>
<a name='L816'> 816 
<a name='L817'> 817     <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>&lt;<a href='../Y/1146.html' title='Multiple used in 16 places.'>__NUM_THREADS</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L818'> 818         <a href='../Y/6136.html' title='Multiple used in 31 places.'>pthread_mutex_lock</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L819'> 819         <a href='../D/9235.html' title='Multiple defined in 3 places.'>push_back</a>(0);
<a name='L820'> 820         <a href='../Y/6138.html' title='Multiple used in 31 places.'>pthread_mutex_unlock</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L821'> 821         <a href='../Y/6129.html' title='Multiple used in 8 places.'>pthread_cond_signal</a>(&amp;<a href='../Y/6206.html' title='Multiple used in 18 places.'>queue_cond</a>);
<a name='L822'> 822     <font color='red'>}</font>
<a name='L823'> 823 
<a name='L824'> 824     <a href='../Y/6127.html' title='Multiple used in 4 places.'>pthread_cond_destroy</a>(&amp;<a href='../Y/6206.html' title='Multiple used in 18 places.'>queue_cond</a>);
<a name='L825'> 825     <a href='../Y/6134.html' title='Multiple used in 5 places.'>pthread_mutex_destroy</a>(&amp;<a href='../Y/6214.html' title='Multiple used in 36 places.'>queue_mutex</a>);
<a name='L826'> 826 
<a name='L827'> 827     <a href='../S/871.html#L55' title='Defined at 55 in cbench/openflow/lib/signals.c.'>signal</a>(<a href='../Y/784.html' title='Multiple used in 12 places.'>SIGPIPE</a>, <a href='../Y/803.html' title='Multiple used in 8 places.'>SIG_DFL</a>);
<a name='L828'> 828 
<a name='L829'> 829     <b>return</b> 0;
<a name='L830'> 830 <font color='red'>}</font>
<a name='L831'> 831 
<a name='L832'> 832 <i><font color='green'>/////////////////////////////////////////////////////////////////////</font></i>
<a name='L833'> 833 
<a name='L834'> 834 <i><font color='green'>/** \brief The SIGINT handler definition */</font></i>
<a name='L835'> 835 <b>void</b> (*<a href='../Y/6766.html' title='Multiple used in 10 places.'>sigint_func</a>)(<b>int</b>);
<a name='L836'> 836 
<a name='L837'> 837 <i><font color='green'>/** \brief Function to handle the SIGINT signal */</font></i>
<a name='L838'> 838 <b>void</b> <a href='../R/4465.html' title='Multiple refered from 5 places.'>sigint_handler</a>(<b>int</b> <a href='../Y/6757.html' title='Multiple used in 15 places.'>sig</a>)
<a name='L839'> 839 <font color='red'>{</font>
<a name='L840'> 840     <a href='../D/4936.html' title='Multiple defined in 12 places.'>PRINTF</a>("Got a SIGINT signal\n");
<a name='L841'> 841 
<a name='L842'> 842     <a href='../S/952.html#L798' title='Defined at 798 in southbound/src/southbound.c.'>cleanup_sb</a>();
<a name='L843'> 843 
<a name='L844'> 844     <a href='../Y/2943.html' title='Multiple used in 74 places.'>exit</a>(0);
<a name='L845'> 845 <font color='red'>}</font>
<a name='L846'> 846 
<a name='L847'> 847 <i><font color='green'>/** \brief The SIGKILL handler definition */</font></i>
<a name='L848'> 848 <b>void</b> (*<a href='../Y/6767.html' title='Multiple used in 10 places.'>sigkill_func</a>)(<b>int</b>);
<a name='L849'> 849 
<a name='L850'> 850 <i><font color='green'>/** \brief Function to handle the SIGKILL signal */</font></i>
<a name='L851'> 851 <b>void</b> <a href='../R/4466.html' title='Multiple refered from 5 places.'>sigkill_handler</a>(<b>int</b> <a href='../Y/6757.html' title='Multiple used in 15 places.'>sig</a>)
<a name='L852'> 852 <font color='red'>{</font>
<a name='L853'> 853     <a href='../D/4936.html' title='Multiple defined in 12 places.'>PRINTF</a>("Got a SIGKILL signal\n");
<a name='L854'> 854 
<a name='L855'> 855     <a href='../S/952.html#L798' title='Defined at 798 in southbound/src/southbound.c.'>cleanup_sb</a>();
<a name='L856'> 856 
<a name='L857'> 857     <a href='../Y/2943.html' title='Multiple used in 74 places.'>exit</a>(0);
<a name='L858'> 858 <font color='red'>}</font>
<a name='L859'> 859 
<a name='L860'> 860 <i><font color='green'>/** \brief The SIGTERM handler definition */</font></i>
<a name='L861'> 861 <b>void</b> (*<a href='../Y/6778.html' title='Multiple used in 10 places.'>sigterm_func</a>)(<b>int</b>);
<a name='L862'> 862 
<a name='L863'> 863 <i><font color='green'>/** \brief Function to handle the SIGTERM signal */</font></i>
<a name='L864'> 864 <b>void</b> <a href='../R/4474.html' title='Multiple refered from 5 places.'>sigterm_handler</a>(<b>int</b> <a href='../Y/6757.html' title='Multiple used in 15 places.'>sig</a>)
<a name='L865'> 865 <font color='red'>{</font>
<a name='L866'> 866     <a href='../D/4936.html' title='Multiple defined in 12 places.'>PRINTF</a>("Got a SIGTERM signal\n");
<a name='L867'> 867 
<a name='L868'> 868     <a href='../S/952.html#L798' title='Defined at 798 in southbound/src/southbound.c.'>cleanup_sb</a>();
<a name='L869'> 869 
<a name='L870'> 870     <a href='../Y/2943.html' title='Multiple used in 74 places.'>exit</a>(0);
<a name='L871'> 871 <font color='red'>}</font>
<a name='L872'> 872 
<a name='L873'> 873 <i><font color='green'>/////////////////////////////////////////////////////////////////////</font></i>
<a name='L874'> 874 
<a name='L875'> 875 <i><font color='green'>/** \brief Function to print the Barista usage */</font></i>
<a name='L876'> 876 <b>static</b> <b>void</b> <a href='../R/4132.html' title='Multiple refered from 5 places.'>print_usage</a>(<b>char</b> *<a href='../Y/4631.html' title='Multiple used in 221 places.'>name</a>)
<a name='L877'> 877 <font color='red'>{</font>
<a name='L878'> 878     <a href='../D/4936.html' title='Multiple defined in 12 places.'>PRINTF</a>("Usage: %s -p [port number]\n", <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L879'> 879 <font color='red'>}</font>
<a name='L880'> 880 
<a name='L881'> 881 <i><font color='green'>/////////////////////////////////////////////////////////////////////</font></i>
<a name='L882'> 882 
<a name='L883'> 883 <i><font color='green'>/** \brief The main function of the external packet I/O engine */</font></i>
<a name='L884'> 884 <b>int</b> <a href='../R/3464.html' title='Multiple refered from 20 places.'>main</a>(<b>int</b> <a href='../Y/1465.html' title='Multiple used in 309 places.'>argc</a>, <b>char</b> **<a href='../Y/1474.html' title='Multiple used in 417 places.'>argv</a>)
<a name='L885'> 885 <font color='red'>{</font>
<a name='L886'> 886     <b>int</b> <a href='../Y/5495.html' title='Multiple used in 48 places.'>opt</a>;
<a name='L887'> 887     <b>char</b> <a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>[<a href='../D/6474.html' title='Multiple defined in 6 places.'>__CONF_SHORT_LEN</a>] = <font color='red'>{</font>0<font color='red'>}</font>;
<a name='L888'> 888 
<a name='L889'> 889     <b>if</b> (<a href='../Y/1465.html' title='Multiple used in 309 places.'>argc</a> == 1) <font color='red'>{</font>
<a name='L890'> 890         <a href='../Y/6924.html' title='Multiple used in 107 places.'>sprintf</a>(<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>, "%d", <a href='../Y/1125.html' title='Multiple used in 2 places.'>__DEFAULT_PORT</a>);
<a name='L891'> 891     <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/1465.html' title='Multiple used in 309 places.'>argc</a> &lt; 2 || <a href='../Y/1465.html' title='Multiple used in 309 places.'>argc</a> &gt; 3) <font color='red'>{</font>
<a name='L892'> 892         <a href='../D/9160.html' title='Multiple defined in 2 places.'>print_usage</a>(<a href='../Y/1474.html' title='Multiple used in 417 places.'>argv</a>[0]);
<a name='L893'> 893         <b>return</b> -1;
<a name='L894'> 894     <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L895'> 895         <b>while</b> ((<a href='../Y/5495.html' title='Multiple used in 48 places.'>opt</a> = <a href='../Y/3422.html' title='Multiple used in 5 places.'>getopt</a>(<a href='../Y/1465.html' title='Multiple used in 309 places.'>argc</a>, <a href='../Y/1474.html' title='Multiple used in 417 places.'>argv</a>, "p:")) != -1) <font color='red'>{</font>
<a name='L896'> 896             <b>switch</b> (<a href='../Y/5495.html' title='Multiple used in 48 places.'>opt</a>) <font color='red'>{</font>
<a name='L897'> 897             <b>case</b> 'p':
<a name='L898'> 898                 <b>if</b> (0 &lt; <a href='../Y/1510.html' title='Multiple used in 76 places.'>atoi</a>(<a href='../Y/5497.html' title='Multiple used in 99 places.'>optarg</a>) &amp;&amp; <a href='../Y/1510.html' title='Multiple used in 76 places.'>atoi</a>(<a href='../Y/5497.html' title='Multiple used in 99 places.'>optarg</a>) &lt; 65536) <font color='red'>{</font>
<a name='L899'> 899                     <a href='../Y/7083.html' title='Multiple used in 242 places.'>strcpy</a>(<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>, <a href='../Y/5497.html' title='Multiple used in 99 places.'>optarg</a>);
<a name='L900'> 900                 <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L901'> 901                     <a href='../D/9160.html' title='Multiple defined in 2 places.'>print_usage</a>(<a href='../Y/1474.html' title='Multiple used in 417 places.'>argv</a>[0]);
<a name='L902'> 902                     <b>return</b> -1;
<a name='L903'> 903                 <font color='red'>}</font>
<a name='L904'> 904                 <b>break</b>;
<a name='L905'> 905             <b>default</b>:
<a name='L906'> 906                 <a href='../D/9160.html' title='Multiple defined in 2 places.'>print_usage</a>(<a href='../Y/1474.html' title='Multiple used in 417 places.'>argv</a>[0]);
<a name='L907'> 907                 <b>return</b> -1;
<a name='L908'> 908             <font color='red'>}</font>
<a name='L909'> 909         <font color='red'>}</font>
<a name='L910'> 910     <font color='red'>}</font>
<a name='L911'> 911 
<a name='L912'> 912     <a href='../Y/6766.html' title='Multiple used in 10 places.'>sigint_func</a> = <a href='../S/871.html#L55' title='Defined at 55 in cbench/openflow/lib/signals.c.'>signal</a>(<a href='../Y/782.html' title='Multiple used in 7 places.'>SIGINT</a>, <a href='../D/9538.html' title='Multiple defined in 5 places.'>sigint_handler</a>);
<a name='L913'> 913     <a href='../Y/6767.html' title='Multiple used in 10 places.'>sigkill_func</a> = <a href='../S/871.html#L55' title='Defined at 55 in cbench/openflow/lib/signals.c.'>signal</a>(<a href='../Y/783.html' title='Multiple used in 8 places.'>SIGKILL</a>, <a href='../D/9539.html' title='Multiple defined in 5 places.'>sigkill_handler</a>);
<a name='L914'> 914     <a href='../Y/6778.html' title='Multiple used in 10 places.'>sigterm_func</a> = <a href='../S/871.html#L55' title='Defined at 55 in cbench/openflow/lib/signals.c.'>signal</a>(<a href='../Y/791.html' title='Multiple used in 8 places.'>SIGTERM</a>, <a href='../D/9547.html' title='Multiple defined in 5 places.'>sigterm_handler</a>);
<a name='L915'> 915 
<a name='L916'> 916     <a href='../D/10115.html' title='Multiple defined in 6 places.'>waitsec</a>(0, 1000);
<a name='L917'> 917 
<a name='L918'> 918     <a href='../S/952.html#L765' title='Defined at 765 in southbound/src/southbound.c.'>init_sb</a>(<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>);
<a name='L919'> 919 
<a name='L920'> 920     <a href='../D/10115.html' title='Multiple defined in 6 places.'>waitsec</a>(0, 1000);
<a name='L921'> 921 
<a name='L922'> 922     <a href='../D/9571.html' title='Multiple defined in 3 places.'>socket_listen</a>(<a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L923'> 923 
<a name='L924'> 924     <b>return</b> 0;
<a name='L925'> 925 <font color='red'>}</font>
<a name='L926'> 926 
<a name='L927'> 927 <i><font color='green'>/**</font></i>
<a name='L928'> 928 <i><font color='green'> * @}</font></i>
<a name='L929'> 929 <i><font color='green'> *</font></i>
<a name='L930'> 930 <i><font color='green'> * @}</font></i>
<a name='L931'> 931 <i><font color='green'> */</font></i>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L57'>[^]</a><a href='#L884'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
