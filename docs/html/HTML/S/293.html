<html>
<head>
<title>cbench/openflow/datapath/datapath.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/1100.html'>cbench</a>/<a href='../files/1124.html'>openflow</a>/<a href='../files/1126.html'>datapath</a>/datapath.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L132'>[^]</a><a href='#L2123'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L132' title='Defined at 132.'>nla_shrink</a>
<li><a href='#L153' title='Defined at 153.'>put_openflow_headers</a>
<li><a href='#L188' title='Defined at 188.'>resize_openflow_skb</a>
<li><a href='#L205' title='Defined at 205.'>alloc_openflow_skb</a>
<li><a href='#L238' title='Defined at 238.'>dp_mc_group</a>
<li><a href='#L246' title='Defined at 246.'>send_openflow_skb</a>
<li><a href='#L256' title='Defined at 256.'>get_datapath_id</a>
<li><a href='#L269' title='Defined at 269.'>gen_dp_idx</a>
<li><a href='#L285' title='Defined at 285.'>new_dp</a>
<li><a href='#L369' title='Defined at 369.'>find_portno</a>
<li><a href='#L379' title='Defined at 379.'>new_nbp</a>
<li><a href='#L407' title='Defined at 407.'>add_switch_port</a>
<li><a href='#L437' title='Defined at 437.'>dp_del_switch_port</a>
<li><a href='#L468' title='Defined at 468.'>del_dp</a>
<li><a href='#L500' title='Defined at 500.'>dp_maint_func</a>
<li><a href='#L518' title='Defined at 518.'>do_port_input</a>
<li><a href='#L540' title='Defined at 540.'>dp_frame_hook</a>
<li><a href='#L547' title='Defined at 547.'>dp_frame_hook</a>
<li><a href='#L557' title='Defined at 557.'>packet_length</a>
<li><a href='#L569' title='Defined at 569.'>output_all</a>
<li><a href='#L598' title='Defined at 598.'>dp_set_origin</a>
<li><a href='#L612' title='Defined at 612.'>dp_xmit_skb</a>
<li><a href='#L631' title='Defined at 631.'>dp_output_port</a>
<li><a href='#L709' title='Defined at 709.'>dp_output_control</a>
<li><a href='#L749' title='Defined at 749.'>fill_port_desc</a>
<li><a href='#L854' title='Defined at 854.'>fill_features_reply</a>
<li><a href='#L877' title='Defined at 877.'>dp_send_features_reply</a>
<li><a href='#L901' title='Defined at 901.'>dp_send_config_reply</a>
<li><a href='#L918' title='Defined at 918.'>dp_send_hello</a>
<li><a href='#L941' title='Defined at 941.'>dp_send_barrier_reply</a>
<li><a href='#L956' title='Defined at 956.'>dp_update_port_flags</a>
<li><a href='#L982' title='Defined at 982.'>init_port_status</a>
<li><a href='#L1002' title='Defined at 1002.'>dp_send_port_status</a>
<li><a href='#L1019' title='Defined at 1019.'>jiffies_64_to_secs</a>
<li><a href='#L1028' title='Defined at 1028.'>jiffies_64_to_nsecs</a>
<li><a href='#L1036' title='Defined at 1036.'>dp_send_flow_end</a>
<li><a href='#L1069' title='Defined at 1069.'>dp_send_error_msg</a>
<li><a href='#L1089' title='Defined at 1089.'>dp_send_echo_reply</a>
<li><a href='#L1127' title='Defined at 1127.'>dp_genl_add</a>
<li><a href='#L1152' title='Defined at 1152.'>dp_get_by_idx</a>
<li><a href='#L1161' title='Defined at 1161.'>dp_get_by_name</a>
<li><a href='#L1174' title='Defined at 1174.'>lookup_dp</a>
<li><a href='#L1200' title='Defined at 1200.'>dp_genl_del</a>
<li><a href='#L1234' title='Defined at 1234.'>dp_genl_query</a>
<li><a href='#L1279' title='Defined at 1279.'>dp_genl_add_del_port</a>
<li><a href='#L1342' title='Defined at 1342.'>dp_genl_openflow</a>
<li><a href='#L1376' title='Defined at 1376.'>desc_stats_dump</a>
<li><a href='#L1407' title='Defined at 1407.'>flow_stats_init</a>
<li><a href='#L1421' title='Defined at 1421.'>flow_stats_dump_callback</a>
<li><a href='#L1471' title='Defined at 1471.'>flow_stats_dump</a>
<li><a href='#L1515' title='Defined at 1515.'>flow_stats_done</a>
<li><a href='#L1520' title='Defined at 1520.'>aggregate_stats_init</a>
<li><a href='#L1528' title='Defined at 1528.'>aggregate_stats_dump_callback</a>
<li><a href='#L1537' title='Defined at 1537.'>aggregate_stats_dump</a>
<li><a href='#L1589' title='Defined at 1589.'>table_stats_dump</a>
<li><a href='#L1618' title='Defined at 1618.'>port_stats_init</a>
<li><a href='#L1634' title='Defined at 1634.'>dump_port_stats</a>
<li><a href='#L1660' title='Defined at 1660.'>lookup_port</a>
<li><a href='#L1668' title='Defined at 1668.'>port_stats_dump</a>
<li><a href='#L1713' title='Defined at 1713.'>port_stats_done</a>
<li><a href='#L1731' title='Defined at 1731.'>vendor_stats_init</a>
<li><a href='#L1746' title='Defined at 1746.'>vendor_stats_dump</a>
<li><a href='#L1761' title='Defined at 1761.'>vendor_stats_done</a>
<li><a href='#L1847' title='Defined at 1847.'>dp_genl_openflow_dumpit</a>
<li><a href='#L1971' title='Defined at 1971.'>dp_genl_openflow_done</a>
<li><a href='#L2008' title='Defined at 2008.'>dp_init_netlink</a>
<li><a href='#L2038' title='Defined at 2038.'>dp_uninit_netlink</a>
<li><a href='#L2045' title='Defined at 2045.'>set_desc</a>
<li><a href='#L2077' title='Defined at 2077.'>dp_init</a>
<li><a href='#L2123' title='Defined at 2123.'>dp_cleanup</a>
</ol>
<hr>
<pre>
<a name='L1'>   1 <i><font color='green'>/*</font></i>
<a name='L2'>   2 <i><font color='green'> * Distributed under the terms of the GNU GPL version 2.</font></i>
<a name='L3'>   3 <i><font color='green'> * Copyright (c) 2007, 2008, 2009 The Board of Trustees of The Leland </font></i>
<a name='L4'>   4 <i><font color='green'> * Stanford Junior University</font></i>
<a name='L5'>   5 <i><font color='green'> */</font></i>
<a name='L6'>   6 
<a name='L7'>   7 <i><font color='green'>/* Functions for managing the dp interface/device. */</font></i>
<a name='L8'>   8 
<a name='L9'>   9 <font color='darkred'>#include</font> &lt;linux/init.h&gt;
<a name='L10'>  10 <font color='darkred'>#include</font> &lt;linux/module.h&gt;
<a name='L11'>  11 <font color='darkred'>#include</font> &lt;<a href='312.html'>linux/if_arp.h</a>&gt;
<a name='L12'>  12 <font color='darkred'>#include</font> &lt;linux/if_bridge.h&gt;
<a name='L13'>  13 <font color='darkred'>#include</font> &lt;linux/if_vlan.h&gt;
<a name='L14'>  14 <font color='darkred'>#include</font> &lt;linux/in.h&gt;
<a name='L15'>  15 <font color='darkred'>#include</font> &lt;<a href='306.html'>net/genetlink.h</a>&gt;
<a name='L16'>  16 <font color='darkred'>#include</font> &lt;<a href='311.html'>linux/ip.h</a>&gt;
<a name='L17'>  17 <font color='darkred'>#include</font> &lt;linux/delay.h&gt;
<a name='L18'>  18 <font color='darkred'>#include</font> &lt;linux/time.h&gt;
<a name='L19'>  19 <font color='darkred'>#include</font> &lt;linux/etherdevice.h&gt;
<a name='L20'>  20 <font color='darkred'>#include</font> &lt;linux/kernel.h&gt;
<a name='L21'>  21 <font color='darkred'>#include</font> &lt;linux/kthread.h&gt;
<a name='L22'>  22 <font color='darkred'>#include</font> &lt;<a href='310.html'>linux/mutex.h</a>&gt;
<a name='L23'>  23 <font color='darkred'>#include</font> &lt;linux/rtnetlink.h&gt;
<a name='L24'>  24 <font color='darkred'>#include</font> &lt;linux/rcupdate.h&gt;
<a name='L25'>  25 <font color='darkred'>#include</font> &lt;linux/version.h&gt;
<a name='L26'>  26 <font color='darkred'>#include</font> &lt;linux/ethtool.h&gt;
<a name='L27'>  27 <font color='darkred'>#include</font> &lt;<a href='../I/129.html'>linux/random.h</a>&gt;
<a name='L28'>  28 <font color='darkred'>#include</font> &lt;linux/utsname.h&gt;
<a name='L29'>  29 <font color='darkred'>#include</font> &lt;asm/system.h&gt;
<a name='L30'>  30 <font color='darkred'>#include</font> &lt;asm/div64.h&gt;
<a name='L31'>  31 <font color='darkred'>#include</font> &lt;<a href='317.html'>linux/netfilter_bridge.h</a>&gt;
<a name='L32'>  32 <font color='darkred'>#include</font> &lt;<a href='325.html'>linux/netfilter_ipv4.h</a>&gt;
<a name='L33'>  33 <font color='darkred'>#include</font> &lt;linux/inetdevice.h&gt;
<a name='L34'>  34 <font color='darkred'>#include</font> &lt;<a href='916.html'>linux/list.h</a>&gt;
<a name='L35'>  35 <font color='darkred'>#include</font> &lt;<a href='323.html'>linux/rculist.h</a>&gt;
<a name='L36'>  36 <font color='darkred'>#include</font> &lt;<a href='308.html'>linux/workqueue.h</a>&gt;
<a name='L37'>  37 <font color='darkred'>#include</font> &lt;<a href='324.html'>linux/dmi.h</a>&gt;
<a name='L38'>  38 
<a name='L39'>  39 <font color='darkred'>#include</font> "<a href='186.html'>openflow/nicira-ext.h</a>"
<a name='L40'>  40 <font color='darkred'>#include</font> "<a href='184.html'>openflow/openflow-netlink.h</a>"
<a name='L41'>  41 <font color='darkred'>#include</font> "<a href='../I/91.html'>datapath.h</a>"
<a name='L42'>  42 <font color='darkred'>#include</font> "<a href='../I/148.html'>table.h</a>"
<a name='L43'>  43 <font color='darkred'>#include</font> "<a href='../I/86.html'>chain.h</a>"
<a name='L44'>  44 <font color='darkred'>#include</font> "<a href='296.html'>dp_dev.h</a>"
<a name='L45'>  45 <font color='darkred'>#include</font> "<a href='294.html'>forward.h</a>"
<a name='L46'>  46 <font color='darkred'>#include</font> "<a href='../I/98.html'>flow.h</a>"
<a name='L47'>  47 
<a name='L48'>  48 <font color='darkred'>#include</font> "<a href='289.html'>compat.h</a>"
<a name='L49'>  49 
<a name='L50'>  50 
<a name='L51'>  51 <i><font color='green'>/* Strings to describe the manufacturer, hardware, and software.  This data </font></i>
<a name='L52'>  52 <i><font color='green'> * is queriable through the switch description stats message. */</font></i>
<a name='L53'>  53 <b>static</b> <b>char</b> <a href='../Y/4440.html' title='Multiple used in 24 places.'>mfr_desc</a>[<a href='../D/1200.html' title='Multiple defined in 3 places.'>DESC_STR_LEN</a>] = "Stanford University";
<a name='L54'>  54 <b>static</b> <b>char</b> <a href='../Y/3683.html' title='Multiple used in 24 places.'>hw_desc</a>[<a href='../D/1200.html' title='Multiple defined in 3 places.'>DESC_STR_LEN</a>] = "Reference Kernelspace Switch";
<a name='L55'>  55 <b>static</b> <b>char</b> <a href='../Y/7176.html' title='Multiple used in 22 places.'>sw_desc</a>[<a href='../D/1200.html' title='Multiple defined in 3 places.'>DESC_STR_LEN</a>] = <a href='../D/5885.html' title='Multiple defined in 3 places.'>VERSION</a> <a href='../Y/140.html' title='Multiple used in 10 places.'>BUILDNR</a>;
<a name='L56'>  56 <b>static</b> <b>char</b> <a href='../Y/6673.html' title='Multiple used in 24 places.'>serial_num</a>[<a href='../D/5295.html' title='Multiple defined in 3 places.'>SERIAL_NUM_LEN</a>] = "None";
<a name='L57'>  57 
<a name='L58'>  58 module_param_string(<a href='../Y/4440.html' title='Multiple used in 24 places.'>mfr_desc</a>, <a href='../Y/4440.html' title='Multiple used in 24 places.'>mfr_desc</a>, <b>sizeof</b> <a href='../Y/4440.html' title='Multiple used in 24 places.'>mfr_desc</a>, 0444);
<a name='L59'>  59 module_param_string(<a href='../Y/3683.html' title='Multiple used in 24 places.'>hw_desc</a>, <a href='../Y/3683.html' title='Multiple used in 24 places.'>hw_desc</a>, <b>sizeof</b> <a href='../Y/3683.html' title='Multiple used in 24 places.'>hw_desc</a>, 0444);
<a name='L60'>  60 module_param_string(<a href='../Y/7176.html' title='Multiple used in 22 places.'>sw_desc</a>, <a href='../Y/7176.html' title='Multiple used in 22 places.'>sw_desc</a>, <b>sizeof</b> <a href='../Y/7176.html' title='Multiple used in 22 places.'>sw_desc</a>, 0444);
<a name='L61'>  61 module_param_string(<a href='../Y/6673.html' title='Multiple used in 24 places.'>serial_num</a>, <a href='../Y/6673.html' title='Multiple used in 24 places.'>serial_num</a>, <b>sizeof</b> <a href='../Y/6673.html' title='Multiple used in 24 places.'>serial_num</a>, 0444);
<a name='L62'>  62 
<a name='L63'>  63 <b>int</b> (*<a href='../Y/2524.html' title='Multiple used in 5 places.'>dp_ioctl_hook</a>)(<b>struct</b> <a href='../Y/4699.html' title='Multiple used in 110 places.'>net_device</a> *<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>, <b>struct</b> <a href='../Y/3750.html' title='Multiple used in 47 places.'>ifreq</a> *<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>, <b>int</b> <a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a>);
<a name='L64'>  64 EXPORT_SYMBOL(<a href='../Y/2524.html' title='Multiple used in 5 places.'>dp_ioctl_hook</a>);
<a name='L65'>  65 
<a name='L66'>  66 <b>int</b> (*<a href='../Y/2501.html' title='Multiple used in 6 places.'>dp_add_dp_hook</a>)(<b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L67'>  67 EXPORT_SYMBOL(<a href='../Y/2501.html' title='Multiple used in 6 places.'>dp_add_dp_hook</a>);
<a name='L68'>  68 
<a name='L69'>  69 <b>int</b> (*<a href='../Y/2504.html' title='Multiple used in 6 places.'>dp_del_dp_hook</a>)(<b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L70'>  70 EXPORT_SYMBOL(<a href='../Y/2504.html' title='Multiple used in 6 places.'>dp_del_dp_hook</a>);
<a name='L71'>  71 
<a name='L72'>  72 <b>int</b> (*<a href='../Y/2502.html' title='Multiple used in 6 places.'>dp_add_if_hook</a>)(<b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L73'>  73 EXPORT_SYMBOL(<a href='../Y/2502.html' title='Multiple used in 6 places.'>dp_add_if_hook</a>);
<a name='L74'>  74 
<a name='L75'>  75 <b>int</b> (*<a href='../Y/2505.html' title='Multiple used in 7 places.'>dp_del_if_hook</a>)(<b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L76'>  76 EXPORT_SYMBOL(<a href='../Y/2505.html' title='Multiple used in 7 places.'>dp_del_if_hook</a>);
<a name='L77'>  77 
<a name='L78'>  78 <i><font color='green'>/* Number of milliseconds between runs of the maintenance thread. */</font></i>
<a name='L79'>  79 <font color='darkred'>#define</font> <a href='../S/293.html#L508' title='Refered from 508 in cbench/openflow/datapath/datapath.c.'>MAINT_SLEEP_MSECS</a> 1000
<a name='L80'>  80 
<a name='L81'>  81 <b>static</b> <b>struct</b> <a href='../Y/3327.html' title='Multiple used in 7 places.'>genl_family</a> <a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a>;
<a name='L82'>  82 
<a name='L83'>  83 <i><font color='green'>/*</font></i>
<a name='L84'>  84 <i><font color='green'> * Datapath multicast groups.</font></i>
<a name='L85'>  85 <i><font color='green'> *</font></i>
<a name='L86'>  86 <i><font color='green'> * Really we want one multicast group per in-use datapath (or even more than</font></i>
<a name='L87'>  87 <i><font color='green'> * one).  Locking issues, however, mean that we can't allocate a multicast</font></i>
<a name='L88'>  88 <i><font color='green'> * group at the point in the code where we we actually create a datapath[*], so</font></i>
<a name='L89'>  89 <i><font color='green'> * we have to pre-allocate them.  It's massive overkill to allocate DP_MAX of</font></i>
<a name='L90'>  90 <i><font color='green'> * them in advance, since we will hardly ever actually create DP_MAX datapaths,</font></i>
<a name='L91'>  91 <i><font color='green'> * so instead we allocate a few multicast groups at startup and choose one for</font></i>
<a name='L92'>  92 <i><font color='green'> * each datapath by hashing its datapath index.</font></i>
<a name='L93'>  93 <i><font color='green'> *</font></i>
<a name='L94'>  94 <i><font color='green'> * [*] dp_genl_add, to add a new datapath, is called under the genl_lock</font></i>
<a name='L95'>  95 <i><font color='green'> *       mutex, and genl_register_mc_group, called to acquire a new multicast</font></i>
<a name='L96'>  96 <i><font color='green'> *       group ID, also acquires genl_lock, thus deadlock.</font></i>
<a name='L97'>  97 <i><font color='green'> */</font></i>
<a name='L98'>  98 <font color='darkred'>#define</font> <a href='../R/1030.html' title='Multiple refered from 3 places.'>N_MC_GROUPS</a> 16          <i><font color='green'>/* Must be power of 2. */</font></i>
<a name='L99'>  99 <b>static</b> <b>struct</b> <a href='../S/306.html#L27' title='Defined at 27 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/net/genetlink.h.'>genl_multicast_group</a> <a href='../Y/4403.html' title='Multiple used in 4 places.'>mc_groups</a>[<a href='../S/293.html#L98' title='Defined at 98 in cbench/openflow/datapath/datapath.c.'>N_MC_GROUPS</a>];
<a name='L100'> 100 
<a name='L101'> 101 <i><font color='green'>/* Datapaths.  Protected on the read side by rcu_read_lock, on the write side</font></i>
<a name='L102'> 102 <i><font color='green'> * by dp_mutex.  dp_mutex is almost completely redundant with genl_mutex</font></i>
<a name='L103'> 103 <i><font color='green'> * maintained by the Generic Netlink code, but the timeout path needs mutual</font></i>
<a name='L104'> 104 <i><font color='green'> * exclusion too.</font></i>
<a name='L105'> 105 <i><font color='green'> *</font></i>
<a name='L106'> 106 <i><font color='green'> * dp_mutex nests inside the RTNL lock: if you need both you must take the RTNL</font></i>
<a name='L107'> 107 <i><font color='green'> * lock first.</font></i>
<a name='L108'> 108 <i><font color='green'> *</font></i>
<a name='L109'> 109 <i><font color='green'> * It is safe to access the datapath and net_bridge_port structures with just</font></i>
<a name='L110'> 110 <i><font color='green'> * dp_mutex.</font></i>
<a name='L111'> 111 <i><font color='green'> */</font></i>
<a name='L112'> 112 <b>static</b> <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2540.html' title='Multiple used in 7 places.'>dps</a>[<a href='../S/184.html#L67' title='Defined at 67 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_MAX</a>];
<a name='L113'> 113 <a href='../S/310.html#L20' title='Defined at 20 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>DEFINE_MUTEX</a>(<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L114'> 114 EXPORT_SYMBOL(<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L115'> 115 
<a name='L116'> 116 <b>static</b> <b>int</b> <a href='../S/293.html#L500' title='Defined at 500 in cbench/openflow/datapath/datapath.c.'>dp_maint_func</a>(<b>void</b> *<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>);
<a name='L117'> 117 <b>static</b> <b>void</b> <a href='../S/293.html#L982' title='Defined at 982 in cbench/openflow/datapath/datapath.c.'>init_port_status</a>(<b>struct</b> <a href='../Y/4698.html' title='Multiple used in 15 places.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L118'> 118 <b>static</b> <b>int</b> <a href='../S/293.html#L1971' title='Defined at 1971 in cbench/openflow/datapath/datapath.c.'>dp_genl_openflow_done</a>(<b>struct</b> <a href='../Y/4733.html' title='Multiple used in 3 places.'>netlink_callback</a> *);
<a name='L119'> 119 <b>static</b> <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../S/293.html#L379' title='Defined at 379 in cbench/openflow/datapath/datapath.c.'>new_nbp</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *,
<a name='L120'> 120                                        <b>struct</b> <a href='../Y/4699.html' title='Multiple used in 110 places.'>net_device</a> *, <b>int</b> <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>);
<a name='L121'> 121 
<a name='L122'> 122 <i><font color='green'>/* nla_shrink - reduce amount of space reserved by nla_reserve</font></i>
<a name='L123'> 123 <i><font color='green'> * @skb: socket buffer from which to recover room</font></i>
<a name='L124'> 124 <i><font color='green'> * @nla: netlink attribute to adjust</font></i>
<a name='L125'> 125 <i><font color='green'> * @len: new length of attribute payload</font></i>
<a name='L126'> 126 <i><font color='green'> *</font></i>
<a name='L127'> 127 <i><font color='green'> * Reduces amount of space reserved by a call to nla_reserve.</font></i>
<a name='L128'> 128 <i><font color='green'> *</font></i>
<a name='L129'> 129 <i><font color='green'> * No other attributes may be added between calling nla_reserve and this</font></i>
<a name='L130'> 130 <i><font color='green'> * function, since it will create a hole in the message.</font></i>
<a name='L131'> 131 <i><font color='green'> */</font></i>
<a name='L132'> 132 <b>void</b> <a href='../S/293.html#L192' title='Refered from 192 in cbench/openflow/datapath/datapath.c.'>nla_shrink</a>(<b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>struct</b> <a href='../Y/4897.html' title='Multiple used in 24 places.'>nlattr</a> *<a href='../Y/4884.html' title='Multiple used in 46 places.'>nla</a>, <b>int</b> <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>)
<a name='L133'> 133 <font color='red'>{</font>
<a name='L134'> 134         <b>int</b> <a href='../Y/2325.html' title='Multiple used in 13 places.'>delta</a> = <a href='../Y/4895.html' title='Multiple used in 3 places.'>nla_total_size</a>(<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>) - <a href='../Y/4895.html' title='Multiple used in 3 places.'>nla_total_size</a>(<a href='../Y/4889.html' title='Multiple used in 22 places.'>nla_len</a>(<a href='../Y/4884.html' title='Multiple used in 46 places.'>nla</a>));
<a name='L135'> 135         <a href='../Y/139.html' title='Multiple used in 6 places.'>BUG_ON</a>(<a href='../Y/2325.html' title='Multiple used in 13 places.'>delta</a> &gt; 0);
<a name='L136'> 136         <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/7239.html' title='Multiple used in 214 places.'>tail</a> += <a href='../Y/2325.html' title='Multiple used in 13 places.'>delta</a>;
<a name='L137'> 137         <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>  += <a href='../Y/2325.html' title='Multiple used in 13 places.'>delta</a>;
<a name='L138'> 138         <a href='../Y/4884.html' title='Multiple used in 46 places.'>nla</a>-&gt;<a href='../Y/4889.html' title='Multiple used in 22 places.'>nla_len</a> = nla_attr_size(<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>);
<a name='L139'> 139 <font color='red'>}</font>
<a name='L140'> 140 
<a name='L141'> 141 <i><font color='green'>/* Puts a set of openflow headers for a message of the given 'type' into 'skb'.</font></i>
<a name='L142'> 142 <i><font color='green'> * If 'sender' is nonnull, then it is used as the message's destination.  'dp'</font></i>
<a name='L143'> 143 <i><font color='green'> * must specify the datapath to use.</font></i>
<a name='L144'> 144 <i><font color='green'> *</font></i>
<a name='L145'> 145 <i><font color='green'> * '*max_openflow_len' receives the maximum number of bytes that are available</font></i>
<a name='L146'> 146 <i><font color='green'> * for the embedded OpenFlow message.  The caller must call</font></i>
<a name='L147'> 147 <i><font color='green'> * resize_openflow_skb() to set the actual size of the message to this number</font></i>
<a name='L148'> 148 <i><font color='green'> * of bytes or less.</font></i>
<a name='L149'> 149 <i><font color='green'> *</font></i>
<a name='L150'> 150 <i><font color='green'> * Returns the openflow header if successful, otherwise (if 'skb' is too small)</font></i>
<a name='L151'> 151 <i><font color='green'> * an error code. */</font></i>
<a name='L152'> 152 <b>static</b> <b>void</b> *
<a name='L153'> 153 <a href='../R/4215.html' title='Multiple refered from 2 places.'>put_openflow_headers</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>,
<a name='L154'> 154                      <b>const</b> <b>struct</b> <a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a> *<a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a>, <b>int</b> *<a href='../Y/4379.html' title='Multiple used in 8 places.'>max_openflow_len</a>)
<a name='L155'> 155 <font color='red'>{</font>
<a name='L156'> 156         <b>struct</b> <a href='../D/8801.html' title='Multiple defined in 3 places.'>ofp_header</a> *<a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>;
<a name='L157'> 157         <b>struct</b> <a href='../S/867.html#L108' title='Defined at 108 in cbench/openflow/lib/netlink-protocol.h.'>nlattr</a> *<a href='../Y/1518.html' title='Multiple used in 19 places.'>attr</a>;
<a name='L158'> 158         <b>int</b> <a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a>;
<a name='L159'> 159 
<a name='L160'> 160         <i><font color='green'>/* Assemble the Generic Netlink wrapper. */</font></i>
<a name='L161'> 161         <b>if</b> (!<a href='../S/306.html#L80' title='Defined at 80 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/net/genetlink.h.'>genlmsg_put</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>,
<a name='L162'> 162                          <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a> ? <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>-&gt;<a href='../Y/5731.html' title='Multiple used in 85 places.'>pid</a> : 0,
<a name='L163'> 163                          <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a> ? <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>-&gt;<a href='../Y/6669.html' title='Multiple used in 19 places.'>seq</a> : 0,
<a name='L164'> 164                          &amp;<a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a>, 0, <a href='../S/184.html#L60' title='Defined at 60 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_C_OPENFLOW</a>))
<a name='L165'> 165                 <b>return</b> <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/273.html' title='Multiple used in 24 places.'>ENOBUFS</a>);
<a name='L166'> 166         <b>if</b> (nla_put_u32(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>, <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>) &lt; 0)
<a name='L167'> 167                 <b>return</b> <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/273.html' title='Multiple used in 24 places.'>ENOBUFS</a>);
<a name='L168'> 168         <a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a> = (skb_tailroom(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>) - <a href='../S/867.html#L116' title='Defined at 116 in cbench/openflow/lib/netlink-protocol.h.'>NLA_HDRLEN</a>) &amp; ~(<a href='../S/867.html#L114' title='Defined at 114 in cbench/openflow/lib/netlink-protocol.h.'>NLA_ALIGNTO</a> - 1);
<a name='L169'> 169         <b>if</b> (<a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a> &lt; <b>sizeof</b> *<a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>)
<a name='L170'> 170                 <b>return</b> <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/273.html' title='Multiple used in 24 places.'>ENOBUFS</a>);
<a name='L171'> 171         *<a href='../Y/4379.html' title='Multiple used in 8 places.'>max_openflow_len</a> = <a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a>;
<a name='L172'> 172         <a href='../Y/1518.html' title='Multiple used in 19 places.'>attr</a> = nla_reserve(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../S/184.html#L45' title='Defined at 45 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_OPENFLOW</a>, <a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a>);
<a name='L173'> 173         <a href='../Y/139.html' title='Multiple used in 6 places.'>BUG_ON</a>(!<a href='../Y/1518.html' title='Multiple used in 19 places.'>attr</a>);
<a name='L174'> 174 
<a name='L175'> 175         <i><font color='green'>/* Fill in the header.  The caller is responsible for the length. */</font></i>
<a name='L176'> 176         <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a> = <a href='../Y/4886.html' title='Multiple used in 8 places.'>nla_data</a>(<a href='../Y/1518.html' title='Multiple used in 19 places.'>attr</a>);
<a name='L177'> 177         <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>-&gt;<a href='../Y/7770.html' title='Multiple used in 173 places.'>version</a> = <a href='../Y/621.html' title='Multiple used in 78 places.'>OFP_VERSION</a>;
<a name='L178'> 178         <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>-&gt;<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>;
<a name='L179'> 179         <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>-&gt;<a href='../Y/7997.html' title='Multiple used in 182 places.'>xid</a> = <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a> ? <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>-&gt;<a href='../Y/7997.html' title='Multiple used in 182 places.'>xid</a> : 0;
<a name='L180'> 180 
<a name='L181'> 181         <b>return</b> <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>;
<a name='L182'> 182 <font color='red'>}</font>
<a name='L183'> 183 
<a name='L184'> 184 <i><font color='green'>/* Resizes OpenFlow header 'oh', which must be at the tail end of 'skb', to new</font></i>
<a name='L185'> 185 <i><font color='green'> * length 'new_length' (in bytes), adjusting pointers and size values as</font></i>
<a name='L186'> 186 <i><font color='green'> * necessary. */</font></i>
<a name='L187'> 187 <b>static</b> <b>void</b>
<a name='L188'> 188 <a href='../R/4370.html' title='Multiple refered from 4 places.'>resize_openflow_skb</a>(<b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>,
<a name='L189'> 189                     <b>struct</b> <a href='../Y/5176.html' title='Multiple used in 54 places.'>ofp_header</a> *<a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>, <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/4762.html' title='Multiple used in 8 places.'>new_length</a>)
<a name='L190'> 190 <font color='red'>{</font>
<a name='L191'> 191         <b>struct</b> <a href='../S/867.html#L108' title='Defined at 108 in cbench/openflow/lib/netlink-protocol.h.'>nlattr</a> *<a href='../Y/1518.html' title='Multiple used in 19 places.'>attr</a> = ((<b>void</b> *) <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>) - <a href='../S/867.html#L116' title='Defined at 116 in cbench/openflow/lib/netlink-protocol.h.'>NLA_HDRLEN</a>;
<a name='L192'> 192         <a href='../S/293.html#L132' title='Defined at 132 in cbench/openflow/datapath/datapath.c.'>nla_shrink</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/1518.html' title='Multiple used in 19 places.'>attr</a>, <a href='../Y/4762.html' title='Multiple used in 8 places.'>new_length</a>);
<a name='L193'> 193         <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>-&gt;<a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/4762.html' title='Multiple used in 8 places.'>new_length</a>);
<a name='L194'> 194         nlmsg_end(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, (<b>struct</b> <a href='../S/867.html#L75' title='Defined at 75 in cbench/openflow/lib/netlink-protocol.h.'>nlmsghdr</a> *) <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>);
<a name='L195'> 195 <font color='red'>}</font>
<a name='L196'> 196 
<a name='L197'> 197 <i><font color='green'>/* Allocates a new skb to contain an OpenFlow message 'openflow_len' bytes in</font></i>
<a name='L198'> 198 <i><font color='green'> * length.  Returns a null pointer if memory is unavailable, otherwise returns</font></i>
<a name='L199'> 199 <i><font color='green'> * the OpenFlow header and stores a pointer to the skb in '*pskb'. </font></i>
<a name='L200'> 200 <i><font color='green'> *</font></i>
<a name='L201'> 201 <i><font color='green'> * 'type' is the OpenFlow message type.  If 'sender' is nonnull, then it is</font></i>
<a name='L202'> 202 <i><font color='green'> * used as the message's destination.  'dp' must specify the datapath to</font></i>
<a name='L203'> 203 <i><font color='green'> * use.  */</font></i>
<a name='L204'> 204 <b>static</b> <b>void</b> *
<a name='L205'> 205 <a href='../R/2181.html' title='Multiple refered from 9 places.'>alloc_openflow_skb</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a>, <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>,
<a name='L206'> 206                    <b>const</b> <b>struct</b> <a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a> *<a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a>, <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> **<a href='../Y/6116.html' title='Multiple used in 8 places.'>pskb</a>) 
<a name='L207'> 207 <font color='red'>{</font>
<a name='L208'> 208         <b>struct</b> <a href='../D/8801.html' title='Multiple defined in 3 places.'>ofp_header</a> *<a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>;
<a name='L209'> 209         <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/3329.html' title='Multiple used in 5 places.'>genl_len</a>;
<a name='L210'> 210         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>;
<a name='L211'> 211         <b>int</b> <a href='../Y/4379.html' title='Multiple used in 8 places.'>max_openflow_len</a>;
<a name='L212'> 212 
<a name='L213'> 213         <b>if</b> ((<a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a> + <b>sizeof</b>(<b>struct</b> <a href='../D/8801.html' title='Multiple defined in 3 places.'>ofp_header</a>)) &gt; <a href='../S/294.html#L24' title='Defined at 24 in cbench/openflow/datapath/forward.h.'>UINT16_MAX</a>) <font color='red'>{</font>
<a name='L214'> 214                 <b>if</b> (<a href='../Y/4706.html' title='Multiple used in 10 places.'>net_ratelimit</a>())
<a name='L215'> 215                         <a href='../Y/5907.html' title='Multiple used in 27 places.'>printk</a>(<a href='../Y/482.html' title='Multiple used in 3 places.'>KERN_ERR</a> "%s: alloc_openflow_skb: openflow "
<a name='L216'> 216                                "message too large: %zu\n",
<a name='L217'> 217                                <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a>);
<a name='L218'> 218                 <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L219'> 219         <font color='red'>}</font>
<a name='L220'> 220 
<a name='L221'> 221         <a href='../Y/3329.html' title='Multiple used in 5 places.'>genl_len</a> = nlmsg_total_size(<a href='../S/867.html#L106' title='Defined at 106 in cbench/openflow/lib/netlink-protocol.h.'>GENL_HDRLEN</a> + <a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a>.<a href='../Y/3590.html' title='Multiple used in 3 places.'>hdrsize</a>);
<a name='L222'> 222         <a href='../Y/3329.html' title='Multiple used in 5 places.'>genl_len</a> += <a href='../Y/4895.html' title='Multiple used in 3 places.'>nla_total_size</a>(<b>sizeof</b>(<a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a>)); <i><font color='green'>/* DP_GENL_A_DP_IDX */</font></i>
<a name='L223'> 223         <a href='../Y/3329.html' title='Multiple used in 5 places.'>genl_len</a> += <a href='../Y/4895.html' title='Multiple used in 3 places.'>nla_total_size</a>(<a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a>);    <i><font color='green'>/* DP_GENL_A_OPENFLOW */</font></i>
<a name='L224'> 224         <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a> = *<a href='../Y/6116.html' title='Multiple used in 8 places.'>pskb</a> = <a href='../S/306.html#L117' title='Defined at 117 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/net/genetlink.h.'>genlmsg_new</a>(<a href='../Y/3329.html' title='Multiple used in 5 places.'>genl_len</a>, <a href='../Y/378.html' title='Multiple used in 20 places.'>GFP_ATOMIC</a>);
<a name='L225'> 225         <b>if</b> (!<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>) <font color='red'>{</font>
<a name='L226'> 226                 <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L227'> 227         <font color='red'>}</font>
<a name='L228'> 228 
<a name='L229'> 229         <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a> = <a href='../S/293.html#L153' title='Defined at 153 in cbench/openflow/datapath/datapath.c.'>put_openflow_headers</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>, &amp;<a href='../Y/4379.html' title='Multiple used in 8 places.'>max_openflow_len</a>);
<a name='L230'> 230         <a href='../Y/139.html' title='Multiple used in 6 places.'>BUG_ON</a>(!<a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a> || <a href='../Y/473.html' title='Multiple used in 8 places.'>IS_ERR</a>(<a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>));
<a name='L231'> 231         <a href='../S/293.html#L188' title='Defined at 188 in cbench/openflow/datapath/datapath.c.'>resize_openflow_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>, <a href='../Y/5475.html' title='Multiple used in 30 places.'>openflow_len</a>);
<a name='L232'> 232 
<a name='L233'> 233         <b>return</b> <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>;
<a name='L234'> 234 <font color='red'>}</font>
<a name='L235'> 235 
<a name='L236'> 236 <i><font color='green'>/* Returns the ID of the multicast group used by datapath 'dp'. */</font></i>
<a name='L237'> 237 <b>static</b> <a href='../S/851.html#L52' title='Defined at 52 in cbench/openflow/lib/netdev.c.'>u32</a>
<a name='L238'> 238 <a href='../R/2798.html' title='Multiple refered from 2 places.'>dp_mc_group</a>(<b>const</b> <b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>)
<a name='L239'> 239 <font color='red'>{</font>
<a name='L240'> 240         <b>return</b> <a href='../Y/4403.html' title='Multiple used in 4 places.'>mc_groups</a>[<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> &amp; (<a href='../S/293.html#L98' title='Defined at 98 in cbench/openflow/datapath/datapath.c.'>N_MC_GROUPS</a> - 1)].<a href='../Y/3709.html' title='Multiple used in 808 places.'>id</a>;
<a name='L241'> 241 <font color='red'>}</font>
<a name='L242'> 242 
<a name='L243'> 243 <i><font color='green'>/* Sends 'skb' to 'sender' if it is nonnull, otherwise multicasts 'skb' to all</font></i>
<a name='L244'> 244 <i><font color='green'> * listeners. */</font></i>
<a name='L245'> 245 <b>static</b> <b>int</b>
<a name='L246'> 246 <a href='../R/4413.html' title='Multiple refered from 9 places.'>send_openflow_skb</a>(<b>const</b> <b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>,
<a name='L247'> 247                   <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>const</b> <b>struct</b> <a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a> *<a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a>)
<a name='L248'> 248 <font color='red'>{</font>
<a name='L249'> 249         <b>return</b> (<a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>
<a name='L250'> 250                 ? <a href='../Y/3338.html' title='Multiple used in 2 places.'>genlmsg_unicast</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>-&gt;<a href='../Y/5731.html' title='Multiple used in 85 places.'>pid</a>)
<a name='L251'> 251                 : <a href='../S/306.html#L59' title='Defined at 59 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/net/genetlink.h.'>genlmsg_multicast</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, 0, <a href='../S/293.html#L238' title='Defined at 238 in cbench/openflow/datapath/datapath.c.'>dp_mc_group</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>), <a href='../Y/378.html' title='Multiple used in 20 places.'>GFP_ATOMIC</a>));
<a name='L252'> 252 <font color='red'>}</font>
<a name='L253'> 253 
<a name='L254'> 254 <i><font color='green'>/* Retrieves the datapath id, which is the MAC address of the "of" device. */</font></i>
<a name='L255'> 255 <b>static</b> 
<a name='L256'> 256 <a href='../Y/7623.html' title='Multiple used in 568 places.'>uint64_t</a> <a href='../S/293.html#L857' title='Refered from 857 in cbench/openflow/datapath/datapath.c.'>get_datapath_id</a>(<b>struct</b> <a href='../Y/4699.html' title='Multiple used in 110 places.'>net_device</a> *<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>)
<a name='L257'> 257 <font color='red'>{</font>
<a name='L258'> 258         <a href='../Y/7623.html' title='Multiple used in 568 places.'>uint64_t</a> <a href='../Y/3709.html' title='Multiple used in 808 places.'>id</a> = 0;
<a name='L259'> 259         <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L260'> 260 
<a name='L261'> 261         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>&lt;<a href='../D/1677.html' title='Multiple defined in 6 places.'>ETH_ALEN</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) 
<a name='L262'> 262                 <a href='../Y/3709.html' title='Multiple used in 808 places.'>id</a> |= (<a href='../Y/7623.html' title='Multiple used in 568 places.'>uint64_t</a>)<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/2360.html' title='Multiple used in 10 places.'>dev_addr</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>] &lt;&lt; (8*(<a href='../D/1677.html' title='Multiple defined in 6 places.'>ETH_ALEN</a>-1 - <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>));
<a name='L263'> 263 
<a name='L264'> 264         <b>return</b> <a href='../Y/3709.html' title='Multiple used in 808 places.'>id</a>;
<a name='L265'> 265 <font color='red'>}</font>
<a name='L266'> 266 
<a name='L267'> 267 <i><font color='green'>/* Find the first free datapath index.  Return the index or -1 if a free</font></i>
<a name='L268'> 268 <i><font color='green'> * index could not be found. */</font></i>
<a name='L269'> 269 <b>int</b> <a href='../S/293.html#L294' title='Refered from 294 in cbench/openflow/datapath/datapath.c.'>gen_dp_idx</a>(<b>void</b>)
<a name='L270'> 270 <font color='red'>{</font>
<a name='L271'> 271         <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L272'> 272 
<a name='L273'> 273         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>&lt;<a href='../S/184.html#L67' title='Defined at 67 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_MAX</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L274'> 274                 <b>if</b> (!<a href='../Y/2540.html' title='Multiple used in 7 places.'>dps</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>])
<a name='L275'> 275                         <b>return</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L276'> 276         <font color='red'>}</font>
<a name='L277'> 277 
<a name='L278'> 278         <b>return</b> -1;
<a name='L279'> 279 <font color='red'>}</font>
<a name='L280'> 280 
<a name='L281'> 281 <i><font color='green'>/* Creates a new datapath numbered 'dp_idx'.  If 'dp_idx' is -1, it</font></i>
<a name='L282'> 282 <i><font color='green'> * allocates the lowest numbered index available.  If 'dp_name' is not </font></i>
<a name='L283'> 283 <i><font color='green'> * null, it is used as the device name instead of the default one.  </font></i>
<a name='L284'> 284 <i><font color='green'> * Returns 0 for success or a negative error code. */</font></i>
<a name='L285'> 285 <b>static</b> <b>int</b> <a href='../S/293.html#L1140' title='Refered from 1140 in cbench/openflow/datapath/datapath.c.'>new_dp</a>(<b>int</b> <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>, <b>const</b> <b>char</b> *<a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a>)
<a name='L286'> 286 <font color='red'>{</font>
<a name='L287'> 287         <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L288'> 288         <b>struct</b> new_utsname *<a href='../Y/7563.html' title='Multiple used in 46 places.'>u</a>;
<a name='L289'> 289         <b>int</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L290'> 290 
<a name='L291'> 291         <a href='../Y/6492.html' title='Multiple used in 5 places.'>rtnl_lock</a>();
<a name='L292'> 292         <a href='../S/310.html#L27' title='Defined at 27 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>mutex_lock</a>(&amp;<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L293'> 293         <b>if</b> (<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> == -1) 
<a name='L294'> 294                 <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> = <a href='../S/293.html#L269' title='Defined at 269 in cbench/openflow/datapath/datapath.c.'>gen_dp_idx</a>();
<a name='L295'> 295 
<a name='L296'> 296         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L297'> 297         <b>if</b> (<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> &lt; 0 || <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> &gt;= <a href='../S/184.html#L67' title='Defined at 67 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_MAX</a>)
<a name='L298'> 298                 <b>goto</b> <a href='../Y/2755.html' title='Multiple used in 3 places.'>err_unlock</a>;
<a name='L299'> 299 
<a name='L300'> 300         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -<a href='../Y/274.html' title='Multiple used in 4 places.'>ENODEV</a>;
<a name='L301'> 301         <b>if</b> (!<a href='../Y/7491.html' title='Multiple used in 2 places.'>try_module_get</a>(<a href='../D/5583.html' title='Multiple defined in 45 places.'>THIS_MODULE</a>))
<a name='L302'> 302                 <b>goto</b> <a href='../Y/2755.html' title='Multiple used in 3 places.'>err_unlock</a>;
<a name='L303'> 303 
<a name='L304'> 304         <i><font color='green'>/* Exit early if a datapath with that number already exists. */</font></i>
<a name='L305'> 305         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -EEXIST;
<a name='L306'> 306         <b>if</b> (<a href='../Y/2540.html' title='Multiple used in 7 places.'>dps</a>[<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>])
<a name='L307'> 307                 <b>goto</b> <a href='../Y/2752.html' title='Multiple used in 3 places.'>err_put</a>;
<a name='L308'> 308 
<a name='L309'> 309         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L310'> 310         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../Y/4032.html' title='Multiple used in 15 places.'>kzalloc</a>(<b>sizeof</b> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/379.html' title='Multiple used in 13 places.'>GFP_KERNEL</a>);
<a name='L311'> 311         <b>if</b> (<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> == <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>)
<a name='L312'> 312                 <b>goto</b> <a href='../Y/2752.html' title='Multiple used in 3 places.'>err_put</a>;
<a name='L313'> 313 
<a name='L314'> 314         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> = <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>;
<a name='L315'> 315         <i><font color='green'>/* copied from sys_gethostname() */</font></i>
<a name='L316'> 316         <a href='../Y/7563.html' title='Multiple used in 46 places.'>u</a> = utsname();
<a name='L317'> 317         <i><font color='green'>/* shouldn't need to lock b/c no userspace interactions */</font></i>
<a name='L318'> 318         <a href='../Y/6891.html' title='Multiple used in 224 places.'>snprintf</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2506.html' title='Multiple used in 33 places.'>dp_desc</a>, <b>sizeof</b> <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2506.html' title='Multiple used in 33 places.'>dp_desc</a>, "%s idx=%d", <a href='../Y/7563.html' title='Multiple used in 46 places.'>u</a>-&gt;nodename, <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>);
<a name='L319'> 319 
<a name='L320'> 320         <i><font color='green'>/* Setup our datapath device */</font></i>
<a name='L321'> 321         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../S/281.html#L201' title='Defined at 201 in cbench/openflow/datapath/dp_dev.c.'>dp_dev_setup</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a>);
<a name='L322'> 322         <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>)
<a name='L323'> 323                 <b>goto</b> <a href='../Y/2745.html' title='Multiple used in 2 places.'>err_free_dp</a>;
<a name='L324'> 324 
<a name='L325'> 325         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a> = <a href='../D/7042.html' title='Multiple defined in 2 places.'>chain_create</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L326'> 326         <b>if</b> (<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a> == <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>)
<a name='L327'> 327                 <b>goto</b> <a href='../Y/2742.html' title='Multiple used in 2 places.'>err_destroy_dp_dev</a>;
<a name='L328'> 328         <a href='../Y/458.html' title='Multiple used in 11 places.'>INIT_LIST_HEAD</a>(&amp;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5817.html' title='Multiple used in 29 places.'>port_list</a>);
<a name='L329'> 329 
<a name='L330'> 330         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4196.html' title='Multiple used in 23 places.'>local_port</a> = <a href='../S/293.html#L379' title='Defined at 379 in cbench/openflow/datapath/datapath.c.'>new_nbp</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>, <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a>);
<a name='L331'> 331         <b>if</b> (<a href='../Y/473.html' title='Multiple used in 8 places.'>IS_ERR</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4196.html' title='Multiple used in 23 places.'>local_port</a>)) <font color='red'>{</font>
<a name='L332'> 332                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../Y/712.html' title='Multiple used in 6 places.'>PTR_ERR</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4196.html' title='Multiple used in 23 places.'>local_port</a>);
<a name='L333'> 333                 <b>goto</b> <a href='../Y/2743.html' title='Multiple used in 2 places.'>err_destroy_local_port</a>;
<a name='L334'> 334         <font color='red'>}</font>
<a name='L335'> 335 
<a name='L336'> 336         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = 0;
<a name='L337'> 337         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4473.html' title='Multiple used in 19 places.'>miss_send_len</a> = <a href='../D/3747.html' title='Multiple defined in 3 places.'>OFP_DEFAULT_MISS_SEND_LEN</a>;
<a name='L338'> 338 
<a name='L339'> 339         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2529.html' title='Multiple used in 5 places.'>dp_task</a> = kthread_run(<a href='../S/293.html#L500' title='Defined at 500 in cbench/openflow/datapath/datapath.c.'>dp_maint_func</a>, <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, "dp%d", <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>);
<a name='L340'> 340         <b>if</b> (<a href='../Y/473.html' title='Multiple used in 8 places.'>IS_ERR</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2529.html' title='Multiple used in 5 places.'>dp_task</a>))
<a name='L341'> 341                 <b>goto</b> <a href='../Y/2741.html' title='Multiple used in 2 places.'>err_destroy_chain</a>;
<a name='L342'> 342 
<a name='L343'> 343         <a href='../Y/2540.html' title='Multiple used in 7 places.'>dps</a>[<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>] = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L344'> 344         <a href='../S/310.html#L49' title='Defined at 49 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>mutex_unlock</a>(&amp;<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L345'> 345         <a href='../Y/6493.html' title='Multiple used in 6 places.'>rtnl_unlock</a>();
<a name='L346'> 346 
<a name='L347'> 347         <b>if</b> (<a href='../Y/2501.html' title='Multiple used in 6 places.'>dp_add_dp_hook</a>)
<a name='L348'> 348                 <a href='../Y/2501.html' title='Multiple used in 6 places.'>dp_add_dp_hook</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L349'> 349 
<a name='L350'> 350         <b>return</b> 0;
<a name='L351'> 351 
<a name='L352'> 352 <a href='../Y/2743.html' title='Multiple used in 2 places.'>err_destroy_local_port</a>:
<a name='L353'> 353         <a href='../S/293.html#L437' title='Defined at 437 in cbench/openflow/datapath/datapath.c.'>dp_del_switch_port</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4196.html' title='Multiple used in 23 places.'>local_port</a>);
<a name='L354'> 354 <a href='../Y/2741.html' title='Multiple used in 2 places.'>err_destroy_chain</a>:
<a name='L355'> 355         <a href='../D/7044.html' title='Multiple defined in 2 places.'>chain_destroy</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>);
<a name='L356'> 356 <a href='../Y/2742.html' title='Multiple used in 2 places.'>err_destroy_dp_dev</a>:
<a name='L357'> 357         <a href='../S/281.html#L234' title='Defined at 234 in cbench/openflow/datapath/dp_dev.c.'>dp_dev_destroy</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L358'> 358 <a href='../Y/2745.html' title='Multiple used in 2 places.'>err_free_dp</a>:
<a name='L359'> 359         <a href='../Y/4017.html' title='Multiple used in 20 places.'>kfree</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L360'> 360 <a href='../Y/2752.html' title='Multiple used in 3 places.'>err_put</a>:
<a name='L361'> 361         <a href='../Y/4495.html' title='Multiple used in 3 places.'>module_put</a>(<a href='../D/5583.html' title='Multiple defined in 45 places.'>THIS_MODULE</a>);
<a name='L362'> 362 <a href='../Y/2755.html' title='Multiple used in 3 places.'>err_unlock</a>:
<a name='L363'> 363         <a href='../S/310.html#L49' title='Defined at 49 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>mutex_unlock</a>(&amp;<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L364'> 364         <a href='../Y/6493.html' title='Multiple used in 6 places.'>rtnl_unlock</a>();
<a name='L365'> 365         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L366'> 366 <font color='red'>}</font>
<a name='L367'> 367 
<a name='L368'> 368 <i><font color='green'>/* Find and return a free port number under 'dp'. */</font></i>
<a name='L369'> 369 <b>static</b> <b>int</b> <a href='../S/293.html#L416' title='Refered from 416 in cbench/openflow/datapath/datapath.c.'>find_portno</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>)
<a name='L370'> 370 <font color='red'>{</font>
<a name='L371'> 371         <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L372'> 372         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> = 1; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> &lt; <a href='../D/1464.html' title='Multiple defined in 2 places.'>DP_MAX_PORTS</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++)
<a name='L373'> 373                 <b>if</b> (<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5841.html' title='Multiple used in 64 places.'>ports</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>] == <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>)
<a name='L374'> 374                         <b>return</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L375'> 375         <b>return</b> -<a href='../Y/312.html' title='Multiple used in 5 places.'>EXFULL</a>;
<a name='L376'> 376 <font color='red'>}</font>
<a name='L377'> 377 
<a name='L378'> 378 <i><font color='green'>/* Called with RTNL lock and dp_mutex. */</font></i>
<a name='L379'> 379 <b>static</b> <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../R/3616.html' title='Multiple refered from 3 places.'>new_nbp</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>,
<a name='L380'> 380                                        <b>struct</b> <a href='../Y/4699.html' title='Multiple used in 110 places.'>net_device</a> *<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>, <b>int</b> <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>)
<a name='L381'> 381 <font color='red'>{</font>
<a name='L382'> 382         <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>;
<a name='L383'> 383 
<a name='L384'> 384         <b>if</b> (<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a> != <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>)
<a name='L385'> 385                 <b>return</b> <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/262.html' title='Multiple used in 3 places.'>EBUSY</a>);
<a name='L386'> 386 
<a name='L387'> 387         <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> = <a href='../Y/4032.html' title='Multiple used in 15 places.'>kzalloc</a>(<b>sizeof</b>(*<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>), <a href='../Y/379.html' title='Multiple used in 13 places.'>GFP_KERNEL</a>);
<a name='L388'> 388         <b>if</b> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> == <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>)
<a name='L389'> 389                 <b>return</b> <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>);
<a name='L390'> 390 
<a name='L391'> 391         <a href='../Y/2366.html' title='Multiple used in 2 places.'>dev_set_promiscuity</a>(<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>, 1);
<a name='L392'> 392         dev_hold(<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>);
<a name='L393'> 393         <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L394'> 394         <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> = <a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>;
<a name='L395'> 395         <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> = <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>;
<a name='L396'> 396         <a href='../Y/6918.html' title='Multiple used in 2 places.'>spin_lock_init</a>(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/4206.html' title='Multiple used in 348 places.'>lock</a>);
<a name='L397'> 397         <b>if</b> (<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> != <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a>)
<a name='L398'> 398                 <a href='../Y/6265.html' title='Multiple used in 9 places.'>rcu_assign_pointer</a>(<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a>, <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L399'> 399         <b>if</b> (<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> &lt; <a href='../D/1464.html' title='Multiple defined in 2 places.'>DP_MAX_PORTS</a>)
<a name='L400'> 400                 <a href='../Y/6265.html' title='Multiple used in 9 places.'>rcu_assign_pointer</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5841.html' title='Multiple used in 64 places.'>ports</a>[<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>], <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>); 
<a name='L401'> 401         <a href='../Y/4154.html' title='Multiple used in 4 places.'>list_add_rcu</a>(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/4917.html' title='Multiple used in 268 places.'>node</a>, &amp;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5817.html' title='Multiple used in 29 places.'>port_list</a>);
<a name='L402'> 402 
<a name='L403'> 403         <b>return</b> <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>;
<a name='L404'> 404 <font color='red'>}</font>
<a name='L405'> 405 
<a name='L406'> 406 <i><font color='green'>/* Called with RTNL lock and dp_mutex. */</font></i>
<a name='L407'> 407 <b>int</b> <a href='../S/293.html#L1309' title='Refered from 1309 in cbench/openflow/datapath/datapath.c.'>add_switch_port</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>struct</b> <a href='../Y/4699.html' title='Multiple used in 110 places.'>net_device</a> *<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>)
<a name='L408'> 408 <font color='red'>{</font>
<a name='L409'> 409         <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>;
<a name='L410'> 410         <b>int</b> <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>;
<a name='L411'> 411 
<a name='L412'> 412         <b>if</b> (<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> &amp; IFF_LOOPBACK || <a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> != <a href='../S/399.html#L40' title='Defined at 40 in cbench/openflow/utilities/wireshark_dissectors/wireshark-1.0.0-includes/epan/arptypes.h.'>ARPHRD_ETHER</a>
<a name='L413'> 413             || <a href='../S/281.html#L244' title='Defined at 244 in cbench/openflow/datapath/dp_dev.c.'>is_dp_dev</a>(<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>))
<a name='L414'> 414                 <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L415'> 415 
<a name='L416'> 416         <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> = <a href='../S/293.html#L369' title='Defined at 369 in cbench/openflow/datapath/datapath.c.'>find_portno</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L417'> 417         <b>if</b> (<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> &lt; 0)
<a name='L418'> 418                 <b>return</b> <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>;
<a name='L419'> 419 
<a name='L420'> 420         <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> = <a href='../S/293.html#L379' title='Defined at 379 in cbench/openflow/datapath/datapath.c.'>new_nbp</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>, <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>);
<a name='L421'> 421         <b>if</b> (<a href='../Y/473.html' title='Multiple used in 8 places.'>IS_ERR</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>))
<a name='L422'> 422                 <b>return</b> <a href='../Y/712.html' title='Multiple used in 6 places.'>PTR_ERR</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L423'> 423 
<a name='L424'> 424         <a href='../S/293.html#L982' title='Defined at 982 in cbench/openflow/datapath/datapath.c.'>init_port_status</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L425'> 425 
<a name='L426'> 426         <b>if</b> (<a href='../Y/2502.html' title='Multiple used in 6 places.'>dp_add_if_hook</a>)
<a name='L427'> 427                 <a href='../Y/2502.html' title='Multiple used in 6 places.'>dp_add_if_hook</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L428'> 428 
<a name='L429'> 429         <i><font color='green'>/* Notify the ctlpath that this port has been added */</font></i>
<a name='L430'> 430         <a href='../S/293.html#L1002' title='Defined at 1002 in cbench/openflow/datapath/datapath.c.'>dp_send_port_status</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, <a href='../D/3569.html' title='Multiple defined in 3 places.'>OFPPR_ADD</a>);
<a name='L431'> 431 
<a name='L432'> 432         <b>return</b> 0;
<a name='L433'> 433 <font color='red'>}</font>
<a name='L434'> 434 
<a name='L435'> 435 <i><font color='green'>/* Delete 'p' from switch.</font></i>
<a name='L436'> 436 <i><font color='green'> * Called with RTNL lock and dp_mutex. */</font></i>
<a name='L437'> 437 <b>int</b> <a href='../R/2768.html' title='Multiple refered from 5 places.'>dp_del_switch_port</a>(<b>struct</b> <a href='../Y/4698.html' title='Multiple used in 15 places.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>)
<a name='L438'> 438 <font color='red'>{</font>
<a name='L439'> 439 
<a name='L440'> 440 <font color='darkred'>#if</font> CONFIG_SYSFS
<a name='L441'> 441         <b>if</b> ((<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> != <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a>) &amp;&amp; <a href='../Y/2505.html' title='Multiple used in 7 places.'>dp_del_if_hook</a>) 
<a name='L442'> 442                 sysfs_remove_link(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/3738.html' title='Multiple used in 2 places.'>ifobj</a>, <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L443'> 443 <font color='darkred'>#endif</font>
<a name='L444'> 444 
<a name='L445'> 445         <i><font color='green'>/* First drop references to device. */</font></i>
<a name='L446'> 446         <a href='../Y/2366.html' title='Multiple used in 2 places.'>dev_set_promiscuity</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>, -1);
<a name='L447'> 447         <a href='../Y/4159.html' title='Multiple used in 7 places.'>list_del_rcu</a>(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/4917.html' title='Multiple used in 268 places.'>node</a>);
<a name='L448'> 448         <b>if</b> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> != <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a>)
<a name='L449'> 449                 <a href='../Y/6265.html' title='Multiple used in 9 places.'>rcu_assign_pointer</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5841.html' title='Multiple used in 64 places.'>ports</a>[<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>], <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L450'> 450         <a href='../Y/6265.html' title='Multiple used in 9 places.'>rcu_assign_pointer</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L451'> 451 
<a name='L452'> 452         <i><font color='green'>/* Then wait until no one is still using it, and destroy it. */</font></i>
<a name='L453'> 453         <a href='../Y/7207.html' title='Multiple used in 4 places.'>synchronize_rcu</a>();
<a name='L454'> 454 
<a name='L455'> 455         <i><font color='green'>/* Notify the ctlpath that this port no longer exists */</font></i>
<a name='L456'> 456         <a href='../S/293.html#L1002' title='Defined at 1002 in cbench/openflow/datapath/datapath.c.'>dp_send_port_status</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, <a href='../D/3570.html' title='Multiple defined in 3 places.'>OFPPR_DELETE</a>);
<a name='L457'> 457 
<a name='L458'> 458         <b>if</b> ((<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> != <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a>) &amp;&amp; <a href='../Y/2505.html' title='Multiple used in 7 places.'>dp_del_if_hook</a>) <font color='red'>{</font>
<a name='L459'> 459                 <a href='../Y/2505.html' title='Multiple used in 7 places.'>dp_del_if_hook</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L460'> 460         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L461'> 461                 <a href='../Y/2364.html' title='Multiple used in 3 places.'>dev_put</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>);
<a name='L462'> 462                 <a href='../Y/4017.html' title='Multiple used in 20 places.'>kfree</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L463'> 463         <font color='red'>}</font>
<a name='L464'> 464 
<a name='L465'> 465         <b>return</b> 0;
<a name='L466'> 466 <font color='red'>}</font>
<a name='L467'> 467 
<a name='L468'> 468 <b>static</b> <b>void</b> <a href='../S/293.html#L1213' title='Refered from 1213 in cbench/openflow/datapath/datapath.c.'>del_dp</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>)
<a name='L469'> 469 <font color='red'>{</font>
<a name='L470'> 470         <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, *<a href='../Y/4560.html' title='Multiple used in 375 places.'>n</a>;
<a name='L471'> 471 
<a name='L472'> 472         send_sig(<a href='../Y/783.html' title='Multiple used in 8 places.'>SIGKILL</a>, <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2529.html' title='Multiple used in 5 places.'>dp_task</a>, 0);
<a name='L473'> 473         kthread_stop(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2529.html' title='Multiple used in 5 places.'>dp_task</a>);
<a name='L474'> 474 
<a name='L475'> 475         <i><font color='green'>/* Drop references to DP. */</font></i>
<a name='L476'> 476         list_for_each_entry_safe (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, <a href='../Y/4560.html' title='Multiple used in 375 places.'>n</a>, &amp;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5817.html' title='Multiple used in 29 places.'>port_list</a>, <a href='../Y/4917.html' title='Multiple used in 268 places.'>node</a>)
<a name='L477'> 477                 <a href='../S/293.html#L437' title='Defined at 437 in cbench/openflow/datapath/datapath.c.'>dp_del_switch_port</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L478'> 478 
<a name='L479'> 479         <b>if</b> (<a href='../Y/2504.html' title='Multiple used in 6 places.'>dp_del_dp_hook</a>)
<a name='L480'> 480                 <a href='../Y/2504.html' title='Multiple used in 6 places.'>dp_del_dp_hook</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L481'> 481 
<a name='L482'> 482         <a href='../Y/6265.html' title='Multiple used in 9 places.'>rcu_assign_pointer</a>(<a href='../Y/2540.html' title='Multiple used in 7 places.'>dps</a>[<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>], <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L483'> 483 
<a name='L484'> 484         <i><font color='green'>/* Kill off local_port dev references from buffered packets that have</font></i>
<a name='L485'> 485 <i><font color='green'>         * associated dst entries. */</font></i>
<a name='L486'> 486         <a href='../Y/7207.html' title='Multiple used in 4 places.'>synchronize_rcu</a>();
<a name='L487'> 487         <a href='../S/282.html#L602' title='Defined at 602 in cbench/openflow/datapath/forward.c.'>fwd_discard_all</a>();
<a name='L488'> 488 
<a name='L489'> 489         <i><font color='green'>/* Destroy dp-&gt;netdev.  (Must follow deleting switch ports since</font></i>
<a name='L490'> 490 <i><font color='green'>         * dp-&gt;local_port has a reference to it.) */</font></i>
<a name='L491'> 491         <a href='../S/281.html#L234' title='Defined at 234 in cbench/openflow/datapath/dp_dev.c.'>dp_dev_destroy</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L492'> 492 
<a name='L493'> 493         <i><font color='green'>/* Wait until no longer in use, then destroy it. */</font></i>
<a name='L494'> 494         <a href='../Y/7207.html' title='Multiple used in 4 places.'>synchronize_rcu</a>();
<a name='L495'> 495         <a href='../D/7044.html' title='Multiple defined in 2 places.'>chain_destroy</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>);
<a name='L496'> 496         <a href='../Y/4017.html' title='Multiple used in 20 places.'>kfree</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L497'> 497         <a href='../Y/4495.html' title='Multiple used in 3 places.'>module_put</a>(<a href='../D/5583.html' title='Multiple defined in 45 places.'>THIS_MODULE</a>);
<a name='L498'> 498 <font color='red'>}</font>
<a name='L499'> 499 
<a name='L500'> 500 <b>static</b> <b>int</b> <a href='../R/2797.html' title='Multiple refered from 2 places.'>dp_maint_func</a>(<b>void</b> *<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>)
<a name='L501'> 501 <font color='red'>{</font>
<a name='L502'> 502         <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = (<b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *) <a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>;
<a name='L503'> 503 
<a name='L504'> 504         allow_signal(<a href='../Y/783.html' title='Multiple used in 8 places.'>SIGKILL</a>);
<a name='L505'> 505         <b>while</b> (!signal_pending(<a href='../Y/2228.html' title='Multiple used in 2 places.'>current</a>)) <font color='red'>{</font>
<a name='L506'> 506                 <i><font color='green'>/* Timeout old entries */</font></i>
<a name='L507'> 507                 <a href='../D/7050.html' title='Multiple defined in 2 places.'>chain_timeout</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>);
<a name='L508'> 508                 msleep_interruptible(<a href='../S/293.html#L79' title='Defined at 79 in cbench/openflow/datapath/datapath.c.'>MAINT_SLEEP_MSECS</a>);
<a name='L509'> 509         <font color='red'>}</font>
<a name='L510'> 510         <b>while</b> (!kthread_should_stop()) <font color='red'>{</font>
<a name='L511'> 511                 set_current_state(TASK_UNINTERRUPTIBLE);
<a name='L512'> 512                 schedule();
<a name='L513'> 513         <font color='red'>}</font>
<a name='L514'> 514         <b>return</b> 0;
<a name='L515'> 515 <font color='red'>}</font>
<a name='L516'> 516 
<a name='L517'> 517 <b>static</b> <b>void</b>
<a name='L518'> 518 <a href='../R/2742.html' title='Multiple refered from 2 places.'>do_port_input</a>(<b>struct</b> <a href='../Y/4698.html' title='Multiple used in 15 places.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>) 
<a name='L519'> 519 <font color='red'>{</font>
<a name='L520'> 520         <i><font color='green'>/* Make our own copy of the packet.  Otherwise we will mangle the</font></i>
<a name='L521'> 521 <i><font color='green'>         * packet for anyone who came before us (e.g. tcpdump via AF_PACKET).</font></i>
<a name='L522'> 522 <i><font color='green'>         * (No one comes after us, since we tell handle_bridge() that we took</font></i>
<a name='L523'> 523 <i><font color='green'>         * the packet.) */</font></i>
<a name='L524'> 524         <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a> = <a href='../Y/6823.html' title='Multiple used in 2 places.'>skb_share_check</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/378.html' title='Multiple used in 20 places.'>GFP_ATOMIC</a>);
<a name='L525'> 525         <b>if</b> (!<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>)
<a name='L526'> 526                 <b>return</b>;
<a name='L527'> 527 
<a name='L528'> 528         <i><font color='green'>/* Push the Ethernet header back on. */</font></i>
<a name='L529'> 529         skb_push(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/302.html' title='Multiple used in 2 places.'>ETH_HLEN</a>);
<a name='L530'> 530         <a href='../S/319.html#L109' title='Defined at 109 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>skb_reset_mac_header</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L531'> 531         <a href='../D/7910.html' title='Multiple defined in 2 places.'>fwd_port_input</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L532'> 532 <font color='red'>}</font>
<a name='L533'> 533 
<a name='L534'> 534 <i><font color='green'>/*</font></i>
<a name='L535'> 535 <i><font color='green'> * Used as br_handle_frame_hook.  (Cannot run bridge at the same time, even on</font></i>
<a name='L536'> 536 <i><font color='green'> * different set of devices!)</font></i>
<a name='L537'> 537 <i><font color='green'> */</font></i>
<a name='L538'> 538 <font color='darkred'>#if</font> <a href='../Y/502.html' title='Multiple used in 39 places.'>LINUX_VERSION_CODE</a> &gt;= <a href='../Y/480.html' title='Multiple used in 39 places.'>KERNEL_VERSION</a>(2,6,22)
<a name='L539'> 539 <i><font color='green'>/* Called with rcu_read_lock. */</font></i>
<a name='L540'> 540 <b>static</b> <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../S/293.html#L2110' title='Refered from 2110 in cbench/openflow/datapath/datapath.c.'>dp_frame_hook</a>(<b>struct</b> <a href='../Y/4698.html' title='Multiple used in 15 places.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>,
<a name='L541'> 541                                      <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>)
<a name='L542'> 542 <font color='red'>{</font>
<a name='L543'> 543         <a href='../S/293.html#L518' title='Defined at 518 in cbench/openflow/datapath/datapath.c.'>do_port_input</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L544'> 544         <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L545'> 545 <font color='red'>}</font>
<a name='L546'> 546 <font color='darkred'>#else</font>
<a name='L547'> 547 <b>static</b> <b>int</b> <a href='../S/293.html#L2110' title='Refered from 2110 in cbench/openflow/datapath/datapath.c.'>dp_frame_hook</a>(<b>struct</b> <a href='../Y/4698.html' title='Multiple used in 15 places.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> **<a href='../Y/6116.html' title='Multiple used in 8 places.'>pskb</a>)
<a name='L548'> 548 <font color='red'>{</font>
<a name='L549'> 549         <a href='../S/293.html#L518' title='Defined at 518 in cbench/openflow/datapath/datapath.c.'>do_port_input</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, *<a href='../Y/6116.html' title='Multiple used in 8 places.'>pskb</a>);
<a name='L550'> 550         <b>return</b> 1;
<a name='L551'> 551 <font color='red'>}</font>
<a name='L552'> 552 <font color='darkred'>#endif</font>
<a name='L553'> 553 
<a name='L554'> 554 <i><font color='green'>/* Forwarding output path.</font></i>
<a name='L555'> 555 <i><font color='green'> * Based on net/bridge/br_forward.c. */</font></i>
<a name='L556'> 556 
<a name='L557'> 557 <b>static</b> <b>inline</b> <b>unsigned</b> <a href='../R/4001.html' title='Multiple refered from 2 places.'>packet_length</a>(<b>const</b> <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>)
<a name='L558'> 558 <font color='red'>{</font>
<a name='L559'> 559         <b>unsigned</b> <a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a> = <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a> - <a href='../Y/302.html' title='Multiple used in 2 places.'>ETH_HLEN</a>;
<a name='L560'> 560         <b>if</b> (<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../S/333.html#L918' title='Defined at 918 in cbench/openflow/utilities/dpctl.c.'>protocol</a> == <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/303.html' title='Multiple used in 4 places.'>ETH_P_8021Q</a>))
<a name='L561'> 561                 <a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a> -= <a href='../Y/1000.html' title='Multiple used in 5 places.'>VLAN_HLEN</a>;
<a name='L562'> 562         <b>return</b> <a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a>;
<a name='L563'> 563 <font color='red'>}</font>
<a name='L564'> 564 
<a name='L565'> 565 <i><font color='green'>/* Send packets out all the ports except the originating one.  If the</font></i>
<a name='L566'> 566 <i><font color='green'> * "flood" argument is set, only send along the minimum spanning tree.</font></i>
<a name='L567'> 567 <i><font color='green'> */</font></i>
<a name='L568'> 568 <b>static</b> <b>int</b>
<a name='L569'> 569 <a href='../R/3993.html' title='Multiple refered from 4 places.'>output_all</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>int</b> <a href='../Y/3128.html' title='Multiple used in 4 places.'>flood</a>)
<a name='L570'> 570 <font color='red'>{</font>
<a name='L571'> 571         <a href='../S/851.html#L52' title='Defined at 52 in cbench/openflow/lib/netdev.c.'>u32</a> <a href='../Y/2407.html' title='Multiple used in 2 places.'>disable</a> = <a href='../Y/3128.html' title='Multiple used in 4 places.'>flood</a> ? <a href='../D/3541.html' title='Multiple defined in 2 places.'>OFPPC_NO_FLOOD</a> : 0;
<a name='L572'> 572         <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>;
<a name='L573'> 573         <b>int</b> <a href='../Y/5878.html' title='Multiple used in 33 places.'>prev_port</a> = -1;
<a name='L574'> 574 
<a name='L575'> 575         <a href='../Y/4163.html' title='Multiple used in 3 places.'>list_for_each_entry_rcu</a> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, &amp;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5817.html' title='Multiple used in 29 places.'>port_list</a>, <a href='../Y/4917.html' title='Multiple used in 268 places.'>node</a>) <font color='red'>{</font>
<a name='L576'> 576                 <b>if</b> (<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> == <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> || <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2052.html' title='Multiple used in 115 places.'>config</a> &amp; <a href='../Y/2407.html' title='Multiple used in 2 places.'>disable</a>)
<a name='L577'> 577                         <b>continue</b>;
<a name='L578'> 578                 <b>if</b> (<a href='../Y/5878.html' title='Multiple used in 33 places.'>prev_port</a> != -1) <font color='red'>{</font>
<a name='L579'> 579                         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/1916.html' title='Multiple used in 9 places.'>clone</a> = <a href='../Y/6806.html' title='Multiple used in 2 places.'>skb_clone</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/378.html' title='Multiple used in 20 places.'>GFP_ATOMIC</a>);
<a name='L580'> 580                         <b>if</b> (!<a href='../Y/1916.html' title='Multiple used in 9 places.'>clone</a>) <font color='red'>{</font>
<a name='L581'> 581                                 <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L582'> 582                                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L583'> 583                         <font color='red'>}</font>
<a name='L584'> 584                         <a href='../D/7544.html' title='Multiple defined in 2 places.'>dp_output_port</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/1916.html' title='Multiple used in 9 places.'>clone</a>, <a href='../Y/5878.html' title='Multiple used in 33 places.'>prev_port</a>, 0); 
<a name='L585'> 585                 <font color='red'>}</font>
<a name='L586'> 586                 <a href='../Y/5878.html' title='Multiple used in 33 places.'>prev_port</a> = <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>;
<a name='L587'> 587         <font color='red'>}</font>
<a name='L588'> 588         <b>if</b> (<a href='../Y/5878.html' title='Multiple used in 33 places.'>prev_port</a> != -1)
<a name='L589'> 589                 <a href='../D/7544.html' title='Multiple defined in 2 places.'>dp_output_port</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/5878.html' title='Multiple used in 33 places.'>prev_port</a>, 0);
<a name='L590'> 590         <b>else</b>
<a name='L591'> 591                 <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L592'> 592 
<a name='L593'> 593         <b>return</b> 0;
<a name='L594'> 594 <font color='red'>}</font>
<a name='L595'> 595 
<a name='L596'> 596 <i><font color='green'>/* Marks 'skb' as having originated from 'in_port' in 'dp'.</font></i>
<a name='L597'> 597 <i><font color='green'>   FIXME: how are devices reference counted? */</font></i>
<a name='L598'> 598 <b>void</b> <a href='../R/2811.html' title='Multiple refered from 3 places.'>dp_set_origin</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/3786.html' title='Multiple used in 144 places.'>in_port</a>,
<a name='L599'> 599                            <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>)
<a name='L600'> 600 <font color='red'>{</font>
<a name='L601'> 601         <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>;
<a name='L602'> 602         <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> = (<a href='../Y/3786.html' title='Multiple used in 144 places.'>in_port</a> &lt; <a href='../D/1464.html' title='Multiple defined in 2 places.'>DP_MAX_PORTS</a> ? <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5841.html' title='Multiple used in 64 places.'>ports</a>[<a href='../Y/3786.html' title='Multiple used in 144 places.'>in_port</a>]
<a name='L603'> 603              : <a href='../Y/3786.html' title='Multiple used in 144 places.'>in_port</a> == <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a> ? <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4196.html' title='Multiple used in 23 places.'>local_port</a>
<a name='L604'> 604              : <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L605'> 605         <b>if</b> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>) 
<a name='L606'> 606                 <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> = <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>;
<a name='L607'> 607          <b>else</b> 
<a name='L608'> 608                 <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L609'> 609 <font color='red'>}</font>
<a name='L610'> 610 
<a name='L611'> 611 <b>int</b> 
<a name='L612'> 612 <a href='../R/2815.html' title='Multiple refered from 3 places.'>dp_xmit_skb</a>(<b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>)
<a name='L613'> 613 <font color='red'>{</font>
<a name='L614'> 614         <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a>-&gt;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L615'> 615         <b>int</b> <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a> = <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>;
<a name='L616'> 616 
<a name='L617'> 617         <b>if</b> (<a href='../S/293.html#L557' title='Defined at 557 in cbench/openflow/datapath/datapath.c.'>packet_length</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>) &gt; <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/4539.html' title='Multiple used in 9 places.'>mtu</a> &amp;&amp; !skb_is_gso(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>)) <font color='red'>{</font>
<a name='L618'> 618                 <a href='../Y/5907.html' title='Multiple used in 27 places.'>printk</a>(<a href='../Y/485.html' title='Multiple used in 3 places.'>KERN_WARNING</a> "%s: dropped over-mtu packet: %d &gt; %d\n",
<a name='L619'> 619                        <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../S/293.html#L557' title='Defined at 557 in cbench/openflow/datapath/datapath.c.'>packet_length</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>), <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/4539.html' title='Multiple used in 9 places.'>mtu</a>);
<a name='L620'> 620                 <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L621'> 621                 <b>return</b> -E2BIG;
<a name='L622'> 622         <font color='red'>}</font>
<a name='L623'> 623 
<a name='L624'> 624         dev_queue_xmit(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L625'> 625 
<a name='L626'> 626         <b>return</b> <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>;
<a name='L627'> 627 <font color='red'>}</font>
<a name='L628'> 628 
<a name='L629'> 629 <i><font color='green'>/* Takes ownership of 'skb' and transmits it to 'out_port' on 'dp'.</font></i>
<a name='L630'> 630 <i><font color='green'> */</font></i>
<a name='L631'> 631 <b>int</b> <a href='../R/2801.html' title='Multiple refered from 8 places.'>dp_output_port</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>int</b> <a href='../Y/5548.html' title='Multiple used in 164 places.'>out_port</a>,
<a name='L632'> 632                    <b>int</b> <a href='../Y/3755.html' title='Multiple used in 17 places.'>ignore_no_fwd</a>)
<a name='L633'> 633 <font color='red'>{</font>
<a name='L634'> 634         <a href='../Y/139.html' title='Multiple used in 6 places.'>BUG_ON</a>(!<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L635'> 635         <b>switch</b> (<a href='../Y/5548.html' title='Multiple used in 164 places.'>out_port</a>)<font color='red'>{</font>
<a name='L636'> 636         <b>case</b> <a href='../D/3584.html' title='Multiple defined in 3 places.'>OFPP_IN_PORT</a>:
<a name='L637'> 637                 <i><font color='green'>/* Send it out the port it came in on, which is already set in</font></i>
<a name='L638'> 638 <i><font color='green'>                 * the skb. */</font></i>
<a name='L639'> 639                 <b>if</b> (!<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>) <font color='red'>{</font>
<a name='L640'> 640                         <b>if</b> (<a href='../Y/4706.html' title='Multiple used in 10 places.'>net_ratelimit</a>())
<a name='L641'> 641                                 <a href='../Y/5907.html' title='Multiple used in 27 places.'>printk</a>(<a href='../Y/484.html' title='Multiple used in 8 places.'>KERN_NOTICE</a> "%s: skb device not set "
<a name='L642'> 642                                        "forwarding to in_port\n",
<a name='L643'> 643                                        <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L644'> 644                         <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L645'> 645                         <b>return</b> -<a href='../Y/298.html' title='Multiple used in 19 places.'>ESRCH</a>;
<a name='L646'> 646                 <font color='red'>}</font>
<a name='L647'> 647                 <b>return</b> <a href='../S/293.html#L612' title='Defined at 612 in cbench/openflow/datapath/datapath.c.'>dp_xmit_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L648'> 648                 
<a name='L649'> 649         <b>case</b> <a href='../D/3589.html' title='Multiple defined in 3 places.'>OFPP_TABLE</a>: <font color='red'>{</font>
<a name='L650'> 650                 <b>int</b> <a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a> = <a href='../D/9437.html' title='Multiple defined in 2 places.'>run_flow_through_tables</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>,
<a name='L651'> 651                                                      <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a>);
<a name='L652'> 652                 <b>if</b> (<a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a>)
<a name='L653'> 653                         <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L654'> 654                 <b>return</b> <a href='../Y/6437.html' title='Multiple used in 433 places.'>retval</a>;
<a name='L655'> 655         <font color='red'>}</font>
<a name='L656'> 656 
<a name='L657'> 657         <b>case</b> <a href='../D/3583.html' title='Multiple defined in 3 places.'>OFPP_FLOOD</a>:
<a name='L658'> 658                 <b>return</b> <a href='../D/8984.html' title='Multiple defined in 2 places.'>output_all</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, 1);
<a name='L659'> 659 
<a name='L660'> 660         <b>case</b> <a href='../D/3580.html' title='Multiple defined in 3 places.'>OFPP_ALL</a>:
<a name='L661'> 661                 <b>return</b> <a href='../D/8984.html' title='Multiple defined in 2 places.'>output_all</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, 0);
<a name='L662'> 662 
<a name='L663'> 663         <b>case</b> <a href='../D/3582.html' title='Multiple defined in 3 places.'>OFPP_CONTROLLER</a>:
<a name='L664'> 664                 <b>return</b> <a href='../D/7543.html' title='Multiple defined in 2 places.'>dp_output_control</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../S/294.html#L24' title='Defined at 24 in cbench/openflow/datapath/forward.h.'>UINT16_MAX</a>, <a href='../D/3613.html' title='Multiple defined in 3 places.'>OFPR_ACTION</a>);
<a name='L665'> 665 
<a name='L666'> 666         <b>case</b> <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a>: <font color='red'>{</font>
<a name='L667'> 667                 <b>struct</b> <a href='../Y/4699.html' title='Multiple used in 110 places.'>net_device</a> *<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>;
<a name='L668'> 668                 <b>return</b> <a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> ? <a href='../S/281.html#L31' title='Defined at 31 in cbench/openflow/datapath/dp_dev.c.'>dp_dev_recv</a>(<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>) : -<a href='../Y/298.html' title='Multiple used in 19 places.'>ESRCH</a>;
<a name='L669'> 669         <font color='red'>}</font>
<a name='L670'> 670 
<a name='L671'> 671         <b>case</b> 0 ... <a href='../D/1464.html' title='Multiple defined in 2 places.'>DP_MAX_PORTS</a> - 1: <font color='red'>{</font>
<a name='L672'> 672                 <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5841.html' title='Multiple used in 64 places.'>ports</a>[<a href='../Y/5548.html' title='Multiple used in 164 places.'>out_port</a>];
<a name='L673'> 673                 <b>if</b> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> == <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>)
<a name='L674'> 674                         <b>goto</b> <a href='../Y/1590.html' title='Multiple used in 3 places.'>bad_port</a>;
<a name='L675'> 675                 <b>if</b> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> == <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>) <font color='red'>{</font>
<a name='L676'> 676                         <i><font color='green'>/* To send to the input port, must use OFPP_IN_PORT */</font></i>
<a name='L677'> 677                         <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L678'> 678                         <b>if</b> (<a href='../Y/4706.html' title='Multiple used in 10 places.'>net_ratelimit</a>())
<a name='L679'> 679                                 <a href='../Y/5907.html' title='Multiple used in 27 places.'>printk</a>(<a href='../Y/484.html' title='Multiple used in 8 places.'>KERN_NOTICE</a> "%s: can't directly "
<a name='L680'> 680                                        "forward to input port\n",
<a name='L681'> 681                                        <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L682'> 682                         <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L683'> 683                 <font color='red'>}</font>
<a name='L684'> 684                 <b>if</b> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2052.html' title='Multiple used in 115 places.'>config</a> &amp; <a href='../D/3542.html' title='Multiple defined in 3 places.'>OFPPC_NO_FWD</a> &amp;&amp; !<a href='../Y/3755.html' title='Multiple used in 17 places.'>ignore_no_fwd</a>) <font color='red'>{</font>
<a name='L685'> 685                         <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L686'> 686                         <b>return</b> 0;
<a name='L687'> 687                 <font color='red'>}</font>
<a name='L688'> 688                 <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> = <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>; 
<a name='L689'> 689                 <b>return</b> <a href='../S/293.html#L612' title='Defined at 612 in cbench/openflow/datapath/datapath.c.'>dp_xmit_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L690'> 690         <font color='red'>}</font>
<a name='L691'> 691 
<a name='L692'> 692         <b>default</b>:
<a name='L693'> 693                 <b>goto</b> <a href='../Y/1590.html' title='Multiple used in 3 places.'>bad_port</a>;
<a name='L694'> 694         <font color='red'>}</font>
<a name='L695'> 695 
<a name='L696'> 696 <a href='../Y/1590.html' title='Multiple used in 3 places.'>bad_port</a>:
<a name='L697'> 697         <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L698'> 698         <b>if</b> (<a href='../Y/4706.html' title='Multiple used in 10 places.'>net_ratelimit</a>())
<a name='L699'> 699                 <a href='../Y/5907.html' title='Multiple used in 27 places.'>printk</a>(<a href='../Y/484.html' title='Multiple used in 8 places.'>KERN_NOTICE</a> "%s: can't forward to bad port %d\n",
<a name='L700'> 700                        <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/5548.html' title='Multiple used in 164 places.'>out_port</a>);
<a name='L701'> 701         <b>return</b> -<a href='../Y/275.html' title='Multiple used in 14 places.'>ENOENT</a>;
<a name='L702'> 702 <font color='red'>}</font>
<a name='L703'> 703 
<a name='L704'> 704 <i><font color='green'>/* Takes ownership of 'skb' and transmits it to 'dp''s control path.  'reason'</font></i>
<a name='L705'> 705 <i><font color='green'> * indicates why 'skb' is being sent. 'max_len' sets the maximum number of</font></i>
<a name='L706'> 706 <i><font color='green'> * bytes that the caller wants to be sent.</font></i>
<a name='L707'> 707 <i><font color='green'> */</font></i>
<a name='L708'> 708 <b>int</b>
<a name='L709'> 709 <a href='../R/2800.html' title='Multiple refered from 8 places.'>dp_output_control</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>,
<a name='L710'> 710                   <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/4375.html' title='Multiple used in 47 places.'>max_len</a>, <b>int</b> <a href='../Y/6294.html' title='Multiple used in 94 places.'>reason</a>)
<a name='L711'> 711 <font color='red'>{</font>
<a name='L712'> 712         <i><font color='green'>/* FIXME?  Can we avoid creating a new skbuff in the case where we</font></i>
<a name='L713'> 713 <i><font color='green'>         * forward the whole packet? */</font></i>
<a name='L714'> 714         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/2982.html' title='Multiple used in 3 places.'>f_skb</a>;
<a name='L715'> 715         <b>struct</b> <a href='../D/8847.html' title='Multiple defined in 4 places.'>ofp_packet_in</a> *<a href='../Y/5484.html' title='Multiple used in 55 places.'>opi</a>;
<a name='L716'> 716         <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/3288.html' title='Multiple used in 5 places.'>fwd_len</a>, <a href='../Y/5486.html' title='Multiple used in 3 places.'>opi_len</a>;
<a name='L717'> 717         <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/1706.html' title='Multiple used in 133 places.'>buffer_id</a>;
<a name='L718'> 718         <b>int</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L719'> 719 
<a name='L720'> 720         <a href='../S/303.html#L7' title='Defined at 7 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/asm-generic/bug.h.'>WARN_ON_ONCE</a>(<a href='../Y/6824.html' title='Multiple used in 4 places.'>skb_shared</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>));
<a name='L721'> 721 
<a name='L722'> 722         <a href='../Y/1706.html' title='Multiple used in 133 places.'>buffer_id</a> = <a href='../S/282.html#L536' title='Defined at 536 in cbench/openflow/datapath/forward.c.'>fwd_save_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L723'> 723 
<a name='L724'> 724         <a href='../Y/3288.html' title='Multiple used in 5 places.'>fwd_len</a> = <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>;
<a name='L725'> 725         <b>if</b> (<a href='../Y/1706.html' title='Multiple used in 133 places.'>buffer_id</a> != (<a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a>) -1)
<a name='L726'> 726                 <a href='../Y/3288.html' title='Multiple used in 5 places.'>fwd_len</a> = <a href='../Y/4443.html' title='Multiple used in 21 places.'>min</a>(<a href='../Y/3288.html' title='Multiple used in 5 places.'>fwd_len</a>, <a href='../Y/4375.html' title='Multiple used in 47 places.'>max_len</a>);
<a name='L727'> 727 
<a name='L728'> 728         <a href='../Y/5486.html' title='Multiple used in 3 places.'>opi_len</a> = <a href='../Y/5075.html' title='Multiple used in 34 places.'>offsetof</a>(<b>struct</b> <a href='../D/8847.html' title='Multiple defined in 4 places.'>ofp_packet_in</a>, <a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>) + <a href='../Y/3288.html' title='Multiple used in 5 places.'>fwd_len</a>;
<a name='L729'> 729         <a href='../Y/5484.html' title='Multiple used in 55 places.'>opi</a> = <a href='../S/293.html#L205' title='Defined at 205 in cbench/openflow/datapath/datapath.c.'>alloc_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/5486.html' title='Multiple used in 3 places.'>opi_len</a>, <a href='../D/3680.html' title='Multiple defined in 3 places.'>OFPT_PACKET_IN</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>, &amp;<a href='../Y/2982.html' title='Multiple used in 3 places.'>f_skb</a>);
<a name='L730'> 730         <b>if</b> (!<a href='../Y/5484.html' title='Multiple used in 55 places.'>opi</a>) <font color='red'>{</font>
<a name='L731'> 731                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L732'> 732                 <b>goto</b> <a href='../Y/5531.html' title='Multiple used in 554 places.'>out</a>;
<a name='L733'> 733         <font color='red'>}</font>
<a name='L734'> 734         <a href='../Y/5484.html' title='Multiple used in 55 places.'>opi</a>-&gt;<a href='../Y/1706.html' title='Multiple used in 133 places.'>buffer_id</a>      = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/1706.html' title='Multiple used in 133 places.'>buffer_id</a>);
<a name='L735'> 735         <a href='../Y/5484.html' title='Multiple used in 55 places.'>opi</a>-&gt;<a href='../Y/7436.html' title='Multiple used in 79 places.'>total_len</a>      = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>);
<a name='L736'> 736         <a href='../Y/5484.html' title='Multiple used in 55 places.'>opi</a>-&gt;<a href='../Y/3786.html' title='Multiple used in 144 places.'>in_port</a>        = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> &amp;&amp; <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a>
<a name='L737'> 737                                     ? <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>
<a name='L738'> 738                                     : <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a>);
<a name='L739'> 739         <a href='../Y/5484.html' title='Multiple used in 55 places.'>opi</a>-&gt;<a href='../Y/6294.html' title='Multiple used in 94 places.'>reason</a>         = <a href='../Y/6294.html' title='Multiple used in 94 places.'>reason</a>;
<a name='L740'> 740         <a href='../Y/5484.html' title='Multiple used in 55 places.'>opi</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>            = 0;
<a name='L741'> 741         skb_copy_bits(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, 0, <a href='../Y/5484.html' title='Multiple used in 55 places.'>opi</a>-&gt;<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>, <a href='../Y/3288.html' title='Multiple used in 5 places.'>fwd_len</a>);
<a name='L742'> 742         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../S/293.html#L246' title='Defined at 246 in cbench/openflow/datapath/datapath.c.'>send_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/2982.html' title='Multiple used in 3 places.'>f_skb</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L743'> 743 
<a name='L744'> 744 <a href='../Y/5531.html' title='Multiple used in 554 places.'>out</a>:
<a name='L745'> 745         <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L746'> 746         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L747'> 747 <font color='red'>}</font>
<a name='L748'> 748 
<a name='L749'> 749 <b>static</b> <b>void</b> <a href='../R/3032.html' title='Multiple refered from 4 places.'>fill_port_desc</a>(<b>struct</b> <a href='../Y/4698.html' title='Multiple used in 15 places.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, <b>struct</b> <a href='../Y/5253.html' title='Multiple used in 22 places.'>ofp_phy_port</a> *<a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>)
<a name='L750'> 750 <font color='red'>{</font>
<a name='L751'> 751         <b>unsigned</b> <b>long</b> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>;
<a name='L752'> 752         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>);
<a name='L753'> 753         <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/615.html' title='Multiple used in 14 places.'>OFP_MAX_PORT_NAME_LEN</a>);
<a name='L754'> 754         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>[<a href='../Y/615.html' title='Multiple used in 14 places.'>OFP_MAX_PORT_NAME_LEN</a>-1] = '\0';
<a name='L755'> 755         <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/3680.html' title='Multiple used in 27 places.'>hw_addr</a>, <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/2360.html' title='Multiple used in 10 places.'>dev_addr</a>, <a href='../D/1677.html' title='Multiple defined in 6 places.'>ETH_ALEN</a>);
<a name='L756'> 756         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = 0;
<a name='L757'> 757         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> = 0;
<a name='L758'> 758         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> = 0;
<a name='L759'> 759         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/5700.html' title='Multiple used in 46 places.'>peer</a> = 0;
<a name='L760'> 760 
<a name='L761'> 761         <a href='../Y/6919.html' title='Multiple used in 9 places.'>spin_lock_irqsave</a>(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/4206.html' title='Multiple used in 348 places.'>lock</a>, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>);
<a name='L762'> 762         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2052.html' title='Multiple used in 115 places.'>config</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2052.html' title='Multiple used in 115 places.'>config</a>);
<a name='L763'> 763         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>);
<a name='L764'> 764         <a href='../Y/6921.html' title='Multiple used in 11 places.'>spin_unlock_irqrestore</a>(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/4206.html' title='Multiple used in 348 places.'>lock</a>, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>);
<a name='L765'> 765 
<a name='L766'> 766 <font color='darkred'>#if</font> <a href='../Y/502.html' title='Multiple used in 39 places.'>LINUX_VERSION_CODE</a> &gt;= <a href='../Y/480.html' title='Multiple used in 39 places.'>KERNEL_VERSION</a>(2,4,24)
<a name='L767'> 767         <b>if</b> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/2824.html' title='Multiple used in 5 places.'>ethtool_ops</a> &amp;&amp; <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/2824.html' title='Multiple used in 5 places.'>ethtool_ops</a>-&gt;<a href='../Y/3401.html' title='Multiple used in 3 places.'>get_settings</a>) <font color='red'>{</font>
<a name='L768'> 768                 <b>struct</b> <a href='../Y/2817.html' title='Multiple used in 3 places.'>ethtool_cmd</a> <a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a> = <font color='red'>{</font> .<a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a> = <a href='../Y/300.html' title='Multiple used in 2 places.'>ETHTOOL_GSET</a> <font color='red'>}</font>;
<a name='L769'> 769 
<a name='L770'> 770                 <b>if</b> (!<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/2824.html' title='Multiple used in 5 places.'>ethtool_ops</a>-&gt;<a href='../Y/3401.html' title='Multiple used in 3 places.'>get_settings</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>, &amp;<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>)) <font color='red'>{</font>
<a name='L771'> 771                         <i><font color='green'>/* Set the supported features */</font></i>
<a name='L772'> 772                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/914.html' title='Multiple used in 2 places.'>SUPPORTED_10baseT_Half</a>) 
<a name='L773'> 773                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3553.html' title='Multiple defined in 3 places.'>OFPPF_10MB_HD</a>;
<a name='L774'> 774                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/913.html' title='Multiple used in 2 places.'>SUPPORTED_10baseT_Full</a>)
<a name='L775'> 775                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3552.html' title='Multiple defined in 3 places.'>OFPPF_10MB_FD</a>;
<a name='L776'> 776                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/912.html' title='Multiple used in 2 places.'>SUPPORTED_100baseT_Half</a>) 
<a name='L777'> 777                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3550.html' title='Multiple defined in 3 places.'>OFPPF_100MB_HD</a>;
<a name='L778'> 778                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/911.html' title='Multiple used in 2 places.'>SUPPORTED_100baseT_Full</a>)
<a name='L779'> 779                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3549.html' title='Multiple defined in 3 places.'>OFPPF_100MB_FD</a>;
<a name='L780'> 780                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/910.html' title='Multiple used in 2 places.'>SUPPORTED_1000baseT_Half</a>)
<a name='L781'> 781                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3555.html' title='Multiple defined in 3 places.'>OFPPF_1GB_HD</a>;
<a name='L782'> 782                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/909.html' title='Multiple used in 2 places.'>SUPPORTED_1000baseT_Full</a>)
<a name='L783'> 783                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3554.html' title='Multiple defined in 3 places.'>OFPPF_1GB_FD</a>;
<a name='L784'> 784                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/908.html' title='Multiple used in 2 places.'>SUPPORTED_10000baseT_Full</a>)
<a name='L785'> 785                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3551.html' title='Multiple defined in 3 places.'>OFPPF_10GB_FD</a>;
<a name='L786'> 786                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/919.html' title='Multiple used in 2 places.'>SUPPORTED_TP</a>)
<a name='L787'> 787                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3559.html' title='Multiple defined in 3 places.'>OFPPF_COPPER</a>;
<a name='L788'> 788                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/917.html' title='Multiple used in 2 places.'>SUPPORTED_FIBRE</a>)
<a name='L789'> 789                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3560.html' title='Multiple defined in 3 places.'>OFPPF_FIBER</a>;
<a name='L790'> 790                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/916.html' title='Multiple used in 2 places.'>SUPPORTED_Autoneg</a>)
<a name='L791'> 791                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3558.html' title='Multiple defined in 3 places.'>OFPPF_AUTONEG</a>;
<a name='L792'> 792 <font color='darkred'>#if</font> <a href='../Y/502.html' title='Multiple used in 39 places.'>LINUX_VERSION_CODE</a> &gt;= <a href='../Y/480.html' title='Multiple used in 39 places.'>KERNEL_VERSION</a>(2,6,14)
<a name='L793'> 793                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/918.html' title='Multiple used in 2 places.'>SUPPORTED_Pause</a>)
<a name='L794'> 794                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3562.html' title='Multiple defined in 3 places.'>OFPPF_PAUSE</a>;
<a name='L795'> 795                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> &amp; <a href='../Y/915.html' title='Multiple used in 2 places.'>SUPPORTED_Asym_Pause</a>)
<a name='L796'> 796                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> |= <a href='../D/3563.html' title='Multiple defined in 3 places.'>OFPPF_PAUSE_ASYM</a>;
<a name='L797'> 797 <font color='darkred'>#endif</font> <i><font color='green'>/* kernel &gt;= 2.6.14 */</font></i>
<a name='L798'> 798 
<a name='L799'> 799                         <i><font color='green'>/* Set the advertised features */</font></i>
<a name='L800'> 800                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/12.html' title='Multiple used in 2 places.'>ADVERTISED_10baseT_Half</a>) 
<a name='L801'> 801                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3553.html' title='Multiple defined in 3 places.'>OFPPF_10MB_HD</a>;
<a name='L802'> 802                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/11.html' title='Multiple used in 2 places.'>ADVERTISED_10baseT_Full</a>)
<a name='L803'> 803                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3552.html' title='Multiple defined in 3 places.'>OFPPF_10MB_FD</a>;
<a name='L804'> 804                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/10.html' title='Multiple used in 2 places.'>ADVERTISED_100baseT_Half</a>) 
<a name='L805'> 805                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3550.html' title='Multiple defined in 3 places.'>OFPPF_100MB_HD</a>;
<a name='L806'> 806                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/9.html' title='Multiple used in 2 places.'>ADVERTISED_100baseT_Full</a>)
<a name='L807'> 807                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3549.html' title='Multiple defined in 3 places.'>OFPPF_100MB_FD</a>;
<a name='L808'> 808                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/8.html' title='Multiple used in 2 places.'>ADVERTISED_1000baseT_Half</a>)
<a name='L809'> 809                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3555.html' title='Multiple defined in 3 places.'>OFPPF_1GB_HD</a>;
<a name='L810'> 810                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/7.html' title='Multiple used in 2 places.'>ADVERTISED_1000baseT_Full</a>)
<a name='L811'> 811                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3554.html' title='Multiple defined in 3 places.'>OFPPF_1GB_FD</a>;
<a name='L812'> 812                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/6.html' title='Multiple used in 2 places.'>ADVERTISED_10000baseT_Full</a>)
<a name='L813'> 813                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3551.html' title='Multiple defined in 3 places.'>OFPPF_10GB_FD</a>;
<a name='L814'> 814                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/17.html' title='Multiple used in 2 places.'>ADVERTISED_TP</a>)
<a name='L815'> 815                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3559.html' title='Multiple defined in 3 places.'>OFPPF_COPPER</a>;
<a name='L816'> 816                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/15.html' title='Multiple used in 2 places.'>ADVERTISED_FIBRE</a>)
<a name='L817'> 817                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3560.html' title='Multiple defined in 3 places.'>OFPPF_FIBER</a>;
<a name='L818'> 818                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/14.html' title='Multiple used in 2 places.'>ADVERTISED_Autoneg</a>)
<a name='L819'> 819                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3558.html' title='Multiple defined in 3 places.'>OFPPF_AUTONEG</a>;
<a name='L820'> 820 <font color='darkred'>#if</font> <a href='../Y/502.html' title='Multiple used in 39 places.'>LINUX_VERSION_CODE</a> &gt;= <a href='../Y/480.html' title='Multiple used in 39 places.'>KERNEL_VERSION</a>(2,6,14)
<a name='L821'> 821                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/16.html' title='Multiple used in 2 places.'>ADVERTISED_Pause</a>)
<a name='L822'> 822                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3562.html' title='Multiple defined in 3 places.'>OFPPF_PAUSE</a>;
<a name='L823'> 823                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1346.html' title='Multiple used in 25 places.'>advertising</a> &amp; <a href='../Y/13.html' title='Multiple used in 2 places.'>ADVERTISED_Asym_Pause</a>)
<a name='L824'> 824                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> |= <a href='../D/3563.html' title='Multiple defined in 3 places.'>OFPPF_PAUSE_ASYM</a>;
<a name='L825'> 825 <font color='darkred'>#endif</font> <i><font color='green'>/* kernel &gt;= 2.6.14 */</font></i>
<a name='L826'> 826 
<a name='L827'> 827                         <i><font color='green'>/* Set the current features */</font></i>
<a name='L828'> 828                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> == <a href='../Y/842.html' title='Multiple used in 2 places.'>SPEED_10</a>)
<a name='L829'> 829                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/2610.html' title='Multiple used in 7 places.'>duplex</a>) ? <a href='../D/3552.html' title='Multiple defined in 3 places.'>OFPPF_10MB_FD</a> : <a href='../D/3553.html' title='Multiple defined in 3 places.'>OFPPF_10MB_HD</a>;
<a name='L830'> 830                         <b>else</b> <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> == <a href='../Y/843.html' title='Multiple used in 2 places.'>SPEED_100</a>)
<a name='L831'> 831                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/2610.html' title='Multiple used in 7 places.'>duplex</a>) ? <a href='../D/3549.html' title='Multiple defined in 3 places.'>OFPPF_100MB_FD</a> : <a href='../D/3550.html' title='Multiple defined in 3 places.'>OFPPF_100MB_HD</a>;
<a name='L832'> 832                         <b>else</b> <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> == <a href='../Y/844.html' title='Multiple used in 3 places.'>SPEED_1000</a>)
<a name='L833'> 833                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/2610.html' title='Multiple used in 7 places.'>duplex</a>) ? <a href='../D/3554.html' title='Multiple defined in 3 places.'>OFPPF_1GB_FD</a> : <a href='../D/3555.html' title='Multiple defined in 3 places.'>OFPPF_1GB_HD</a>;
<a name='L834'> 834                         <b>else</b> <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/6916.html' title='Multiple used in 35 places.'>speed</a> == <a href='../Y/845.html' title='Multiple used in 3 places.'>SPEED_10000</a>)
<a name='L835'> 835                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = <a href='../D/3551.html' title='Multiple defined in 3 places.'>OFPPF_10GB_FD</a>;
<a name='L836'> 836 
<a name='L837'> 837                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a> == <a href='../Y/694.html' title='Multiple used in 3 places.'>PORT_TP</a>) 
<a name='L838'> 838                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> |= <a href='../D/3559.html' title='Multiple defined in 3 places.'>OFPPF_COPPER</a>;
<a name='L839'> 839                         <b>else</b> <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a> == <a href='../Y/693.html' title='Multiple used in 2 places.'>PORT_FIBRE</a>) 
<a name='L840'> 840                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> |= <a href='../D/3560.html' title='Multiple defined in 3 places.'>OFPPF_FIBER</a>;
<a name='L841'> 841 
<a name='L842'> 842                         <b>if</b> (<a href='../Y/2628.html' title='Multiple used in 75 places.'>ecmd</a>.<a href='../Y/1533.html' title='Multiple used in 3 places.'>autoneg</a>)
<a name='L843'> 843                                 <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> |= <a href='../D/3558.html' title='Multiple defined in 3 places.'>OFPPF_AUTONEG</a>;
<a name='L844'> 844                 <font color='red'>}</font>
<a name='L845'> 845         <font color='red'>}</font>
<a name='L846'> 846 <font color='darkred'>#endif</font>
<a name='L847'> 847         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/2219.html' title='Multiple used in 811 places.'>curr</a>);
<a name='L848'> 848         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/7167.html' title='Multiple used in 79 places.'>supported</a>);
<a name='L849'> 849         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/1343.html' title='Multiple used in 51 places.'>advertised</a>);
<a name='L850'> 850         <a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/5700.html' title='Multiple used in 46 places.'>peer</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>-&gt;<a href='../Y/5700.html' title='Multiple used in 46 places.'>peer</a>);
<a name='L851'> 851 <font color='red'>}</font>
<a name='L852'> 852 
<a name='L853'> 853 <b>static</b> <b>int</b> 
<a name='L854'> 854 <a href='../S/293.html#L892' title='Refered from 892 in cbench/openflow/datapath/datapath.c.'>fill_features_reply</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>struct</b> <a href='../Y/5336.html' title='Multiple used in 4 places.'>ofp_switch_features</a> *<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>)
<a name='L855'> 855 <font color='red'>{</font>
<a name='L856'> 856         <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>;
<a name='L857'> 857         <a href='../Y/7623.html' title='Multiple used in 568 places.'>uint64_t</a> <a href='../Y/2531.html' title='Multiple used in 319 places.'>dpid</a> = <a href='../S/293.html#L256' title='Defined at 256 in cbench/openflow/datapath/datapath.c.'>get_datapath_id</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>);
<a name='L858'> 858         <b>int</b> <a href='../Y/5806.html' title='Multiple used in 7 places.'>port_count</a> = 0;
<a name='L859'> 859 
<a name='L860'> 860         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/2281.html' title='Multiple used in 28 places.'>datapath_id</a>  = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/2531.html' title='Multiple used in 319 places.'>dpid</a>);
<a name='L861'> 861 
<a name='L862'> 862         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/4573.html' title='Multiple used in 18 places.'>n_buffers</a>    = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../D/3245.html' title='Multiple defined in 2 places.'>N_PKT_BUFFERS</a>);
<a name='L863'> 863         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/4620.html' title='Multiple used in 45 places.'>n_tables</a>     = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/4620.html' title='Multiple used in 45 places.'>n_tables</a>;
<a name='L864'> 864         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/1792.html' title='Multiple used in 28 places.'>capabilities</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../D/3762.html' title='Multiple defined in 2 places.'>OFP_SUPPORTED_CAPABILITIES</a>);
<a name='L865'> 865         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/1294.html' title='Multiple used in 157 places.'>actions</a>      = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../D/3761.html' title='Multiple defined in 2 places.'>OFP_SUPPORTED_ACTIONS</a>);
<a name='L866'> 866         <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>, 0, <b>sizeof</b> <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>);
<a name='L867'> 867 
<a name='L868'> 868         <a href='../Y/4163.html' title='Multiple used in 3 places.'>list_for_each_entry_rcu</a> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, &amp;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5817.html' title='Multiple used in 29 places.'>port_list</a>, <a href='../Y/4917.html' title='Multiple used in 268 places.'>node</a>) <font color='red'>{</font>
<a name='L869'> 869                 <a href='../D/7819.html' title='Multiple defined in 2 places.'>fill_port_desc</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, &amp;<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/5841.html' title='Multiple used in 64 places.'>ports</a>[<a href='../Y/5806.html' title='Multiple used in 7 places.'>port_count</a>]);
<a name='L870'> 870                 <a href='../Y/5806.html' title='Multiple used in 7 places.'>port_count</a>++;
<a name='L871'> 871         <font color='red'>}</font>
<a name='L872'> 872 
<a name='L873'> 873         <b>return</b> <a href='../Y/5806.html' title='Multiple used in 7 places.'>port_count</a>;
<a name='L874'> 874 <font color='red'>}</font>
<a name='L875'> 875 
<a name='L876'> 876 <b>int</b>
<a name='L877'> 877 <a href='../R/2807.html' title='Multiple refered from 3 places.'>dp_send_features_reply</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>struct</b> <a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a> *<a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a>)
<a name='L878'> 878 <font color='red'>{</font>
<a name='L879'> 879         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>;
<a name='L880'> 880         <b>struct</b> <a href='../D/8902.html' title='Multiple defined in 3 places.'>ofp_switch_features</a> *<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>;
<a name='L881'> 881         <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/5414.html' title='Multiple used in 3 places.'>ofr_len</a>, <a href='../Y/5819.html' title='Multiple used in 3 places.'>port_max_len</a>;
<a name='L882'> 882         <b>int</b> <a href='../Y/5806.html' title='Multiple used in 7 places.'>port_count</a>;
<a name='L883'> 883 
<a name='L884'> 884         <i><font color='green'>/* Overallocate. */</font></i>
<a name='L885'> 885         <a href='../Y/5819.html' title='Multiple used in 3 places.'>port_max_len</a> = <b>sizeof</b>(<b>struct</b> <a href='../D/8852.html' title='Multiple defined in 2 places.'>ofp_phy_port</a>) * <a href='../D/1464.html' title='Multiple defined in 2 places.'>DP_MAX_PORTS</a>;
<a name='L886'> 886         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a> = <a href='../S/293.html#L205' title='Defined at 205 in cbench/openflow/datapath/datapath.c.'>alloc_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>sizeof</b>(*<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>) + <a href='../Y/5819.html' title='Multiple used in 3 places.'>port_max_len</a>,
<a name='L887'> 887                                  <a href='../D/3665.html' title='Multiple defined in 3 places.'>OFPT_FEATURES_REPLY</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>, &amp;<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L888'> 888         <b>if</b> (!<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>)
<a name='L889'> 889                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L890'> 890 
<a name='L891'> 891         <i><font color='green'>/* Fill. */</font></i>
<a name='L892'> 892         <a href='../Y/5806.html' title='Multiple used in 7 places.'>port_count</a> = <a href='../S/293.html#L854' title='Defined at 854 in cbench/openflow/datapath/datapath.c.'>fill_features_reply</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>);
<a name='L893'> 893 
<a name='L894'> 894         <i><font color='green'>/* Shrink to fit. */</font></i>
<a name='L895'> 895         <a href='../Y/5414.html' title='Multiple used in 3 places.'>ofr_len</a> = <b>sizeof</b>(*<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>) + (<b>sizeof</b>(<b>struct</b> <a href='../D/8852.html' title='Multiple defined in 2 places.'>ofp_phy_port</a>) * <a href='../Y/5806.html' title='Multiple used in 7 places.'>port_count</a>);
<a name='L896'> 896         <a href='../S/293.html#L188' title='Defined at 188 in cbench/openflow/datapath/datapath.c.'>resize_openflow_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, &amp;<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/3593.html' title='Multiple used in 234 places.'>header</a>, <a href='../Y/5414.html' title='Multiple used in 3 places.'>ofr_len</a>);
<a name='L897'> 897         <b>return</b> <a href='../S/293.html#L246' title='Defined at 246 in cbench/openflow/datapath/datapath.c.'>send_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>);
<a name='L898'> 898 <font color='red'>}</font>
<a name='L899'> 899 
<a name='L900'> 900 <b>int</b>
<a name='L901'> 901 <a href='../R/2804.html' title='Multiple refered from 2 places.'>dp_send_config_reply</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>struct</b> <a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a> *<a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a>)
<a name='L902'> 902 <font color='red'>{</font>
<a name='L903'> 903         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>;
<a name='L904'> 904         <b>struct</b> <a href='../D/8900.html' title='Multiple defined in 3 places.'>ofp_switch_config</a> *<a href='../Y/5520.html' title='Multiple used in 22 places.'>osc</a>;
<a name='L905'> 905 
<a name='L906'> 906         <a href='../Y/5520.html' title='Multiple used in 22 places.'>osc</a> = <a href='../S/293.html#L205' title='Defined at 205 in cbench/openflow/datapath/datapath.c.'>alloc_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>sizeof</b> *<a href='../Y/5520.html' title='Multiple used in 22 places.'>osc</a>, <a href='../D/3672.html' title='Multiple defined in 3 places.'>OFPT_GET_CONFIG_REPLY</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>,
<a name='L907'> 907                                  &amp;<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L908'> 908         <b>if</b> (!<a href='../Y/5520.html' title='Multiple used in 22 places.'>osc</a>)
<a name='L909'> 909                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L910'> 910 
<a name='L911'> 911         <a href='../Y/5520.html' title='Multiple used in 22 places.'>osc</a>-&gt;<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>);
<a name='L912'> 912         <a href='../Y/5520.html' title='Multiple used in 22 places.'>osc</a>-&gt;<a href='../Y/4473.html' title='Multiple used in 19 places.'>miss_send_len</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4473.html' title='Multiple used in 19 places.'>miss_send_len</a>);
<a name='L913'> 913 
<a name='L914'> 914         <b>return</b> <a href='../S/293.html#L246' title='Defined at 246 in cbench/openflow/datapath/datapath.c.'>send_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>);
<a name='L915'> 915 <font color='red'>}</font>
<a name='L916'> 916 
<a name='L917'> 917 <b>int</b>
<a name='L918'> 918 <a href='../R/2809.html' title='Multiple refered from 2 places.'>dp_send_hello</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>struct</b> <a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a> *<a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a>,
<a name='L919'> 919               <b>const</b> <b>struct</b> <a href='../Y/5176.html' title='Multiple used in 54 places.'>ofp_header</a> *<a href='../Y/6400.html' title='Multiple used in 153 places.'>request</a>)
<a name='L920'> 920 <font color='red'>{</font>
<a name='L921'> 921         <b>if</b> (<a href='../Y/6400.html' title='Multiple used in 153 places.'>request</a>-&gt;<a href='../Y/7770.html' title='Multiple used in 173 places.'>version</a> &lt; <a href='../Y/621.html' title='Multiple used in 78 places.'>OFP_VERSION</a>) <font color='red'>{</font>
<a name='L922'> 922                 <b>char</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>[64];
<a name='L923'> 923                 <a href='../Y/6924.html' title='Multiple used in 107 places.'>sprintf</a>(<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>, "Only version 0x%02x supported", <a href='../Y/621.html' title='Multiple used in 78 places.'>OFP_VERSION</a>);
<a name='L924'> 924                 <a href='../D/7549.html' title='Multiple defined in 2 places.'>dp_send_error_msg</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>, <a href='../D/3395.html' title='Multiple defined in 3 places.'>OFPET_HELLO_FAILED</a>,
<a name='L925'> 925                                   <a href='../D/3479.html' title='Multiple defined in 3 places.'>OFPHFC_INCOMPATIBLE</a>, <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>, <a href='../Y/7098.html' title='Multiple used in 203 places.'>strlen</a>(<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>));
<a name='L926'> 926                 <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L927'> 927         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L928'> 928                 <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>;
<a name='L929'> 929                 <b>struct</b> <a href='../D/8801.html' title='Multiple defined in 3 places.'>ofp_header</a> *<a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a>;
<a name='L930'> 930 
<a name='L931'> 931                 <a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a> = <a href='../S/293.html#L205' title='Defined at 205 in cbench/openflow/datapath/datapath.c.'>alloc_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>sizeof</b> *<a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a>,
<a name='L932'> 932                                            <a href='../D/3675.html' title='Multiple defined in 3 places.'>OFPT_HELLO</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>, &amp;<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L933'> 933                 <b>if</b> (!<a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a>)
<a name='L934'> 934                         <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L935'> 935 
<a name='L936'> 936                 <b>return</b> <a href='../S/293.html#L246' title='Defined at 246 in cbench/openflow/datapath/datapath.c.'>send_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>);
<a name='L937'> 937         <font color='red'>}</font>
<a name='L938'> 938 <font color='red'>}</font>
<a name='L939'> 939 
<a name='L940'> 940 <b>int</b>
<a name='L941'> 941 <a href='../R/2803.html' title='Multiple refered from 2 places.'>dp_send_barrier_reply</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>struct</b> <a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a> *<a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a>,
<a name='L942'> 942                       <b>const</b> <b>struct</b> <a href='../Y/5176.html' title='Multiple used in 54 places.'>ofp_header</a> *<a href='../Y/6400.html' title='Multiple used in 153 places.'>request</a>)
<a name='L943'> 943 <font color='red'>{</font>
<a name='L944'> 944         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>;
<a name='L945'> 945         <b>struct</b> <a href='../D/8801.html' title='Multiple defined in 3 places.'>ofp_header</a> *<a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a>;
<a name='L946'> 946 
<a name='L947'> 947         <a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a> = <a href='../S/293.html#L205' title='Defined at 205 in cbench/openflow/datapath/datapath.c.'>alloc_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>sizeof</b> *<a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a>,
<a name='L948'> 948                                    <a href='../D/3656.html' title='Multiple defined in 3 places.'>OFPT_BARRIER_REPLY</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>, &amp;<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L949'> 949         <b>if</b> (!<a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a>)
<a name='L950'> 950                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L951'> 951 
<a name='L952'> 952         <b>return</b> <a href='../S/293.html#L246' title='Defined at 246 in cbench/openflow/datapath/datapath.c.'>send_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>);
<a name='L953'> 953 <font color='red'>}</font>
<a name='L954'> 954 
<a name='L955'> 955 <b>int</b>
<a name='L956'> 956 <a href='../R/2813.html' title='Multiple refered from 2 places.'>dp_update_port_flags</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>struct</b> <a href='../Y/5274.html' title='Multiple used in 7 places.'>ofp_port_mod</a> *<a href='../Y/5488.html' title='Multiple used in 48 places.'>opm</a>)
<a name='L957'> 957 <font color='red'>{</font>
<a name='L958'> 958         <b>unsigned</b> <b>long</b> <b>int</b> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>;
<a name='L959'> 959         <b>int</b> <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> = <a href='../D/8631.html' title='Multiple defined in 2 places.'>ntohs</a>(<a href='../Y/5488.html' title='Multiple used in 48 places.'>opm</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>);
<a name='L960'> 960         <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>;
<a name='L961'> 961         <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> = (<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> &lt; <a href='../D/1464.html' title='Multiple defined in 2 places.'>DP_MAX_PORTS</a> ? <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5841.html' title='Multiple used in 64 places.'>ports</a>[<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>]
<a name='L962'> 962              : <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> == <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a> ? <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4196.html' title='Multiple used in 23 places.'>local_port</a>
<a name='L963'> 963              : <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L964'> 964 
<a name='L965'> 965         <i><font color='green'>/* Make sure the port id hasn't changed since this was sent */</font></i>
<a name='L966'> 966         <b>if</b> (!<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> || <a href='../Y/4416.html' title='Multiple used in 69 places.'>memcmp</a>(<a href='../Y/5488.html' title='Multiple used in 48 places.'>opm</a>-&gt;<a href='../Y/3680.html' title='Multiple used in 27 places.'>hw_addr</a>, <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/2360.html' title='Multiple used in 10 places.'>dev_addr</a>, <a href='../D/1677.html' title='Multiple defined in 6 places.'>ETH_ALEN</a>))
<a name='L967'> 967                 <b>return</b> -1;
<a name='L968'> 968 
<a name='L969'> 969         <a href='../Y/6919.html' title='Multiple used in 9 places.'>spin_lock_irqsave</a>(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/4206.html' title='Multiple used in 348 places.'>lock</a>, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>);
<a name='L970'> 970         <b>if</b> (<a href='../Y/5488.html' title='Multiple used in 48 places.'>opm</a>-&gt;<a href='../Y/4338.html' title='Multiple used in 220 places.'>mask</a>) <font color='red'>{</font>
<a name='L971'> 971                 <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/2060.html' title='Multiple used in 6 places.'>config_mask</a> = <a href='../Y/4953.html' title='Multiple used in 218 places.'>ntohl</a>(<a href='../Y/5488.html' title='Multiple used in 48 places.'>opm</a>-&gt;<a href='../Y/4338.html' title='Multiple used in 220 places.'>mask</a>);
<a name='L972'> 972                 <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2052.html' title='Multiple used in 115 places.'>config</a> &amp;= ~<a href='../Y/2060.html' title='Multiple used in 6 places.'>config_mask</a>;
<a name='L973'> 973                 <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2052.html' title='Multiple used in 115 places.'>config</a> |= <a href='../Y/4953.html' title='Multiple used in 218 places.'>ntohl</a>(<a href='../Y/5488.html' title='Multiple used in 48 places.'>opm</a>-&gt;<a href='../Y/2052.html' title='Multiple used in 115 places.'>config</a>) &amp; <a href='../Y/2060.html' title='Multiple used in 6 places.'>config_mask</a>;
<a name='L974'> 974         <font color='red'>}</font>
<a name='L975'> 975         <a href='../Y/6921.html' title='Multiple used in 11 places.'>spin_unlock_irqrestore</a>(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/4206.html' title='Multiple used in 348 places.'>lock</a>, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>);
<a name='L976'> 976 
<a name='L977'> 977         <b>return</b> 0;
<a name='L978'> 978 <font color='red'>}</font>
<a name='L979'> 979 
<a name='L980'> 980 <i><font color='green'>/* Initialize the port status field of the bridge port. */</font></i>
<a name='L981'> 981 <b>static</b> <b>void</b>
<a name='L982'> 982 <a href='../R/3295.html' title='Multiple refered from 2 places.'>init_port_status</a>(<b>struct</b> <a href='../Y/4698.html' title='Multiple used in 15 places.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>)
<a name='L983'> 983 <font color='red'>{</font>
<a name='L984'> 984         <b>unsigned</b> <b>long</b> <b>int</b> <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>;
<a name='L985'> 985 
<a name='L986'> 986         <a href='../Y/6919.html' title='Multiple used in 9 places.'>spin_lock_irqsave</a>(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/4206.html' title='Multiple used in 348 places.'>lock</a>, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>);
<a name='L987'> 987 
<a name='L988'> 988         <b>if</b> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> &amp; <a href='../Y/450.html' title='Multiple used in 6 places.'>IFF_UP</a>) 
<a name='L989'> 989                 <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2052.html' title='Multiple used in 115 places.'>config</a> &amp;= ~<a href='../D/3547.html' title='Multiple defined in 3 places.'>OFPPC_PORT_DOWN</a>;
<a name='L990'> 990         <b>else</b>
<a name='L991'> 991                 <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2052.html' title='Multiple used in 115 places.'>config</a> |= <a href='../D/3547.html' title='Multiple defined in 3 places.'>OFPPC_PORT_DOWN</a>;
<a name='L992'> 992 
<a name='L993'> 993         <b>if</b> (<a href='../Y/4722.html' title='Multiple used in 4 places.'>netif_carrier_ok</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>))
<a name='L994'> 994                 <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a> &amp;= ~<a href='../D/3573.html' title='Multiple defined in 3 places.'>OFPPS_LINK_DOWN</a>;
<a name='L995'> 995         <b>else</b>
<a name='L996'> 996                 <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a> |= <a href='../D/3573.html' title='Multiple defined in 3 places.'>OFPPS_LINK_DOWN</a>;
<a name='L997'> 997 
<a name='L998'> 998         <a href='../Y/6921.html' title='Multiple used in 11 places.'>spin_unlock_irqrestore</a>(&amp;<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/4206.html' title='Multiple used in 348 places.'>lock</a>, <a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a>);
<a name='L999'> 999 <font color='red'>}</font>
<a name='L1000'>1000 
<a name='L1001'>1001 <b>int</b>
<a name='L1002'>1002 <a href='../R/2810.html' title='Multiple refered from 3 places.'>dp_send_port_status</a>(<b>struct</b> <a href='../Y/4698.html' title='Multiple used in 15 places.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, <a href='../Y/7625.html' title='Multiple used in 747 places.'>uint8_t</a> <a href='../Y/7040.html' title='Multiple used in 97 places.'>status</a>)
<a name='L1003'>1003 <font color='red'>{</font>
<a name='L1004'>1004         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>;
<a name='L1005'>1005         <b>struct</b> <a href='../D/8863.html' title='Multiple defined in 3 places.'>ofp_port_status</a> *<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>;
<a name='L1006'>1006 
<a name='L1007'>1007         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a> = <a href='../S/293.html#L205' title='Defined at 205 in cbench/openflow/datapath/datapath.c.'>alloc_openflow_skb</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>sizeof</b> *<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>, <a href='../D/3684.html' title='Multiple defined in 3 places.'>OFPT_PORT_STATUS</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>,
<a name='L1008'>1008                                  &amp;<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L1009'>1009         <b>if</b> (!<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>)
<a name='L1010'>1010                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1011'>1011         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/6294.html' title='Multiple used in 94 places.'>reason</a> = <a href='../Y/7040.html' title='Multiple used in 97 places.'>status</a>;
<a name='L1012'>1012         <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>, 0, <b>sizeof</b> <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>);
<a name='L1013'>1013         <a href='../D/7819.html' title='Multiple defined in 2 places.'>fill_port_desc</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>, &amp;<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/2332.html' title='Multiple used in 133 places.'>desc</a>);
<a name='L1014'>1014 
<a name='L1015'>1015         <b>return</b> <a href='../S/293.html#L246' title='Defined at 246 in cbench/openflow/datapath/datapath.c.'>send_openflow_skb</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L1016'>1016 <font color='red'>}</font>
<a name='L1017'>1017 
<a name='L1018'>1018 <i><font color='green'>/* Convert jiffies_64 to seconds. */</font></i>
<a name='L1019'>1019 <b>static</b> <a href='../S/851.html#L52' title='Defined at 52 in cbench/openflow/lib/netdev.c.'>u32</a> <b>inline</b> <a href='../R/3332.html' title='Multiple refered from 3 places.'>jiffies_64_to_secs</a>(<a href='../Y/7568.html' title='Multiple used in 3 places.'>u64</a> <a href='../Y/3969.html' title='Multiple used in 385 places.'>j</a>)
<a name='L1020'>1020 <font color='red'>{</font>
<a name='L1021'>1021         <i><font color='green'>/* Call to do_div is necessary as we can't do a 64-bit division in a</font></i>
<a name='L1022'>1022 <i><font color='green'>         * 32-bit kernel (at least not without linking to libgcc) */</font></i>
<a name='L1023'>1023         <a href='../Y/2485.html' title='Multiple used in 2 places.'>do_div</a>(<a href='../Y/3969.html' title='Multiple used in 385 places.'>j</a>, <a href='../Y/439.html' title='Multiple used in 8 places.'>HZ</a>);
<a name='L1024'>1024         <b>return</b> <a href='../Y/3969.html' title='Multiple used in 385 places.'>j</a>;
<a name='L1025'>1025 <font color='red'>}</font>
<a name='L1026'>1026 
<a name='L1027'>1027 <i><font color='green'>/* Convert jiffies_64 to just the nanosec part between seconds. */</font></i>
<a name='L1028'>1028 <b>static</b> <a href='../S/851.html#L52' title='Defined at 52 in cbench/openflow/lib/netdev.c.'>u32</a> <b>inline</b> <a href='../R/3331.html' title='Multiple refered from 2 places.'>jiffies_64_to_nsecs</a>(<a href='../Y/7568.html' title='Multiple used in 3 places.'>u64</a> <a href='../Y/3969.html' title='Multiple used in 385 places.'>j</a>)
<a name='L1029'>1029 <font color='red'>{</font>
<a name='L1030'>1030         <i><font color='green'>/* Call to do_div is necessary as we can't do a 64-bit division in a</font></i>
<a name='L1031'>1031 <i><font color='green'>         * 32-bit kernel (at least not without linking to libgcc) */</font></i>
<a name='L1032'>1032         <b>return</b> (<a href='../Y/3969.html' title='Multiple used in 385 places.'>j</a> - <a href='../S/293.html#L1019' title='Defined at 1019 in cbench/openflow/datapath/datapath.c.'>jiffies_64_to_secs</a>(<a href='../Y/3969.html' title='Multiple used in 385 places.'>j</a>));
<a name='L1033'>1033 <font color='red'>}</font>
<a name='L1034'>1034 
<a name='L1035'>1035 <b>int</b> 
<a name='L1036'>1036 <a href='../R/2808.html' title='Multiple refered from 12 places.'>dp_send_flow_end</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>struct</b> <a href='../Y/7178.html' title='Multiple used in 120 places.'>sw_flow</a> *<a href='../Y/3131.html' title='Multiple used in 114 places.'>flow</a>,
<a name='L1037'>1037                      <b>enum</b> <a href='../Y/5155.html' title='Multiple used in 10 places.'>ofp_flow_removed_reason</a> <a href='../Y/6294.html' title='Multiple used in 94 places.'>reason</a>)
<a name='L1038'>1038 <font color='red'>{</font>
<a name='L1039'>1039         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>;
<a name='L1040'>1040         <b>struct</b> <a href='../D/8783.html' title='Multiple defined in 3 places.'>ofp_flow_removed</a> *<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>;
<a name='L1041'>1041 
<a name='L1042'>1042         <b>if</b> (!<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/6656.html' title='Multiple used in 10 places.'>send_flow_rem</a>)
<a name='L1043'>1043                 <b>return</b> 0;
<a name='L1044'>1044 
<a name='L1045'>1045         <b>if</b> (<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/2657.html' title='Multiple used in 14 places.'>emerg_flow</a>)
<a name='L1046'>1046                 <b>return</b> 0;
<a name='L1047'>1047 
<a name='L1048'>1048         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a> = <a href='../S/293.html#L205' title='Defined at 205 in cbench/openflow/datapath/datapath.c.'>alloc_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>sizeof</b> *<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>, <a href='../D/3669.html' title='Multiple defined in 3 places.'>OFPT_FLOW_REMOVED</a>, 0, &amp;<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L1049'>1049         <b>if</b> (!<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>)
<a name='L1050'>1050                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1051'>1051 
<a name='L1052'>1052         <a href='../D/7842.html' title='Multiple defined in 2 places.'>flow_fill_match</a>(&amp;<a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>, &amp;<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>);
<a name='L1053'>1053 
<a name='L1054'>1054         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/5909.html' title='Multiple used in 182 places.'>priority</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/5909.html' title='Multiple used in 182 places.'>priority</a>);
<a name='L1055'>1055         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/6294.html' title='Multiple used in 94 places.'>reason</a> = <a href='../Y/6294.html' title='Multiple used in 94 places.'>reason</a>;
<a name='L1056'>1056 
<a name='L1057'>1057         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/2614.html' title='Multiple used in 24 places.'>duration_sec</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../S/293.html#L1019' title='Defined at 1019 in cbench/openflow/datapath/datapath.c.'>jiffies_64_to_secs</a>(<a href='../Y/3383.html' title='Multiple used in 9 places.'>get_jiffies_64</a>()-<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/2191.html' title='Multiple used in 11 places.'>created</a>));
<a name='L1058'>1058         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/2613.html' title='Multiple used in 24 places.'>duration_nsec</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../S/293.html#L1028' title='Defined at 1028 in cbench/openflow/datapath/datapath.c.'>jiffies_64_to_nsecs</a>(<a href='../Y/3383.html' title='Multiple used in 9 places.'>get_jiffies_64</a>()-<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/2191.html' title='Multiple used in 11 places.'>created</a>));
<a name='L1059'>1059         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../S/935.html#L773' title='Defined at 773 in src/cli.c.'>idle_timeout</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../S/935.html#L773' title='Defined at 773 in src/cli.c.'>idle_timeout</a>);
<a name='L1060'>1060 
<a name='L1061'>1061         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/5595.html' title='Multiple used in 48 places.'>packet_count</a> = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/5595.html' title='Multiple used in 48 places.'>packet_count</a>);
<a name='L1062'>1062         <a href='../Y/5413.html' title='Multiple used in 44 places.'>ofr</a>-&gt;<a href='../Y/1732.html' title='Multiple used in 68 places.'>byte_count</a>   = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/1732.html' title='Multiple used in 68 places.'>byte_count</a>);
<a name='L1063'>1063 
<a name='L1064'>1064         <b>return</b> <a href='../S/293.html#L246' title='Defined at 246 in cbench/openflow/datapath/datapath.c.'>send_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L1065'>1065 <font color='red'>}</font>
<a name='L1066'>1066 EXPORT_SYMBOL(dp_send_flow_end);
<a name='L1067'>1067 
<a name='L1068'>1068 <b>int</b>
<a name='L1069'>1069 <a href='../R/2806.html' title='Multiple refered from 33 places.'>dp_send_error_msg</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>struct</b> <a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a> *<a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a>, 
<a name='L1070'>1070                 <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/1956.html' title='Multiple used in 147 places.'>code</a>, <b>const</b> <b>void</b> *<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>, <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>)
<a name='L1071'>1071 <font color='red'>{</font>
<a name='L1072'>1072         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>;
<a name='L1073'>1073         <b>struct</b> <a href='../D/8772.html' title='Multiple defined in 3 places.'>ofp_error_msg</a> *<a href='../Y/5043.html' title='Multiple used in 17 places.'>oem</a>;
<a name='L1074'>1074 
<a name='L1075'>1075 
<a name='L1076'>1076         <a href='../Y/5043.html' title='Multiple used in 17 places.'>oem</a> = <a href='../S/293.html#L205' title='Defined at 205 in cbench/openflow/datapath/datapath.c.'>alloc_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>sizeof</b>(*<a href='../Y/5043.html' title='Multiple used in 17 places.'>oem</a>)+<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>, <a href='../D/3662.html' title='Multiple defined in 3 places.'>OFPT_ERROR</a>, 
<a name='L1077'>1077                         <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>, &amp;<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L1078'>1078         <b>if</b> (!<a href='../Y/5043.html' title='Multiple used in 17 places.'>oem</a>)
<a name='L1079'>1079                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1080'>1080 
<a name='L1081'>1081         <a href='../Y/5043.html' title='Multiple used in 17 places.'>oem</a>-&gt;<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>);
<a name='L1082'>1082         <a href='../Y/5043.html' title='Multiple used in 17 places.'>oem</a>-&gt;<a href='../Y/1956.html' title='Multiple used in 147 places.'>code</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/1956.html' title='Multiple used in 147 places.'>code</a>);
<a name='L1083'>1083         <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/5043.html' title='Multiple used in 17 places.'>oem</a>-&gt;<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>, <a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>, <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>);
<a name='L1084'>1084 
<a name='L1085'>1085         <b>return</b> <a href='../S/293.html#L246' title='Defined at 246 in cbench/openflow/datapath/datapath.c.'>send_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>);
<a name='L1086'>1086 <font color='red'>}</font>
<a name='L1087'>1087 
<a name='L1088'>1088 <b>int</b>
<a name='L1089'>1089 <a href='../R/2805.html' title='Multiple refered from 2 places.'>dp_send_echo_reply</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>struct</b> <a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a> *<a href='../Y/6661.html' title='Multiple used in 63 places.'>sender</a>,
<a name='L1090'>1090                    <b>const</b> <b>struct</b> <a href='../Y/5176.html' title='Multiple used in 54 places.'>ofp_header</a> *<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>)
<a name='L1091'>1091 <font color='red'>{</font>
<a name='L1092'>1092         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>;
<a name='L1093'>1093         <b>struct</b> <a href='../D/8801.html' title='Multiple defined in 3 places.'>ofp_header</a> *<a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a>;
<a name='L1094'>1094 
<a name='L1095'>1095         <a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a> = <a href='../S/293.html#L205' title='Defined at 205 in cbench/openflow/datapath/datapath.c.'>alloc_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../D/8631.html' title='Multiple defined in 2 places.'>ntohs</a>(<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a>), <a href='../D/3658.html' title='Multiple defined in 3 places.'>OFPT_ECHO_REPLY</a>,
<a name='L1096'>1096                                    <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>, &amp;<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>);
<a name='L1097'>1097         <b>if</b> (!<a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a>)
<a name='L1098'>1098                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1099'>1099 
<a name='L1100'>1100         <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/6383.html' title='Multiple used in 144 places.'>reply</a> + 1, <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a> + 1, <a href='../D/8631.html' title='Multiple defined in 2 places.'>ntohs</a>(<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a>) - <b>sizeof</b> *<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>);
<a name='L1101'>1101         <b>return</b> <a href='../S/293.html#L246' title='Defined at 246 in cbench/openflow/datapath/datapath.c.'>send_openflow_skb</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>);
<a name='L1102'>1102 <font color='red'>}</font>
<a name='L1103'>1103 
<a name='L1104'>1104 <i><font color='green'>/* Generic Netlink interface.</font></i>
<a name='L1105'>1105 <i><font color='green'> *</font></i>
<a name='L1106'>1106 <i><font color='green'> * See netlink(7) for an introduction to netlink.  See</font></i>
<a name='L1107'>1107 <i><font color='green'> * http://linux-net.osdl.org/index.php/Netlink for more information and</font></i>
<a name='L1108'>1108 <i><font color='green'> * pointers on how to work with netlink and Generic Netlink in the kernel and</font></i>
<a name='L1109'>1109 <i><font color='green'> * in userspace. */</font></i>
<a name='L1110'>1110 
<a name='L1111'>1111 <b>static</b> <b>struct</b> <a href='../Y/3327.html' title='Multiple used in 7 places.'>genl_family</a> <a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a> = <font color='red'>{</font>
<a name='L1112'>1112         .<a href='../Y/3709.html' title='Multiple used in 808 places.'>id</a> = GENL_ID_GENERATE,
<a name='L1113'>1113         .<a href='../Y/3590.html' title='Multiple used in 3 places.'>hdrsize</a> = 0,
<a name='L1114'>1114         .<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a> = <a href='../S/184.html#L37' title='Defined at 37 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_FAMILY_NAME</a>,
<a name='L1115'>1115         .<a href='../Y/7770.html' title='Multiple used in 173 places.'>version</a> = 1,
<a name='L1116'>1116         .maxattr = <a href='../S/184.html#L49' title='Defined at 49 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_MAX</a>,
<a name='L1117'>1117 <font color='red'>}</font>;
<a name='L1118'>1118 
<a name='L1119'>1119 <i><font color='green'>/* Attribute policy: what each attribute may contain.  */</font></i>
<a name='L1120'>1120 <b>static</b> <b>struct</b> <a href='../Y/4891.html' title='Multiple used in 2 places.'>nla_policy</a> <a href='../Y/2519.html' title='Multiple used in 6 places.'>dp_genl_policy</a>[<a href='../S/184.html#L49' title='Defined at 49 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_MAX</a> + 1] = <font color='red'>{</font>
<a name='L1121'>1121         [<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>] = <font color='red'>{</font> .<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../Y/584.html' title='Multiple used in 3 places.'>NLA_U32</a> <font color='red'>}</font>,
<a name='L1122'>1122         [<a href='../S/184.html#L46' title='Defined at 46 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_NAME</a>] = <font color='red'>{</font> .<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../S/305.html#L7' title='Defined at 7 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/net/netlink.h.'>NLA_NUL_STRING</a> <font color='red'>}</font>,
<a name='L1123'>1123         [<a href='../S/184.html#L44' title='Defined at 44 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_MC_GROUP</a>] = <font color='red'>{</font> .<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../Y/584.html' title='Multiple used in 3 places.'>NLA_U32</a> <font color='red'>}</font>,
<a name='L1124'>1124         [<a href='../S/184.html#L43' title='Defined at 43 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_PORTNAME</a>] = <font color='red'>{</font> .<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../S/305.html#L7' title='Defined at 7 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/net/netlink.h.'>NLA_NUL_STRING</a> <font color='red'>}</font>
<a name='L1125'>1125 <font color='red'>}</font>;
<a name='L1126'>1126 
<a name='L1127'>1127 <b>static</b> <b>int</b> <a href='../S/293.html#L1147' title='Refered from 1147 in cbench/openflow/datapath/datapath.c.'>dp_genl_add</a>(<b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>struct</b> <a href='../Y/3328.html' title='Multiple used in 8 places.'>genl_info</a> *<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>)
<a name='L1128'>1128 <font color='red'>{</font>
<a name='L1129'>1129         <b>int</b> <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> = <a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>] ?
<a name='L1130'>1130                         <a href='../Y/4888.html' title='Multiple used in 3 places.'>nla_get_u32</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>]) : -1;
<a name='L1131'>1131         <b>const</b> <b>char</b> *<a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a> = <a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L46' title='Defined at 46 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_NAME</a>] ?
<a name='L1132'>1132                         <a href='../Y/4886.html' title='Multiple used in 8 places.'>nla_data</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L46' title='Defined at 46 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_NAME</a>]) : <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1133'>1133 
<a name='L1134'>1134         <b>if</b> (<a href='../D/5884.html' title='Multiple defined in 2 places.'>VERIFY_NUL_STRING</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L46' title='Defined at 46 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_NAME</a>]))
<a name='L1135'>1135                 <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1136'>1136 
<a name='L1137'>1137         <b>if</b> ((<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> == -1) &amp;&amp; (!<a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a>))
<a name='L1138'>1138                 <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1139'>1139 
<a name='L1140'>1140         <b>return</b> <a href='../S/293.html#L285' title='Defined at 285 in cbench/openflow/datapath/datapath.c.'>new_dp</a>(<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>, <a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a>);
<a name='L1141'>1141 <font color='red'>}</font>
<a name='L1142'>1142 
<a name='L1143'>1143 <b>static</b> <b>struct</b> <a href='../Y/3331.html' title='Multiple used in 7 places.'>genl_ops</a> <a href='../Y/2513.html' title='Multiple used in 2 places.'>dp_genl_ops_add_dp</a> = <font color='red'>{</font>
<a name='L1144'>1144         .<a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a> = <a href='../S/184.html#L55' title='Defined at 55 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_C_ADD_DP</a>,
<a name='L1145'>1145         .<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../Y/374.html' title='Multiple used in 6 places.'>GENL_ADMIN_PERM</a>, <i><font color='green'>/* Requires CAP_NET_ADMIN privilege. */</font></i>
<a name='L1146'>1146         .<a href='../Y/5778.html' title='Multiple used in 13 places.'>policy</a> = <a href='../Y/2519.html' title='Multiple used in 6 places.'>dp_genl_policy</a>,
<a name='L1147'>1147         .<a href='../Y/2492.html' title='Multiple used in 6 places.'>doit</a> = <a href='../S/293.html#L1127' title='Defined at 1127 in cbench/openflow/datapath/datapath.c.'>dp_genl_add</a>,
<a name='L1148'>1148         .<a href='../Y/2604.html' title='Multiple used in 6 places.'>dumpit</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>,
<a name='L1149'>1149 <font color='red'>}</font>;
<a name='L1150'>1150 
<a name='L1151'>1151 <i><font color='green'>/* Must be called with rcu_read_lock or dp_mutex. */</font></i>
<a name='L1152'>1152 <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../R/2790.html' title='Multiple refered from 5 places.'>dp_get_by_idx</a>(<b>int</b> <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>)
<a name='L1153'>1153 <font color='red'>{</font>
<a name='L1154'>1154         <b>if</b> (<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> &lt; 0 || <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> &gt;= <a href='../S/184.html#L67' title='Defined at 67 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_MAX</a>)
<a name='L1155'>1155                 <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1156'>1156         <b>return</b> <a href='../Y/6266.html' title='Multiple used in 5 places.'>rcu_dereference</a>(<a href='../Y/2540.html' title='Multiple used in 7 places.'>dps</a>[<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>]);
<a name='L1157'>1157 <font color='red'>}</font>
<a name='L1158'>1158 EXPORT_SYMBOL(dp_get_by_idx);
<a name='L1159'>1159 
<a name='L1160'>1160 <i><font color='green'>/* Must be called with rcu_read_lock or dp_mutex. */</font></i>
<a name='L1161'>1161 <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../R/2791.html' title='Multiple refered from 2 places.'>dp_get_by_name</a>(<b>const</b> <b>char</b> *<a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a>)
<a name='L1162'>1162 <font color='red'>{</font>
<a name='L1163'>1163         <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L1164'>1164         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>=0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>&lt;<a href='../S/184.html#L67' title='Defined at 67 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_MAX</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L1165'>1165                 <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../Y/6266.html' title='Multiple used in 5 places.'>rcu_dereference</a>(<a href='../Y/2540.html' title='Multiple used in 7 places.'>dps</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>]);
<a name='L1166'>1166                 <b>if</b> (<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> &amp;&amp; !<a href='../Y/7082.html' title='Multiple used in 371 places.'>strcmp</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a>))
<a name='L1167'>1167                         <b>return</b> <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L1168'>1168         <font color='red'>}</font>
<a name='L1169'>1169         <b>return</b> <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1170'>1170 <font color='red'>}</font>
<a name='L1171'>1171 
<a name='L1172'>1172 <i><font color='green'>/* Must be called with rcu_read_lock or dp_mutex. */</font></i>
<a name='L1173'>1173 <b>static</b> <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *
<a name='L1174'>1174 <a href='../R/3428.html' title='Multiple refered from 3 places.'>lookup_dp</a>(<b>struct</b> <a href='../Y/3328.html' title='Multiple used in 8 places.'>genl_info</a> *<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>)
<a name='L1175'>1175 <font color='red'>{</font>
<a name='L1176'>1176         <b>int</b> <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> = <a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>] ?
<a name='L1177'>1177                         <a href='../Y/4888.html' title='Multiple used in 3 places.'>nla_get_u32</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>]) : -1;
<a name='L1178'>1178         <b>const</b> <b>char</b> *<a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a> = <a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L46' title='Defined at 46 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_NAME</a>] ?
<a name='L1179'>1179                         <a href='../Y/4886.html' title='Multiple used in 8 places.'>nla_data</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L46' title='Defined at 46 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_NAME</a>]) : <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1180'>1180 
<a name='L1181'>1181         <b>if</b> (<a href='../D/5884.html' title='Multiple defined in 2 places.'>VERIFY_NUL_STRING</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L46' title='Defined at 46 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_NAME</a>]))
<a name='L1182'>1182                 <b>return</b> <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>);
<a name='L1183'>1183 
<a name='L1184'>1184         <b>if</b> (<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> != -1) <font color='red'>{</font>
<a name='L1185'>1185                 <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../S/293.html#L1152' title='Defined at 1152 in cbench/openflow/datapath/datapath.c.'>dp_get_by_idx</a>(<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>);
<a name='L1186'>1186                 <b>if</b> (!<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>)
<a name='L1187'>1187                         <b>return</b> <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/275.html' title='Multiple used in 14 places.'>ENOENT</a>);
<a name='L1188'>1188                 <b>else</b> <b>if</b> (<a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a> &amp;&amp; <a href='../Y/7082.html' title='Multiple used in 371 places.'>strcmp</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a>))
<a name='L1189'>1189                         <b>return</b> <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>);
<a name='L1190'>1190                 <b>else</b>
<a name='L1191'>1191                         <b>return</b> <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L1192'>1192         <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a>) <font color='red'>{</font>
<a name='L1193'>1193                 <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../S/293.html#L1161' title='Defined at 1161 in cbench/openflow/datapath/datapath.c.'>dp_get_by_name</a>(<a href='../Y/2526.html' title='Multiple used in 33 places.'>dp_name</a>);
<a name='L1194'>1194                 <b>return</b> <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> ? <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> : <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/275.html' title='Multiple used in 14 places.'>ENOENT</a>);
<a name='L1195'>1195         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1196'>1196                 <b>return</b> <a href='../Y/295.html' title='Multiple used in 10 places.'>ERR_PTR</a>(-<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>);
<a name='L1197'>1197         <font color='red'>}</font>
<a name='L1198'>1198 <font color='red'>}</font>
<a name='L1199'>1199 
<a name='L1200'>1200 <b>static</b> <b>int</b> <a href='../S/293.html#L1227' title='Refered from 1227 in cbench/openflow/datapath/datapath.c.'>dp_genl_del</a>(<b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>struct</b> <a href='../Y/3328.html' title='Multiple used in 8 places.'>genl_info</a> *<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>)
<a name='L1201'>1201 <font color='red'>{</font>
<a name='L1202'>1202         <b>struct</b> <a href='../Y/4699.html' title='Multiple used in 110 places.'>net_device</a> *<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1203'>1203         <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L1204'>1204         <b>int</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1205'>1205 
<a name='L1206'>1206         <a href='../Y/6492.html' title='Multiple used in 5 places.'>rtnl_lock</a>();
<a name='L1207'>1207         <a href='../S/310.html#L27' title='Defined at 27 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>mutex_lock</a>(&amp;<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L1208'>1208         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../S/293.html#L1174' title='Defined at 1174 in cbench/openflow/datapath/datapath.c.'>lookup_dp</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>);
<a name='L1209'>1209         <b>if</b> (<a href='../Y/473.html' title='Multiple used in 8 places.'>IS_ERR</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>))
<a name='L1210'>1210                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../Y/712.html' title='Multiple used in 6 places.'>PTR_ERR</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L1211'>1211         <b>else</b> <font color='red'>{</font>
<a name='L1212'>1212                 <a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>;
<a name='L1213'>1213                 <a href='../S/293.html#L468' title='Defined at 468 in cbench/openflow/datapath/datapath.c.'>del_dp</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L1214'>1214                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = 0;
<a name='L1215'>1215         <font color='red'>}</font>
<a name='L1216'>1216         <a href='../S/310.html#L49' title='Defined at 49 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>mutex_unlock</a>(&amp;<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L1217'>1217         <a href='../Y/6493.html' title='Multiple used in 6 places.'>rtnl_unlock</a>();
<a name='L1218'>1218         <b>if</b> (<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>)
<a name='L1219'>1219                 <a href='../Y/3240.html' title='Multiple used in 4 places.'>free_netdev</a>(<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>);
<a name='L1220'>1220         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1221'>1221 <font color='red'>}</font>
<a name='L1222'>1222 
<a name='L1223'>1223 <b>static</b> <b>struct</b> <a href='../Y/3331.html' title='Multiple used in 7 places.'>genl_ops</a> <a href='../Y/2515.html' title='Multiple used in 2 places.'>dp_genl_ops_del_dp</a> = <font color='red'>{</font>
<a name='L1224'>1224         .<a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a> = <a href='../S/184.html#L56' title='Defined at 56 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_C_DEL_DP</a>,
<a name='L1225'>1225         .<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../Y/374.html' title='Multiple used in 6 places.'>GENL_ADMIN_PERM</a>, <i><font color='green'>/* Requires CAP_NET_ADMIN privilege. */</font></i>
<a name='L1226'>1226         .<a href='../Y/5778.html' title='Multiple used in 13 places.'>policy</a> = <a href='../Y/2519.html' title='Multiple used in 6 places.'>dp_genl_policy</a>,
<a name='L1227'>1227         .<a href='../Y/2492.html' title='Multiple used in 6 places.'>doit</a> = <a href='../S/293.html#L1200' title='Defined at 1200 in cbench/openflow/datapath/datapath.c.'>dp_genl_del</a>,
<a name='L1228'>1228         .<a href='../Y/2604.html' title='Multiple used in 6 places.'>dumpit</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>,
<a name='L1229'>1229 <font color='red'>}</font>;
<a name='L1230'>1230 
<a name='L1231'>1231 <i><font color='green'>/* Queries a datapath for related information.  Currently the only relevant</font></i>
<a name='L1232'>1232 <i><font color='green'> * information is the datapath's multicast group ID, datapath ID, and</font></i>
<a name='L1233'>1233 <i><font color='green'> * datapath device name. */</font></i>
<a name='L1234'>1234 <b>static</b> <b>int</b> <a href='../S/293.html#L1275' title='Refered from 1275 in cbench/openflow/datapath/datapath.c.'>dp_genl_query</a>(<b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>struct</b> <a href='../Y/3328.html' title='Multiple used in 8 places.'>genl_info</a> *<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>)
<a name='L1235'>1235 <font color='red'>{</font>
<a name='L1236'>1236         <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L1237'>1237         <b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1238'>1238         <b>int</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1239'>1239 
<a name='L1240'>1240         <a href='../Y/6268.html' title='Multiple used in 2 places.'>rcu_read_lock</a>();
<a name='L1241'>1241         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../S/293.html#L1174' title='Defined at 1174 in cbench/openflow/datapath/datapath.c.'>lookup_dp</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>);
<a name='L1242'>1242         <b>if</b> (<a href='../Y/473.html' title='Multiple used in 8 places.'>IS_ERR</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>))
<a name='L1243'>1243                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../Y/712.html' title='Multiple used in 6 places.'>PTR_ERR</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L1244'>1244         <b>else</b> <font color='red'>{</font>
<a name='L1245'>1245                 <b>void</b> *<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>;
<a name='L1246'>1246                 <a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a> = <a href='../S/322.html#L15' title='Defined at 15 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/netlink.h.'>nlmsg_new</a>(<a href='../S/322.html#L11' title='Defined at 11 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/netlink.h.'>NLMSG_DEFAULT_SIZE</a>, <a href='../Y/378.html' title='Multiple used in 20 places.'>GFP_ATOMIC</a>);
<a name='L1247'>1247                 <b>if</b> (!<a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a>) <font color='red'>{</font>
<a name='L1248'>1248                         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1249'>1249                         <b>goto</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1250'>1250                 <font color='red'>}</font>
<a name='L1251'>1251                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1252'>1252                 <a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a> = <a href='../S/306.html#L94' title='Defined at 94 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/net/genetlink.h.'>genlmsg_put_reply</a>(<a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a>, <a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>, &amp;<a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a>,
<a name='L1253'>1253                                          0, <a href='../S/184.html#L57' title='Defined at 57 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_C_QUERY_DP</a>);
<a name='L1254'>1254                 <b>if</b> (<a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a> == <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>)
<a name='L1255'>1255                         <b>goto</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1256'>1256                 <a href='../Y/582.html' title='Multiple used in 2 places.'>NLA_PUT_U32</a>(<a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a>, <a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>, <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>);
<a name='L1257'>1257                 NLA_PUT_STRING(<a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a>, <a href='../S/184.html#L46' title='Defined at 46 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_NAME</a>, <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../S/851.html#L98' title='Defined at 98 in cbench/openflow/lib/netdev.c.'>netdev</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L1258'>1258                 <a href='../Y/582.html' title='Multiple used in 2 places.'>NLA_PUT_U32</a>(<a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a>, <a href='../S/184.html#L44' title='Defined at 44 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_MC_GROUP</a>, <a href='../S/293.html#L238' title='Defined at 238 in cbench/openflow/datapath/datapath.c.'>dp_mc_group</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>));
<a name='L1259'>1259 
<a name='L1260'>1260                 genlmsg_end(<a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a>, <a href='../Y/2247.html' title='Multiple used in 1185 places.'>data</a>);
<a name='L1261'>1261                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../S/306.html#L107' title='Defined at 107 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/net/genetlink.h.'>genlmsg_reply</a>(<a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a>, <a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>);
<a name='L1262'>1262                 <a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1263'>1263         <font color='red'>}</font>
<a name='L1264'>1264 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>:
<a name='L1265'>1265 nla_put_failure:
<a name='L1266'>1266         <a href='../S/319.html#L54' title='Defined at 54 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/skbuff.h.'>kfree_skb</a>(<a href='../Y/1391.html' title='Multiple used in 11 places.'>ans_skb</a>);
<a name='L1267'>1267         <a href='../Y/6269.html' title='Multiple used in 2 places.'>rcu_read_unlock</a>();
<a name='L1268'>1268         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1269'>1269 <font color='red'>}</font>
<a name='L1270'>1270 
<a name='L1271'>1271 <b>static</b> <b>struct</b> <a href='../Y/3331.html' title='Multiple used in 7 places.'>genl_ops</a> <a href='../Y/2518.html' title='Multiple used in 2 places.'>dp_genl_ops_query_dp</a> = <font color='red'>{</font>
<a name='L1272'>1272         .<a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a> = <a href='../S/184.html#L57' title='Defined at 57 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_C_QUERY_DP</a>,
<a name='L1273'>1273         .<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../Y/374.html' title='Multiple used in 6 places.'>GENL_ADMIN_PERM</a>, <i><font color='green'>/* Requires CAP_NET_ADMIN privilege. */</font></i>
<a name='L1274'>1274         .<a href='../Y/5778.html' title='Multiple used in 13 places.'>policy</a> = <a href='../Y/2519.html' title='Multiple used in 6 places.'>dp_genl_policy</a>,
<a name='L1275'>1275         .<a href='../Y/2492.html' title='Multiple used in 6 places.'>doit</a> = <a href='../S/293.html#L1234' title='Defined at 1234 in cbench/openflow/datapath/datapath.c.'>dp_genl_query</a>,
<a name='L1276'>1276         .<a href='../Y/2604.html' title='Multiple used in 6 places.'>dumpit</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>,
<a name='L1277'>1277 <font color='red'>}</font>;
<a name='L1278'>1278 
<a name='L1279'>1279 <b>static</b> <b>int</b> <a href='../R/2784.html' title='Multiple refered from 2 places.'>dp_genl_add_del_port</a>(<b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>struct</b> <a href='../Y/3328.html' title='Multiple used in 8 places.'>genl_info</a> *<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>)
<a name='L1280'>1280 <font color='red'>{</font>
<a name='L1281'>1281         <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L1282'>1282         <b>struct</b> <a href='../Y/4699.html' title='Multiple used in 110 places.'>net_device</a> *<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>;
<a name='L1283'>1283         <b>int</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1284'>1284 
<a name='L1285'>1285         <b>if</b> (!<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L43' title='Defined at 43 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_PORTNAME</a>] ||
<a name='L1286'>1286             <a href='../D/5884.html' title='Multiple defined in 2 places.'>VERIFY_NUL_STRING</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L43' title='Defined at 43 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_PORTNAME</a>]))
<a name='L1287'>1287                 <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1288'>1288 
<a name='L1289'>1289         <a href='../Y/6492.html' title='Multiple used in 5 places.'>rtnl_lock</a>();
<a name='L1290'>1290         <a href='../S/310.html#L27' title='Defined at 27 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>mutex_lock</a>(&amp;<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L1291'>1291 
<a name='L1292'>1292         <i><font color='green'>/* Get datapath. */</font></i>
<a name='L1293'>1293         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../S/293.html#L1174' title='Defined at 1174 in cbench/openflow/datapath/datapath.c.'>lookup_dp</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>);
<a name='L1294'>1294         <b>if</b> (<a href='../Y/473.html' title='Multiple used in 8 places.'>IS_ERR</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>)) <font color='red'>{</font>
<a name='L1295'>1295                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../Y/712.html' title='Multiple used in 6 places.'>PTR_ERR</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>);
<a name='L1296'>1296                 <b>goto</b> <a href='../Y/5552.html' title='Multiple used in 3 places.'>out_unlock</a>;
<a name='L1297'>1297         <font color='red'>}</font>
<a name='L1298'>1298 
<a name='L1299'>1299         <i><font color='green'>/* Get interface to add/remove. */</font></i>
<a name='L1300'>1300         <a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a> = <a href='../S/300.html#L14' title='Defined at 14 in cbench/openflow/datapath/linux-2.6/compat-2.6/compat26.h.'>dev_get_by_name</a>(&amp;<a href='../Y/3817.html' title='Multiple used in 2 places.'>init_net</a>, 
<a name='L1301'>1301                         <a href='../Y/4886.html' title='Multiple used in 8 places.'>nla_data</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L43' title='Defined at 43 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_PORTNAME</a>]));
<a name='L1302'>1302         <b>if</b> (!<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>) <font color='red'>{</font>
<a name='L1303'>1303                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -<a href='../Y/275.html' title='Multiple used in 14 places.'>ENOENT</a>;
<a name='L1304'>1304                 <b>goto</b> <a href='../Y/5552.html' title='Multiple used in 3 places.'>out_unlock</a>;
<a name='L1305'>1305         <font color='red'>}</font>
<a name='L1306'>1306 
<a name='L1307'>1307         <i><font color='green'>/* Execute operation. */</font></i>
<a name='L1308'>1308         <b>if</b> (<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;genlhdr-&gt;<a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a> == <a href='../S/184.html#L58' title='Defined at 58 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_C_ADD_PORT</a>)
<a name='L1309'>1309                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../S/293.html#L407' title='Defined at 407 in cbench/openflow/datapath/datapath.c.'>add_switch_port</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>);
<a name='L1310'>1310         <b>else</b> <font color='red'>{</font>
<a name='L1311'>1311                 <b>if</b> (<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a> == <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a> || <a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a>-&gt;<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> != <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>) <font color='red'>{</font>
<a name='L1312'>1312                         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -<a href='../Y/275.html' title='Multiple used in 14 places.'>ENOENT</a>;
<a name='L1313'>1313                         <b>goto</b> <a href='../Y/5550.html' title='Multiple used in 2 places.'>out_put</a>;
<a name='L1314'>1314                 <font color='red'>}</font>
<a name='L1315'>1315                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../S/293.html#L437' title='Defined at 437 in cbench/openflow/datapath/datapath.c.'>dp_del_switch_port</a>(<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>-&gt;<a href='../Y/1669.html' title='Multiple used in 11 places.'>br_port</a>);
<a name='L1316'>1316         <font color='red'>}</font>
<a name='L1317'>1317 
<a name='L1318'>1318 <a href='../Y/5550.html' title='Multiple used in 2 places.'>out_put</a>:
<a name='L1319'>1319         <a href='../Y/2364.html' title='Multiple used in 3 places.'>dev_put</a>(<a href='../Y/5791.html' title='Multiple used in 749 places.'>port</a>);
<a name='L1320'>1320 <a href='../Y/5552.html' title='Multiple used in 3 places.'>out_unlock</a>:
<a name='L1321'>1321         <a href='../S/310.html#L49' title='Defined at 49 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>mutex_unlock</a>(&amp;<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L1322'>1322         <a href='../Y/6493.html' title='Multiple used in 6 places.'>rtnl_unlock</a>();
<a name='L1323'>1323         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1324'>1324 <font color='red'>}</font>
<a name='L1325'>1325 
<a name='L1326'>1326 <b>static</b> <b>struct</b> <a href='../Y/3331.html' title='Multiple used in 7 places.'>genl_ops</a> <a href='../Y/2514.html' title='Multiple used in 2 places.'>dp_genl_ops_add_port</a> = <font color='red'>{</font>
<a name='L1327'>1327         .<a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a> = <a href='../S/184.html#L58' title='Defined at 58 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_C_ADD_PORT</a>,
<a name='L1328'>1328         .<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../Y/374.html' title='Multiple used in 6 places.'>GENL_ADMIN_PERM</a>, <i><font color='green'>/* Requires CAP_NET_ADMIN privilege. */</font></i>
<a name='L1329'>1329         .<a href='../Y/5778.html' title='Multiple used in 13 places.'>policy</a> = <a href='../Y/2519.html' title='Multiple used in 6 places.'>dp_genl_policy</a>,
<a name='L1330'>1330         .<a href='../Y/2492.html' title='Multiple used in 6 places.'>doit</a> = <a href='../S/293.html#L1279' title='Defined at 1279 in cbench/openflow/datapath/datapath.c.'>dp_genl_add_del_port</a>,
<a name='L1331'>1331         .<a href='../Y/2604.html' title='Multiple used in 6 places.'>dumpit</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>,
<a name='L1332'>1332 <font color='red'>}</font>;
<a name='L1333'>1333 
<a name='L1334'>1334 <b>static</b> <b>struct</b> <a href='../Y/3331.html' title='Multiple used in 7 places.'>genl_ops</a> <a href='../Y/2516.html' title='Multiple used in 2 places.'>dp_genl_ops_del_port</a> = <font color='red'>{</font>
<a name='L1335'>1335         .<a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a> = <a href='../S/184.html#L59' title='Defined at 59 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_C_DEL_PORT</a>,
<a name='L1336'>1336         .<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../Y/374.html' title='Multiple used in 6 places.'>GENL_ADMIN_PERM</a>, <i><font color='green'>/* Requires CAP_NET_ADMIN privilege. */</font></i>
<a name='L1337'>1337         .<a href='../Y/5778.html' title='Multiple used in 13 places.'>policy</a> = <a href='../Y/2519.html' title='Multiple used in 6 places.'>dp_genl_policy</a>,
<a name='L1338'>1338         .<a href='../Y/2492.html' title='Multiple used in 6 places.'>doit</a> = <a href='../S/293.html#L1279' title='Defined at 1279 in cbench/openflow/datapath/datapath.c.'>dp_genl_add_del_port</a>,
<a name='L1339'>1339         .<a href='../Y/2604.html' title='Multiple used in 6 places.'>dumpit</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>,
<a name='L1340'>1340 <font color='red'>}</font>;
<a name='L1341'>1341 
<a name='L1342'>1342 <b>static</b> <b>int</b> <a href='../S/293.html#L1991' title='Refered from 1991 in cbench/openflow/datapath/datapath.c.'>dp_genl_openflow</a>(<b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>struct</b> <a href='../Y/3328.html' title='Multiple used in 8 places.'>genl_info</a> *<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>)
<a name='L1343'>1343 <font color='red'>{</font>
<a name='L1344'>1344         <b>struct</b> <a href='../S/867.html#L108' title='Defined at 108 in cbench/openflow/lib/netlink-protocol.h.'>nlattr</a> *<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a> = <a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L45' title='Defined at 45 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_OPENFLOW</a>];
<a name='L1345'>1345         <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L1346'>1346         <b>struct</b> <a href='../D/8801.html' title='Multiple defined in 3 places.'>ofp_header</a> *<a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>;
<a name='L1347'>1347         <b>struct</b> <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a> <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>;
<a name='L1348'>1348         <b>int</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1349'>1349 
<a name='L1350'>1350         <b>if</b> (!<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>] || !<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a>)
<a name='L1351'>1351                 <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1352'>1352 
<a name='L1353'>1353         <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../S/293.html#L1152' title='Defined at 1152 in cbench/openflow/datapath/datapath.c.'>dp_get_by_idx</a>(<a href='../Y/4888.html' title='Multiple used in 3 places.'>nla_get_u32</a>(<a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>]));
<a name='L1354'>1354         <b>if</b> (!<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>)
<a name='L1355'>1355                 <b>return</b> -<a href='../Y/275.html' title='Multiple used in 14 places.'>ENOENT</a>;
<a name='L1356'>1356 
<a name='L1357'>1357         <b>if</b> (<a href='../Y/4889.html' title='Multiple used in 22 places.'>nla_len</a>(<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a>) &lt; <b>sizeof</b>(<b>struct</b> <a href='../D/8801.html' title='Multiple defined in 3 places.'>ofp_header</a>))
<a name='L1358'>1358                 <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1359'>1359         <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a> = <a href='../Y/4886.html' title='Multiple used in 8 places.'>nla_data</a>(<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a>);
<a name='L1360'>1360 
<a name='L1361'>1361         <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>.<a href='../Y/7997.html' title='Multiple used in 182 places.'>xid</a> = <a href='../Y/5417.html' title='Multiple used in 183 places.'>oh</a>-&gt;<a href='../Y/7997.html' title='Multiple used in 182 places.'>xid</a>;
<a name='L1362'>1362         <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>.<a href='../Y/5731.html' title='Multiple used in 85 places.'>pid</a> = <a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/6857.html' title='Multiple used in 3 places.'>snd_pid</a>;
<a name='L1363'>1363         <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>.<a href='../Y/6669.html' title='Multiple used in 19 places.'>seq</a> = <a href='../Y/3807.html' title='Multiple used in 50 places.'>info</a>-&gt;<a href='../Y/6858.html' title='Multiple used in 2 places.'>snd_seq</a>;
<a name='L1364'>1364 
<a name='L1365'>1365         <a href='../S/310.html#L27' title='Defined at 27 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>mutex_lock</a>(&amp;<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L1366'>1366         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../D/7907.html' title='Multiple defined in 2 places.'>fwd_control_input</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>, &amp;<a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>,
<a name='L1367'>1367                                 <a href='../Y/4886.html' title='Multiple used in 8 places.'>nla_data</a>(<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a>), <a href='../Y/4889.html' title='Multiple used in 22 places.'>nla_len</a>(<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a>));
<a name='L1368'>1368         <a href='../S/310.html#L49' title='Defined at 49 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/mutex.h.'>mutex_unlock</a>(&amp;<a href='../Y/2525.html' title='Multiple used in 22 places.'>dp_mutex</a>);
<a name='L1369'>1369         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1370'>1370 <font color='red'>}</font>
<a name='L1371'>1371 
<a name='L1372'>1372 <b>static</b> <b>struct</b> <a href='../Y/4891.html' title='Multiple used in 2 places.'>nla_policy</a> <a href='../Y/2512.html' title='Multiple used in 3 places.'>dp_genl_openflow_policy</a>[<a href='../S/184.html#L49' title='Defined at 49 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_MAX</a> + 1] = <font color='red'>{</font>
<a name='L1373'>1373         [<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>] = <font color='red'>{</font> .<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../Y/584.html' title='Multiple used in 3 places.'>NLA_U32</a> <font color='red'>}</font>,
<a name='L1374'>1374 <font color='red'>}</font>;
<a name='L1375'>1375 
<a name='L1376'>1376 <b>static</b> <b>int</b> <a href='../R/2582.html' title='Multiple refered from 2 places.'>desc_stats_dump</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>void</b> *<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>,
<a name='L1377'>1377                             <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>)
<a name='L1378'>1378 <font color='red'>{</font>
<a name='L1379'>1379         <b>struct</b> <a href='../D/8767.html' title='Multiple defined in 2 places.'>ofp_desc_stats</a> *<a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a> = <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1380'>1380         <b>int</b> <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> = <b>sizeof</b> *<a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>;
<a name='L1381'>1381 
<a name='L1382'>1382         <b>if</b> (<a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> &gt; *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>) <font color='red'>{</font>
<a name='L1383'>1383                 <b>return</b> -<a href='../Y/273.html' title='Multiple used in 24 places.'>ENOBUFS</a>;
<a name='L1384'>1384         <font color='red'>}</font>
<a name='L1385'>1385         *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> = <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a>;
<a name='L1386'>1386 
<a name='L1387'>1387         <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/4440.html' title='Multiple used in 24 places.'>mfr_desc</a>, <a href='../Y/4440.html' title='Multiple used in 24 places.'>mfr_desc</a>, <b>sizeof</b> <a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/4440.html' title='Multiple used in 24 places.'>mfr_desc</a>);
<a name='L1388'>1388         <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/3683.html' title='Multiple used in 24 places.'>hw_desc</a>, <a href='../Y/3683.html' title='Multiple used in 24 places.'>hw_desc</a>, <b>sizeof</b> <a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/3683.html' title='Multiple used in 24 places.'>hw_desc</a>);
<a name='L1389'>1389         <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/7176.html' title='Multiple used in 22 places.'>sw_desc</a>, <a href='../Y/7176.html' title='Multiple used in 22 places.'>sw_desc</a>, <b>sizeof</b> <a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/7176.html' title='Multiple used in 22 places.'>sw_desc</a>);
<a name='L1390'>1390         <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/2506.html' title='Multiple used in 33 places.'>dp_desc</a>, <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/2506.html' title='Multiple used in 33 places.'>dp_desc</a>, <b>sizeof</b> <a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/2506.html' title='Multiple used in 33 places.'>dp_desc</a>);
<a name='L1391'>1391         <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/6673.html' title='Multiple used in 24 places.'>serial_num</a>, <a href='../Y/6673.html' title='Multiple used in 24 places.'>serial_num</a>, <b>sizeof</b> <a href='../Y/5042.html' title='Multiple used in 19 places.'>ods</a>-&gt;<a href='../Y/6673.html' title='Multiple used in 24 places.'>serial_num</a>);
<a name='L1392'>1392 
<a name='L1393'>1393         <b>return</b> 0;
<a name='L1394'>1394 <font color='red'>}</font>
<a name='L1395'>1395 
<a name='L1396'>1396 <b>struct</b> <a href='../R/3087.html' title='Multiple refered from 6 places.'>flow_stats_state</a> <font color='red'>{</font>
<a name='L1397'>1397         <b>int</b> <a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a>;
<a name='L1398'>1398         <b>struct</b> <a href='../D/9781.html' title='Multiple defined in 2 places.'>sw_table_position</a> <a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>;
<a name='L1399'>1399         <b>const</b> <b>struct</b> <a href='../D/8787.html' title='Multiple defined in 4 places.'>ofp_flow_stats_request</a> *<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>;
<a name='L1400'>1400 
<a name='L1401'>1401         <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1402'>1402         <b>int</b> <a href='../Y/1744.html' title='Multiple used in 7 places.'>bytes_used</a>, <a href='../Y/1738.html' title='Multiple used in 3 places.'>bytes_allocated</a>;
<a name='L1403'>1403 <font color='red'>}</font>;
<a name='L1404'>1404 
<a name='L1405'>1405 <font color='darkred'>#define</font> <a href='../R/407.html' title='Multiple refered from 4 places.'>EMERG_TABLE_ID_FOR_STATS</a> 0xfe
<a name='L1406'>1406 
<a name='L1407'>1407 <b>static</b> <b>int</b> <a href='../R/3084.html' title='Multiple refered from 2 places.'>flow_stats_init</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>,
<a name='L1408'>1408                            <b>void</b> **<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>)
<a name='L1409'>1409 <font color='red'>{</font>
<a name='L1410'>1410         <b>const</b> <b>struct</b> <a href='../D/8787.html' title='Multiple defined in 4 places.'>ofp_flow_stats_request</a> *<a href='../Y/3258.html' title='Multiple used in 10 places.'>fsr</a> = <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1411'>1411         <b>struct</b> <a href='../D/7877.html' title='Multiple defined in 2 places.'>flow_stats_state</a> *<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = <a href='../Y/4020.html' title='Multiple used in 5 places.'>kmalloc</a>(<b>sizeof</b> *<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>, <a href='../Y/378.html' title='Multiple used in 20 places.'>GFP_ATOMIC</a>);
<a name='L1412'>1412         <b>if</b> (!<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>)
<a name='L1413'>1413                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1414'>1414         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a> = <a href='../Y/3258.html' title='Multiple used in 10 places.'>fsr</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a> == 0xff ? 0 : <a href='../Y/3258.html' title='Multiple used in 10 places.'>fsr</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a>;
<a name='L1415'>1415         <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>, 0, <b>sizeof</b> <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>);
<a name='L1416'>1416         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a> = <a href='../Y/3258.html' title='Multiple used in 10 places.'>fsr</a>;
<a name='L1417'>1417         *<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a> = <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>;
<a name='L1418'>1418         <b>return</b> 0;
<a name='L1419'>1419 <font color='red'>}</font>
<a name='L1420'>1420 
<a name='L1421'>1421 <b>static</b> <b>int</b> <a href='../R/3082.html' title='Multiple refered from 4 places.'>flow_stats_dump_callback</a>(<b>struct</b> <a href='../Y/7178.html' title='Multiple used in 120 places.'>sw_flow</a> *<a href='../Y/3131.html' title='Multiple used in 114 places.'>flow</a>, <b>void</b> *<a href='../Y/5911.html' title='Multiple used in 123 places.'>private</a>)
<a name='L1422'>1422 <font color='red'>{</font>
<a name='L1423'>1423         <b>struct</b> <a href='../D/9769.html' title='Multiple defined in 2 places.'>sw_flow_actions</a> *<a href='../Y/6724.html' title='Multiple used in 48 places.'>sf_acts</a> = <a href='../Y/6266.html' title='Multiple used in 5 places.'>rcu_dereference</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/6724.html' title='Multiple used in 48 places.'>sf_acts</a>);
<a name='L1424'>1424         <b>struct</b> <a href='../D/7877.html' title='Multiple defined in 2 places.'>flow_stats_state</a> *<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = <a href='../Y/5911.html' title='Multiple used in 123 places.'>private</a>;
<a name='L1425'>1425         <b>struct</b> <a href='../D/8785.html' title='Multiple defined in 3 places.'>ofp_flow_stats</a> *<a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>;
<a name='L1426'>1426         <b>int</b> <a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a>;
<a name='L1427'>1427         <a href='../Y/7623.html' title='Multiple used in 568 places.'>uint64_t</a> <a href='../Y/2612.html' title='Multiple used in 28 places.'>duration</a>;
<a name='L1428'>1428 
<a name='L1429'>1429         <a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a> = <b>sizeof</b> *<a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a> + <a href='../Y/6724.html' title='Multiple used in 48 places.'>sf_acts</a>-&gt;<a href='../Y/1295.html' title='Multiple used in 192 places.'>actions_len</a>;
<a name='L1430'>1430         <b>if</b> (<a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a> + <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1744.html' title='Multiple used in 7 places.'>bytes_used</a> &gt; <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1738.html' title='Multiple used in 3 places.'>bytes_allocated</a>)
<a name='L1431'>1431                 <b>return</b> 1;
<a name='L1432'>1432 
<a name='L1433'>1433         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a> = <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a> + <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1744.html' title='Multiple used in 7 places.'>bytes_used</a>;
<a name='L1434'>1434         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a>          = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a>);
<a name='L1435'>1435         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a>        = <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a>;
<a name='L1436'>1436         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>             = 0;
<a name='L1437'>1437         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/7877.html' title='Multiple used in 308 places.'>wildcards</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/7877.html' title='Multiple used in 308 places.'>wildcards</a>);
<a name='L1438'>1438         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/3786.html' title='Multiple used in 144 places.'>in_port</a>   = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/3786.html' title='Multiple used in 144 places.'>in_port</a>;
<a name='L1439'>1439         <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/2462.html' title='Multiple used in 77 places.'>dl_src</a>, <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/2462.html' title='Multiple used in 77 places.'>dl_src</a>, <a href='../D/1677.html' title='Multiple defined in 6 places.'>ETH_ALEN</a>);
<a name='L1440'>1440         <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/2461.html' title='Multiple used in 96 places.'>dl_dst</a>, <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/2461.html' title='Multiple used in 96 places.'>dl_dst</a>, <a href='../D/1677.html' title='Multiple defined in 6 places.'>ETH_ALEN</a>);
<a name='L1441'>1441         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/2464.html' title='Multiple used in 65 places.'>dl_vlan</a>   = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/2464.html' title='Multiple used in 65 places.'>dl_vlan</a>;
<a name='L1442'>1442         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/2463.html' title='Multiple used in 81 places.'>dl_type</a>   = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/2463.html' title='Multiple used in 81 places.'>dl_type</a>;
<a name='L1443'>1443         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/5020.html' title='Multiple used in 36 places.'>nw_tos</a>    = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/5020.html' title='Multiple used in 36 places.'>nw_tos</a>;
<a name='L1444'>1444         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/5017.html' title='Multiple used in 95 places.'>nw_proto</a>  = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/5017.html' title='Multiple used in 95 places.'>nw_proto</a>;
<a name='L1445'>1445         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/5018.html' title='Multiple used in 62 places.'>nw_src</a>    = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/5018.html' title='Multiple used in 62 places.'>nw_src</a>;
<a name='L1446'>1446         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/5015.html' title='Multiple used in 78 places.'>nw_dst</a>    = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/5015.html' title='Multiple used in 78 places.'>nw_dst</a>;
<a name='L1447'>1447         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/2465.html' title='Multiple used in 33 places.'>dl_vlan_pcp</a> = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/2465.html' title='Multiple used in 33 places.'>dl_vlan_pcp</a>;
<a name='L1448'>1448         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/7446.html' title='Multiple used in 54 places.'>tp_src</a>    = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/7446.html' title='Multiple used in 54 places.'>tp_src</a>;
<a name='L1449'>1449         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>.<a href='../Y/7444.html' title='Multiple used in 55 places.'>tp_dst</a>    = <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3999.html' title='Multiple used in 606 places.'>key</a>.<a href='../Y/7444.html' title='Multiple used in 55 places.'>tp_dst</a>;
<a name='L1450'>1450 
<a name='L1451'>1451         <i><font color='green'>/* The kernel doesn't support 64-bit division, so use the 'do_div' </font></i>
<a name='L1452'>1452 <i><font color='green'>         * macro instead.  The first argument is replaced with the quotient,</font></i>
<a name='L1453'>1453 <i><font color='green'>         * while the remainder is the return value. */</font></i>
<a name='L1454'>1454         <a href='../Y/2612.html' title='Multiple used in 28 places.'>duration</a> = <a href='../Y/3383.html' title='Multiple used in 9 places.'>get_jiffies_64</a>() - <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/2191.html' title='Multiple used in 11 places.'>created</a>;
<a name='L1455'>1455         <a href='../Y/2485.html' title='Multiple used in 2 places.'>do_div</a>(<a href='../Y/2612.html' title='Multiple used in 28 places.'>duration</a>, <a href='../Y/439.html' title='Multiple used in 8 places.'>HZ</a>);
<a name='L1456'>1456         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/2614.html' title='Multiple used in 24 places.'>duration_sec</a>    = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../S/293.html#L1019' title='Defined at 1019 in cbench/openflow/datapath/datapath.c.'>jiffies_64_to_secs</a>(<a href='../Y/2612.html' title='Multiple used in 28 places.'>duration</a>));
<a name='L1457'>1457         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/2613.html' title='Multiple used in 24 places.'>duration_nsec</a>   = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../S/293.html#L1028' title='Defined at 1028 in cbench/openflow/datapath/datapath.c.'>jiffies_64_to_nsecs</a>(<a href='../Y/2612.html' title='Multiple used in 28 places.'>duration</a>));
<a name='L1458'>1458 
<a name='L1459'>1459         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/5909.html' title='Multiple used in 182 places.'>priority</a>        = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/5909.html' title='Multiple used in 182 places.'>priority</a>);
<a name='L1460'>1460         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../S/935.html#L773' title='Defined at 773 in src/cli.c.'>idle_timeout</a>    = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../S/935.html#L773' title='Defined at 773 in src/cli.c.'>idle_timeout</a>);
<a name='L1461'>1461         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/3541.html' title='Multiple used in 76 places.'>hard_timeout</a>    = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/3541.html' title='Multiple used in 76 places.'>hard_timeout</a>);
<a name='L1462'>1462         <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/5629.html' title='Multiple used in 15 places.'>pad2</a>, 0, <b>sizeof</b> <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/5629.html' title='Multiple used in 15 places.'>pad2</a>);
<a name='L1463'>1463         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/5595.html' title='Multiple used in 48 places.'>packet_count</a>    = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/5595.html' title='Multiple used in 48 places.'>packet_count</a>);
<a name='L1464'>1464         <a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/1732.html' title='Multiple used in 68 places.'>byte_count</a>      = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/1732.html' title='Multiple used in 68 places.'>byte_count</a>);
<a name='L1465'>1465         <a href='../Y/4417.html' title='Multiple used in 205 places.'>memcpy</a>(<a href='../Y/5415.html' title='Multiple used in 73 places.'>ofs</a>-&gt;<a href='../Y/1294.html' title='Multiple used in 157 places.'>actions</a>, <a href='../Y/6724.html' title='Multiple used in 48 places.'>sf_acts</a>-&gt;<a href='../Y/1294.html' title='Multiple used in 157 places.'>actions</a>, <a href='../Y/6724.html' title='Multiple used in 48 places.'>sf_acts</a>-&gt;<a href='../Y/1295.html' title='Multiple used in 192 places.'>actions_len</a>);
<a name='L1466'>1466 
<a name='L1467'>1467         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1744.html' title='Multiple used in 7 places.'>bytes_used</a> += <a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a>;
<a name='L1468'>1468         <b>return</b> 0;
<a name='L1469'>1469 <font color='red'>}</font>
<a name='L1470'>1470 
<a name='L1471'>1471 <b>static</b> <b>int</b> <a href='../R/3081.html' title='Multiple refered from 2 places.'>flow_stats_dump</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>void</b> *<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>,
<a name='L1472'>1472                            <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>)
<a name='L1473'>1473 <font color='red'>{</font>
<a name='L1474'>1474         <b>struct</b> <a href='../D/7877.html' title='Multiple defined in 2 places.'>flow_stats_state</a> *<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = <a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>;
<a name='L1475'>1475         <b>struct</b> <a href='../D/9770.html' title='Multiple defined in 2 places.'>sw_flow_key</a> <a href='../Y/4343.html' title='Multiple used in 16 places.'>match_key</a>;
<a name='L1476'>1476         <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = 0;
<a name='L1477'>1477 
<a name='L1478'>1478         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1744.html' title='Multiple used in 7 places.'>bytes_used</a> = 0;
<a name='L1479'>1479         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1738.html' title='Multiple used in 3 places.'>bytes_allocated</a> = *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>;
<a name='L1480'>1480         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a> = <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1481'>1481 
<a name='L1482'>1482         <a href='../D/7840.html' title='Multiple defined in 2 places.'>flow_extract_match</a>(&amp;<a href='../Y/4343.html' title='Multiple used in 16 places.'>match_key</a>, &amp;<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>);
<a name='L1483'>1483         <b>if</b> (<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a> == <a href='../D/1524.html' title='Multiple defined in 2 places.'>EMERG_TABLE_ID_FOR_STATS</a>) <font color='red'>{</font>
<a name='L1484'>1484                 <b>struct</b> <a href='../D/9777.html' title='Multiple defined in 2 places.'>sw_table</a> *<a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/2659.html' title='Multiple used in 20 places.'>emerg_table</a>;
<a name='L1485'>1485 
<a name='L1486'>1486                 <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a>-&gt;<a href='../Y/3961.html' title='Multiple used in 22 places.'>iterate</a>(<a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a>, &amp;<a href='../Y/4343.html' title='Multiple used in 16 places.'>match_key</a>, <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/5548.html' title='Multiple used in 164 places.'>out_port</a>,
<a name='L1487'>1487                                        &amp;<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>, <a href='../D/7872.html' title='Multiple defined in 2 places.'>flow_stats_dump_callback</a>,
<a name='L1488'>1488                                        <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>);
<a name='L1489'>1489         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1490'>1490                 <b>while</b> (<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a> &lt; <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/4620.html' title='Multiple used in 45 places.'>n_tables</a>
<a name='L1491'>1491                        &amp;&amp; (<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a> == 0xff
<a name='L1492'>1492                            || <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a> == <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a>)) <font color='red'>{</font>
<a name='L1493'>1493                         <b>struct</b> <a href='../D/9777.html' title='Multiple defined in 2 places.'>sw_table</a> *<a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/7234.html' title='Multiple used in 24 places.'>tables</a>[<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a>];
<a name='L1494'>1494 
<a name='L1495'>1495                         <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a>-&gt;<a href='../Y/3961.html' title='Multiple used in 22 places.'>iterate</a>(<a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a>, &amp;<a href='../Y/4343.html' title='Multiple used in 16 places.'>match_key</a>,
<a name='L1496'>1496                                                <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/5548.html' title='Multiple used in 164 places.'>out_port</a>, &amp;<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>,
<a name='L1497'>1497                                                <a href='../D/7872.html' title='Multiple defined in 2 places.'>flow_stats_dump_callback</a>, <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>);
<a name='L1498'>1498                         <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>)
<a name='L1499'>1499                                 <b>break</b>;
<a name='L1500'>1500 
<a name='L1501'>1501                         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a>++;
<a name='L1502'>1502                         <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>, 0, <b>sizeof</b> <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>);
<a name='L1503'>1503                 <font color='red'>}</font>
<a name='L1504'>1504         <font color='red'>}</font>
<a name='L1505'>1505         *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> = <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1744.html' title='Multiple used in 7 places.'>bytes_used</a>;
<a name='L1506'>1506 
<a name='L1507'>1507         <i><font color='green'>/* If error is 0, we're done.</font></i>
<a name='L1508'>1508 <i><font color='green'>         * Otherwise, if some bytes were used, there are more flows to come.</font></i>
<a name='L1509'>1509 <i><font color='green'>         * Otherwise, we were not able to fit even a single flow in the body,</font></i>
<a name='L1510'>1510 <i><font color='green'>         * which indicates that we have a single flow with too many actions to</font></i>
<a name='L1511'>1511 <i><font color='green'>         * fit.  We won't ever make any progress at that rate, so give up. */</font></i>
<a name='L1512'>1512         <b>return</b> !<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> ? 0 : <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/1744.html' title='Multiple used in 7 places.'>bytes_used</a> ? 1 : -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1513'>1513 <font color='red'>}</font>
<a name='L1514'>1514 
<a name='L1515'>1515 <b>static</b> <b>void</b> <a href='../R/3080.html' title='Multiple refered from 2 places.'>flow_stats_done</a>(<b>void</b> *<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>)
<a name='L1516'>1516 <font color='red'>{</font>
<a name='L1517'>1517         <a href='../Y/4017.html' title='Multiple used in 20 places.'>kfree</a>(<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>);
<a name='L1518'>1518 <font color='red'>}</font>
<a name='L1519'>1519 
<a name='L1520'>1520 <b>static</b> <b>int</b> <a href='../R/2175.html' title='Multiple refered from 2 places.'>aggregate_stats_init</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>,
<a name='L1521'>1521                                 <b>const</b> <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>,
<a name='L1522'>1522                                 <b>void</b> **<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>)
<a name='L1523'>1523 <font color='red'>{</font>
<a name='L1524'>1524         *<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a> = (<b>void</b> *)<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1525'>1525         <b>return</b> 0;
<a name='L1526'>1526 <font color='red'>}</font>
<a name='L1527'>1527 
<a name='L1528'>1528 <b>static</b> <b>int</b> <a href='../R/2174.html' title='Multiple refered from 4 places.'>aggregate_stats_dump_callback</a>(<b>struct</b> <a href='../Y/7178.html' title='Multiple used in 120 places.'>sw_flow</a> *<a href='../Y/3131.html' title='Multiple used in 114 places.'>flow</a>, <b>void</b> *<a href='../Y/5911.html' title='Multiple used in 123 places.'>private</a>)
<a name='L1529'>1529 <font color='red'>{</font>
<a name='L1530'>1530         <b>struct</b> <a href='../D/8751.html' title='Multiple defined in 4 places.'>ofp_aggregate_stats_reply</a> *<a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a> = <a href='../Y/5911.html' title='Multiple used in 123 places.'>private</a>;
<a name='L1531'>1531         <a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>-&gt;<a href='../Y/5595.html' title='Multiple used in 48 places.'>packet_count</a> += <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/5595.html' title='Multiple used in 48 places.'>packet_count</a>;
<a name='L1532'>1532         <a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>-&gt;<a href='../Y/1732.html' title='Multiple used in 68 places.'>byte_count</a> += <a href='../D/7829.html' title='Multiple defined in 2 places.'>flow</a>-&gt;<a href='../Y/1732.html' title='Multiple used in 68 places.'>byte_count</a>;
<a name='L1533'>1533         <a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>-&gt;<a href='../Y/3136.html' title='Multiple used in 25 places.'>flow_count</a>++;
<a name='L1534'>1534         <b>return</b> 0;
<a name='L1535'>1535 <font color='red'>}</font>
<a name='L1536'>1536 
<a name='L1537'>1537 <b>static</b> <b>int</b> <a href='../R/2173.html' title='Multiple refered from 2 places.'>aggregate_stats_dump</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>void</b> *<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>,
<a name='L1538'>1538                                 <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>)
<a name='L1539'>1539 <font color='red'>{</font>
<a name='L1540'>1540         <b>struct</b> <a href='../D/8752.html' title='Multiple defined in 4 places.'>ofp_aggregate_stats_request</a> *<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a> = <a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>;
<a name='L1541'>1541         <b>struct</b> <a href='../D/8751.html' title='Multiple defined in 4 places.'>ofp_aggregate_stats_reply</a> *<a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>;
<a name='L1542'>1542         <b>struct</b> <a href='../D/9781.html' title='Multiple defined in 2 places.'>sw_table_position</a> <a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>;
<a name='L1543'>1543         <b>struct</b> <a href='../D/9770.html' title='Multiple defined in 2 places.'>sw_flow_key</a> <a href='../Y/4343.html' title='Multiple used in 16 places.'>match_key</a>;
<a name='L1544'>1544         <b>int</b> <a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a>;
<a name='L1545'>1545         <b>int</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = 0;
<a name='L1546'>1546 
<a name='L1547'>1547         <b>if</b> (*<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> &lt; <b>sizeof</b> *<a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>)
<a name='L1548'>1548                 <b>return</b> -<a href='../Y/273.html' title='Multiple used in 24 places.'>ENOBUFS</a>;
<a name='L1549'>1549         <a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a> = <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1550'>1550         *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> = <b>sizeof</b> *<a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>;
<a name='L1551'>1551 
<a name='L1552'>1552         <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>, 0, <b>sizeof</b> *<a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>);
<a name='L1553'>1553 
<a name='L1554'>1554         <a href='../D/7840.html' title='Multiple defined in 2 places.'>flow_extract_match</a>(&amp;<a href='../Y/4343.html' title='Multiple used in 16 places.'>match_key</a>, &amp;<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../S/252.html#L421' title='Defined at 421 in cbench/openflow/tests/test-stp.c.'>match</a>);
<a name='L1555'>1555         <a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a> = <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a> == 0xff ? 0 : <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a>;
<a name='L1556'>1556         <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>, 0, <b>sizeof</b> <a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>);
<a name='L1557'>1557 
<a name='L1558'>1558         <b>if</b> (<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a> == <a href='../D/1524.html' title='Multiple defined in 2 places.'>EMERG_TABLE_ID_FOR_STATS</a>) <font color='red'>{</font>
<a name='L1559'>1559                 <b>struct</b> <a href='../D/9777.html' title='Multiple defined in 2 places.'>sw_table</a> *<a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/2659.html' title='Multiple used in 20 places.'>emerg_table</a>;
<a name='L1560'>1560 
<a name='L1561'>1561                 <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a>-&gt;<a href='../Y/3961.html' title='Multiple used in 22 places.'>iterate</a>(<a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a>, &amp;<a href='../Y/4343.html' title='Multiple used in 16 places.'>match_key</a>, <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/5548.html' title='Multiple used in 164 places.'>out_port</a>,
<a name='L1562'>1562                                        &amp;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>,
<a name='L1563'>1563                                        <a href='../D/6850.html' title='Multiple defined in 2 places.'>aggregate_stats_dump_callback</a>, <a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>);
<a name='L1564'>1564                 <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>)
<a name='L1565'>1565                         <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1566'>1566         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1567'>1567                 <b>while</b> (<a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a> &lt; <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/4620.html' title='Multiple used in 45 places.'>n_tables</a>
<a name='L1568'>1568                        &amp;&amp; (<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a> == 0xff || <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a> == <a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a>)) <font color='red'>{</font>
<a name='L1569'>1569                         <b>struct</b> <a href='../D/9777.html' title='Multiple defined in 2 places.'>sw_table</a> *<a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/7234.html' title='Multiple used in 24 places.'>tables</a>[<a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a>];
<a name='L1570'>1570 
<a name='L1571'>1571                         <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a> = <a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a>-&gt;<a href='../Y/3961.html' title='Multiple used in 22 places.'>iterate</a>(<a href='../Y/7225.html' title='Multiple used in 105 places.'>table</a>, &amp;<a href='../Y/4343.html' title='Multiple used in 16 places.'>match_key</a>, <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/5548.html' title='Multiple used in 164 places.'>out_port</a>,
<a name='L1572'>1572                                                &amp;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>,
<a name='L1573'>1573                                                <a href='../D/6850.html' title='Multiple defined in 2 places.'>aggregate_stats_dump_callback</a>,
<a name='L1574'>1574                                                <a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>);
<a name='L1575'>1575                         <b>if</b> (<a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>)
<a name='L1576'>1576                                 <b>return</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L1577'>1577 
<a name='L1578'>1578                         <a href='../Y/7228.html' title='Multiple used in 33 places.'>table_idx</a>++;
<a name='L1579'>1579                         <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(&amp;<a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>, 0, <b>sizeof</b> <a href='../Y/5843.html' title='Multiple used in 69 places.'>position</a>);
<a name='L1580'>1580                 <font color='red'>}</font>
<a name='L1581'>1581         <font color='red'>}</font>
<a name='L1582'>1582 
<a name='L1583'>1583         <a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>-&gt;<a href='../Y/5595.html' title='Multiple used in 48 places.'>packet_count</a> = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>-&gt;<a href='../Y/5595.html' title='Multiple used in 48 places.'>packet_count</a>);
<a name='L1584'>1584         <a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>-&gt;<a href='../Y/1732.html' title='Multiple used in 68 places.'>byte_count</a> = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>-&gt;<a href='../Y/1732.html' title='Multiple used in 68 places.'>byte_count</a>);
<a name='L1585'>1585         <a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>-&gt;<a href='../Y/3136.html' title='Multiple used in 25 places.'>flow_count</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/6472.html' title='Multiple used in 26 places.'>rpy</a>-&gt;<a href='../Y/3136.html' title='Multiple used in 25 places.'>flow_count</a>);
<a name='L1586'>1586         <b>return</b> 0;
<a name='L1587'>1587 <font color='red'>}</font>
<a name='L1588'>1588 
<a name='L1589'>1589 <b>static</b> <b>int</b> <a href='../R/4742.html' title='Multiple refered from 2 places.'>table_stats_dump</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>void</b> *<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>,
<a name='L1590'>1590                             <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>)
<a name='L1591'>1591 <font color='red'>{</font>
<a name='L1592'>1592         <b>struct</b> <a href='../D/8916.html' title='Multiple defined in 3 places.'>ofp_table_stats</a> *<a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>;
<a name='L1593'>1593         <b>int</b> <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/4620.html' title='Multiple used in 45 places.'>n_tables</a> * <b>sizeof</b> *<a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>;
<a name='L1594'>1594         <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L1595'>1595         <b>if</b> (<a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a> &gt; *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>)
<a name='L1596'>1596                 <b>return</b> -<a href='../Y/273.html' title='Multiple used in 24 places.'>ENOBUFS</a>;
<a name='L1597'>1597         *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> = <a href='../Y/4574.html' title='Multiple used in 31 places.'>n_bytes</a>;
<a name='L1598'>1598         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> = 0, <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a> = <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> &lt; <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/4620.html' title='Multiple used in 45 places.'>n_tables</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++, <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>++) <font color='red'>{</font>
<a name='L1599'>1599                 <b>struct</b> <a href='../D/9782.html' title='Multiple defined in 2 places.'>sw_table_stats</a> <a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>;
<a name='L1600'>1600                 <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/7234.html' title='Multiple used in 24 places.'>tables</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>]-&gt;<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/1847.html' title='Multiple used in 211 places.'>chain</a>-&gt;<a href='../Y/7234.html' title='Multiple used in 24 places.'>tables</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>], &amp;<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>);
<a name='L1601'>1601                 <a href='../Y/7102.html' title='Multiple used in 59 places.'>strncpy</a>(<a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>.<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>);
<a name='L1602'>1602                 <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../Y/7227.html' title='Multiple used in 65 places.'>table_id</a> = <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L1603'>1603                 <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../Y/7877.html' title='Multiple used in 308 places.'>wildcards</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>.<a href='../Y/7877.html' title='Multiple used in 308 places.'>wildcards</a>);
<a name='L1604'>1604                 <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>, 0, <b>sizeof</b> <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>);
<a name='L1605'>1605                 <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../Y/4367.html' title='Multiple used in 6 places.'>max_entries</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>.<a href='../Y/4370.html' title='Multiple used in 32 places.'>max_flows</a>);
<a name='L1606'>1606                 <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../Y/1299.html' title='Multiple used in 6 places.'>active_count</a> = <a href='../Y/3677.html' title='Multiple used in 235 places.'>htonl</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>.<a href='../Y/4588.html' title='Multiple used in 45 places.'>n_flows</a>);
<a name='L1607'>1607                 <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../Y/4244.html' title='Multiple used in 6 places.'>lookup_count</a> = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>.<a href='../Y/4600.html' title='Multiple used in 22 places.'>n_lookup</a>);
<a name='L1608'>1608                 <a href='../Y/5527.html' title='Multiple used in 20 places.'>ots</a>-&gt;<a href='../Y/4349.html' title='Multiple used in 6 places.'>matched_count</a> = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>.<a href='../Y/4601.html' title='Multiple used in 23 places.'>n_matched</a>);
<a name='L1609'>1609         <font color='red'>}</font>
<a name='L1610'>1610         <b>return</b> 0;
<a name='L1611'>1611 <font color='red'>}</font>
<a name='L1612'>1612 
<a name='L1613'>1613 <b>struct</b> <a href='../R/4092.html' title='Multiple refered from 4 places.'>port_stats_state</a> <font color='red'>{</font>
<a name='L1614'>1614         <b>int</b> <a href='../Y/6991.html' title='Multiple used in 13 places.'>start_port</a>; <i><font color='green'>/* port to start dumping from */</font></i>
<a name='L1615'>1615         <b>int</b> <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>;    <i><font color='green'>/* from ofp_port_stats_request */</font></i>
<a name='L1616'>1616 <font color='red'>}</font>;
<a name='L1617'>1617 
<a name='L1618'>1618 <b>static</b> <b>int</b> <a href='../R/4090.html' title='Multiple refered from 2 places.'>port_stats_init</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>,
<a name='L1619'>1619                            <b>void</b> **<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>)
<a name='L1620'>1620 <font color='red'>{</font>
<a name='L1621'>1621         <b>struct</b> <a href='../D/9106.html' title='Multiple defined in 2 places.'>port_stats_state</a> *<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = <a href='../Y/4020.html' title='Multiple used in 5 places.'>kmalloc</a>(<b>sizeof</b> *<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>, <a href='../Y/378.html' title='Multiple used in 20 places.'>GFP_ATOMIC</a>);
<a name='L1622'>1622         <b>struct</b> <a href='../D/8862.html' title='Multiple defined in 3 places.'>ofp_port_stats_request</a> *<a href='../Y/6119.html' title='Multiple used in 9 places.'>psr</a>
<a name='L1623'>1623                 = (<b>struct</b> <a href='../D/8862.html' title='Multiple defined in 3 places.'>ofp_port_stats_request</a> *)<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1624'>1624 
<a name='L1625'>1625         <b>if</b> (!<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>)
<a name='L1626'>1626                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1627'>1627         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6991.html' title='Multiple used in 13 places.'>start_port</a> = 1;
<a name='L1628'>1628         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> = <a href='../D/8631.html' title='Multiple defined in 2 places.'>ntohs</a>(<a href='../Y/6119.html' title='Multiple used in 9 places.'>psr</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>);
<a name='L1629'>1629         *<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a> = <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>;
<a name='L1630'>1630         <b>return</b> 0;
<a name='L1631'>1631 <font color='red'>}</font>
<a name='L1632'>1632 
<a name='L1633'>1633 <b>static</b> <b>void</b>
<a name='L1634'>1634 <a href='../R/2863.html' title='Multiple refered from 6 places.'>dump_port_stats</a>(<b>struct</b> <a href='../Y/5284.html' title='Multiple used in 8 places.'>ofp_port_stats</a> *<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>, <b>struct</b> <a href='../Y/4698.html' title='Multiple used in 15 places.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>)
<a name='L1635'>1635 <font color='red'>{</font>
<a name='L1636'>1636         <b>struct</b> <a href='../Y/4701.html' title='Multiple used in 6 places.'>net_device_stats</a> *<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>;
<a name='L1637'>1637 
<a name='L1638'>1638 <font color='darkred'>#if</font> <a href='../Y/502.html' title='Multiple used in 39 places.'>LINUX_VERSION_CODE</a> &gt;= <a href='../Y/480.html' title='Multiple used in 39 places.'>KERNEL_VERSION</a>(2,6,31)
<a name='L1639'>1639         <a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a> = <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/4717.html' title='Multiple used in 3 places.'>netdev_ops</a>-&gt;<a href='../Y/4668.html' title='Multiple used in 2 places.'>ndo_get_stats</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>);
<a name='L1640'>1640 <font color='darkred'>#else</font>
<a name='L1641'>1641         <a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a> = <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>-&gt;<a href='../Y/3403.html' title='Multiple used in 3 places.'>get_stats</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/2359.html' title='Multiple used in 435 places.'>dev</a>);
<a name='L1642'>1642 <font color='darkred'>#endif</font>
<a name='L1643'>1643         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>);
<a name='L1644'>1644         <a href='../Y/4419.html' title='Multiple used in 245 places.'>memset</a>(<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>, 0, <b>sizeof</b> <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/5627.html' title='Multiple used in 143 places.'>pad</a>);
<a name='L1645'>1645         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/6526.html' title='Multiple used in 32 places.'>rx_packets</a>   = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;<a href='../Y/6526.html' title='Multiple used in 32 places.'>rx_packets</a>);
<a name='L1646'>1646         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/7534.html' title='Multiple used in 38 places.'>tx_packets</a>   = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;<a href='../Y/7534.html' title='Multiple used in 38 places.'>tx_packets</a>);
<a name='L1647'>1647         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/6515.html' title='Multiple used in 32 places.'>rx_bytes</a>     = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;<a href='../Y/6515.html' title='Multiple used in 32 places.'>rx_bytes</a>);
<a name='L1648'>1648         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/7530.html' title='Multiple used in 38 places.'>tx_bytes</a>     = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;<a href='../Y/7530.html' title='Multiple used in 38 places.'>tx_bytes</a>);
<a name='L1649'>1649         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/6519.html' title='Multiple used in 9 places.'>rx_dropped</a>   = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;<a href='../Y/6519.html' title='Multiple used in 9 places.'>rx_dropped</a>);
<a name='L1650'>1650         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/7531.html' title='Multiple used in 15 places.'>tx_dropped</a>   = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;<a href='../Y/7531.html' title='Multiple used in 15 places.'>tx_dropped</a>);
<a name='L1651'>1651         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/6520.html' title='Multiple used in 9 places.'>rx_errors</a>    = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;<a href='../Y/6520.html' title='Multiple used in 9 places.'>rx_errors</a>);
<a name='L1652'>1652         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/7532.html' title='Multiple used in 15 places.'>tx_errors</a>    = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;<a href='../Y/7532.html' title='Multiple used in 15 places.'>tx_errors</a>);
<a name='L1653'>1653         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/6521.html' title='Multiple used in 9 places.'>rx_frame_err</a> = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;rx_frame_errors);
<a name='L1654'>1654         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/6524.html' title='Multiple used in 9 places.'>rx_over_err</a>  = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;rx_over_errors);
<a name='L1655'>1655         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/6517.html' title='Multiple used in 9 places.'>rx_crc_err</a>   = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;rx_crc_errors);
<a name='L1656'>1656         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>-&gt;<a href='../Y/2002.html' title='Multiple used in 9 places.'>collisions</a>   = <a href='../Y/2160.html' title='Multiple used in 21 places.'>cpu_to_be64</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>-&gt;<a href='../Y/2002.html' title='Multiple used in 9 places.'>collisions</a>);
<a name='L1657'>1657 <font color='red'>}</font>
<a name='L1658'>1658 
<a name='L1659'>1659 <b>static</b> <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *
<a name='L1660'>1660 <a href='../R/3434.html' title='Multiple refered from 8 places.'>lookup_port</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/7619.html' title='Multiple used in 1069 places.'>uint16_t</a> <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>)
<a name='L1661'>1661 <font color='red'>{</font>
<a name='L1662'>1662         <b>return</b> (<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> &lt; <a href='../D/1464.html' title='Multiple defined in 2 places.'>DP_MAX_PORTS</a> ? <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5841.html' title='Multiple used in 64 places.'>ports</a>[<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>]
<a name='L1663'>1663                 : <a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> == <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a> ? <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4196.html' title='Multiple used in 23 places.'>local_port</a>
<a name='L1664'>1664                 : <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>);
<a name='L1665'>1665 <font color='red'>}</font>
<a name='L1666'>1666 
<a name='L1667'>1667 
<a name='L1668'>1668 <b>static</b> <b>int</b> <a href='../R/4089.html' title='Multiple refered from 2 places.'>port_stats_dump</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>void</b> *<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>,
<a name='L1669'>1669                            <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>)
<a name='L1670'>1670 <font color='red'>{</font>
<a name='L1671'>1671         <b>struct</b> <a href='../D/9106.html' title='Multiple defined in 2 places.'>port_stats_state</a> *<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = <a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>;
<a name='L1672'>1672         <b>struct</b> <a href='../S/291.html#L70' title='Defined at 70 in cbench/openflow/datapath/datapath.h.'>net_bridge_port</a> *<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1673'>1673         <b>struct</b> <a href='../D/8860.html' title='Multiple defined in 3 places.'>ofp_port_stats</a> *<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L1674'>1674         <b>int</b> <a href='../Y/4612.html' title='Multiple used in 33 places.'>n_ports</a> = 0;
<a name='L1675'>1675         <b>int</b> <a href='../Y/4383.html' title='Multiple used in 5 places.'>max_ports</a> = 0;
<a name='L1676'>1676         <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> = 0;
<a name='L1677'>1677 
<a name='L1678'>1678         <a href='../Y/4383.html' title='Multiple used in 5 places.'>max_ports</a> = *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> / <b>sizeof</b> *<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>;
<a name='L1679'>1679         <b>if</b> (!<a href='../Y/4383.html' title='Multiple used in 5 places.'>max_ports</a>)
<a name='L1680'>1680                 <b>return</b> -<a href='../Y/276.html' title='Multiple used in 35 places.'>ENOMEM</a>;
<a name='L1681'>1681         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a> = <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1682'>1682 
<a name='L1683'>1683         <b>if</b> (<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a> == <a href='../D/3587.html' title='Multiple defined in 2 places.'>OFPP_NONE</a>) <font color='red'>{</font>
<a name='L1684'>1684                 <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> = <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6991.html' title='Multiple used in 13 places.'>start_port</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> &lt; <a href='../D/1464.html' title='Multiple defined in 2 places.'>DP_MAX_PORTS</a> &amp;&amp; <a href='../Y/4612.html' title='Multiple used in 33 places.'>n_ports</a> &lt; <a href='../Y/4383.html' title='Multiple used in 5 places.'>max_ports</a>;
<a name='L1685'>1685                      <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L1686'>1686                         <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> = <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/5841.html' title='Multiple used in 64 places.'>ports</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>];
<a name='L1687'>1687                         <b>if</b> (!<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>)
<a name='L1688'>1688                                 <b>continue</b>;
<a name='L1689'>1689                         <a href='../D/7610.html' title='Multiple defined in 2 places.'>dump_port_stats</a>(<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>, <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L1690'>1690                         <a href='../Y/4612.html' title='Multiple used in 33 places.'>n_ports</a>++;
<a name='L1691'>1691                         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>++;
<a name='L1692'>1692                 <font color='red'>}</font>
<a name='L1693'>1693                 <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6991.html' title='Multiple used in 13 places.'>start_port</a> = <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L1694'>1694                 <b>if</b> (<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4196.html' title='Multiple used in 23 places.'>local_port</a>) <font color='red'>{</font>
<a name='L1695'>1695                         <a href='../D/7610.html' title='Multiple defined in 2 places.'>dump_port_stats</a>(<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>, <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>-&gt;<a href='../Y/4196.html' title='Multiple used in 23 places.'>local_port</a>);
<a name='L1696'>1696                         <a href='../Y/4612.html' title='Multiple used in 33 places.'>n_ports</a>++;
<a name='L1697'>1697                         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>++;
<a name='L1698'>1698                         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/6991.html' title='Multiple used in 13 places.'>start_port</a> = <a href='../D/3585.html' title='Multiple defined in 3 places.'>OFPP_LOCAL</a> + 1; <i><font color='green'>/* == OFPP_NONE, &gt; DP_MAX_PORTS */</font></i>
<a name='L1699'>1699                 <font color='red'>}</font>
<a name='L1700'>1700         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1701'>1701                 <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a> = <a href='../D/8283.html' title='Multiple defined in 2 places.'>lookup_port</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/5822.html' title='Multiple used in 265 places.'>port_no</a>);
<a name='L1702'>1702                 <b>if</b> (<a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>) <font color='red'>{</font>
<a name='L1703'>1703                         <a href='../D/7610.html' title='Multiple defined in 2 places.'>dump_port_stats</a>(<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>, <a href='../Y/5568.html' title='Multiple used in 1140 places.'>p</a>);
<a name='L1704'>1704                         <a href='../Y/4612.html' title='Multiple used in 33 places.'>n_ports</a>++;
<a name='L1705'>1705                         <a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>++;
<a name='L1706'>1706                 <font color='red'>}</font>
<a name='L1707'>1707         <font color='red'>}</font>
<a name='L1708'>1708 
<a name='L1709'>1709         *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> = <a href='../Y/4612.html' title='Multiple used in 33 places.'>n_ports</a> * <b>sizeof</b> *<a href='../Y/5493.html' title='Multiple used in 84 places.'>ops</a>;
<a name='L1710'>1710         <b>return</b> <a href='../Y/4612.html' title='Multiple used in 33 places.'>n_ports</a> &gt;= <a href='../Y/4383.html' title='Multiple used in 5 places.'>max_ports</a>;
<a name='L1711'>1711 <font color='red'>}</font>
<a name='L1712'>1712 
<a name='L1713'>1713 <b>static</b> <b>void</b> <a href='../R/4088.html' title='Multiple refered from 2 places.'>port_stats_done</a>(<b>void</b> *<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>)
<a name='L1714'>1714 <font color='red'>{</font>
<a name='L1715'>1715         <a href='../Y/4017.html' title='Multiple used in 20 places.'>kfree</a>(<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>);
<a name='L1716'>1716 <font color='red'>}</font>
<a name='L1717'>1717 
<a name='L1718'>1718 <i><font color='green'>/*</font></i>
<a name='L1719'>1719 <i><font color='green'> * We don't define any vendor_stats_state, we let the actual</font></i>
<a name='L1720'>1720 <i><font color='green'> * vendor implementation do that.</font></i>
<a name='L1721'>1721 <i><font color='green'> * The only requirement is that the first member of that object</font></i>
<a name='L1722'>1722 <i><font color='green'> * should be the vendor id.</font></i>
<a name='L1723'>1723 <i><font color='green'> * Jean II</font></i>
<a name='L1724'>1724 <i><font color='green'> *</font></i>
<a name='L1725'>1725 <i><font color='green'> * Basically, it would look like :</font></i>
<a name='L1726'>1726 <i><font color='green'> * struct acme_stats_state {</font></i>
<a name='L1727'>1727 <i><font color='green'> *  uint32_t              vendor;         // ACME_VENDOR_ID.</font></i>
<a name='L1728'>1728 <i><font color='green'> * &lt;...&gt;                                  // Other stuff.</font></i>
<a name='L1729'>1729 <i><font color='green'> * };</font></i>
<a name='L1730'>1730 <i><font color='green'> */</font></i>
<a name='L1731'>1731 <b>static</b> <b>int</b> <a href='../R/4934.html' title='Multiple refered from 2 places.'>vendor_stats_init</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>,
<a name='L1732'>1732                              <b>int</b> <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>, <b>void</b> **<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>)
<a name='L1733'>1733 <font color='red'>{</font>
<a name='L1734'>1734         <i><font color='green'>/* min_body was checked, this is safe */</font></i>
<a name='L1735'>1735         <b>const</b> <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/7757.html' title='Multiple used in 43 places.'>vendor</a> = <a href='../Y/4953.html' title='Multiple used in 218 places.'>ntohl</a>(*((<a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> *)<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>));
<a name='L1736'>1736         <b>int</b>          <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1737'>1737 
<a name='L1738'>1738         <b>switch</b> (<a href='../Y/7757.html' title='Multiple used in 43 places.'>vendor</a>) <font color='red'>{</font>
<a name='L1739'>1739         <b>default</b>:
<a name='L1740'>1740                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1741'>1741         <font color='red'>}</font>
<a name='L1742'>1742 
<a name='L1743'>1743         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1744'>1744 <font color='red'>}</font>
<a name='L1745'>1745 
<a name='L1746'>1746 <b>static</b> <b>int</b> <a href='../R/4933.html' title='Multiple refered from 2 places.'>vendor_stats_dump</a>(<b>struct</b> <a href='../Y/2280.html' title='Multiple used in 184 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>void</b> *<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>, <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>,
<a name='L1747'>1747                              <b>int</b> *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>)
<a name='L1748'>1748 <font color='red'>{</font>
<a name='L1749'>1749         <b>const</b> <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/7757.html' title='Multiple used in 43 places.'>vendor</a> = *((<a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> *)<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>);
<a name='L1750'>1750         <b>int</b>           <a href='../Y/4796.html' title='Multiple used in 3 places.'>newbuf</a>;
<a name='L1751'>1751 
<a name='L1752'>1752         <b>switch</b> (<a href='../Y/7757.html' title='Multiple used in 43 places.'>vendor</a>) <font color='red'>{</font>
<a name='L1753'>1753         <b>default</b>:
<a name='L1754'>1754                 <i><font color='green'>/* Should never happen */</font></i>
<a name='L1755'>1755                 <a href='../Y/4796.html' title='Multiple used in 3 places.'>newbuf</a> = 0;
<a name='L1756'>1756         <font color='red'>}</font>
<a name='L1757'>1757 
<a name='L1758'>1758           <b>return</b> <a href='../Y/4796.html' title='Multiple used in 3 places.'>newbuf</a>;
<a name='L1759'>1759 <font color='red'>}</font>
<a name='L1760'>1760 
<a name='L1761'>1761 <b>static</b> <b>void</b> <a href='../R/4932.html' title='Multiple refered from 2 places.'>vendor_stats_done</a>(<b>void</b> *<a href='../Y/7012.html' title='Multiple used in 51 places.'>state</a>)
<a name='L1762'>1762 <font color='red'>{</font>
<a name='L1763'>1763         <b>const</b> <a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> <a href='../Y/7757.html' title='Multiple used in 43 places.'>vendor</a> = *((<a href='../Y/7621.html' title='Multiple used in 1429 places.'>uint32_t</a> *)<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>);
<a name='L1764'>1764 
<a name='L1765'>1765         <b>switch</b> (<a href='../Y/7757.html' title='Multiple used in 43 places.'>vendor</a>) <font color='red'>{</font>
<a name='L1766'>1766         <b>default</b>:
<a name='L1767'>1767                 <i><font color='green'>/* Should never happen */</font></i>
<a name='L1768'>1768                 <a href='../Y/4017.html' title='Multiple used in 20 places.'>kfree</a>(<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>);
<a name='L1769'>1769         <font color='red'>}</font>
<a name='L1770'>1770 
<a name='L1771'>1771         <b>return</b>;
<a name='L1772'>1772 <font color='red'>}</font>
<a name='L1773'>1773 
<a name='L1774'>1774 <b>struct</b> <a href='../R/4532.html' title='Multiple refered from 11 places.'>stats_type</a> <font color='red'>{</font>
<a name='L1775'>1775         <i><font color='green'>/* Minimum and maximum acceptable number of bytes in body member of</font></i>
<a name='L1776'>1776 <i><font color='green'>         * struct ofp_stats_request. */</font></i>
<a name='L1777'>1777         <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/4451.html' title='Multiple used in 7 places.'>min_body</a>, <a href='../Y/4363.html' title='Multiple used in 7 places.'>max_body</a>;
<a name='L1778'>1778 
<a name='L1779'>1779         <i><font color='green'>/* Prepares to dump some kind of statistics on 'dp'.  'body' and</font></i>
<a name='L1780'>1780 <i><font color='green'>         * 'body_len' are the 'body' member of the struct ofp_stats_request.</font></i>
<a name='L1781'>1781 <i><font color='green'>         * Returns zero if successful, otherwise a negative error code.</font></i>
<a name='L1782'>1782 <i><font color='green'>         * May initialize '*state' to state information.  May be null if no</font></i>
<a name='L1783'>1783 <i><font color='green'>         * initialization is required.*/</font></i>
<a name='L1784'>1784         <b>int</b> (*<a href='../D/8107.html' title='Multiple defined in 14 places.'>init</a>)(<b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>const</b> <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>,
<a name='L1785'>1785                     <b>void</b> **<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>);
<a name='L1786'>1786 
<a name='L1787'>1787         <i><font color='green'>/* Dumps statistics for 'dp' into the '*body_len' bytes at 'body', and</font></i>
<a name='L1788'>1788 <i><font color='green'>         * modifies '*body_len' to reflect the number of bytes actually used.</font></i>
<a name='L1789'>1789 <i><font color='green'>         * ('body' will be transmitted as the 'body' member of struct</font></i>
<a name='L1790'>1790 <i><font color='green'>         * ofp_stats_reply.) */</font></i>
<a name='L1791'>1791         <b>int</b> (*<a href='../S/252.html#L203' title='Defined at 203 in cbench/openflow/tests/test-stp.c.'>dump</a>)(<b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <b>void</b> *<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>,
<a name='L1792'>1792                     <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <b>int</b> *<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>);
<a name='L1793'>1793 
<a name='L1794'>1794         <i><font color='green'>/* Cleans any state created by the init or dump functions.  May be null</font></i>
<a name='L1795'>1795 <i><font color='green'>         * if no cleanup is required. */</font></i>
<a name='L1796'>1796         <b>void</b> (*<a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a>)(<b>void</b> *<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>);
<a name='L1797'>1797 <font color='red'>}</font>;
<a name='L1798'>1798 
<a name='L1799'>1799 <b>static</b> <b>const</b> <b>struct</b> <a href='../D/9615.html' title='Multiple defined in 3 places.'>stats_type</a> <a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>[] = <font color='red'>{</font>
<a name='L1800'>1800         [<a href='../D/3622.html' title='Multiple defined in 2 places.'>OFPST_DESC</a>] = <font color='red'>{</font>
<a name='L1801'>1801                 0,
<a name='L1802'>1802                 0,
<a name='L1803'>1803                 <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>,
<a name='L1804'>1804                 <a href='../D/7307.html' title='Multiple defined in 2 places.'>desc_stats_dump</a>,
<a name='L1805'>1805                 <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>
<a name='L1806'>1806         <font color='red'>}</font>,
<a name='L1807'>1807         [<a href='../D/3623.html' title='Multiple defined in 2 places.'>OFPST_FLOW</a>] = <font color='red'>{</font>
<a name='L1808'>1808                 <b>sizeof</b>(<b>struct</b> <a href='../D/8787.html' title='Multiple defined in 4 places.'>ofp_flow_stats_request</a>),
<a name='L1809'>1809                 <b>sizeof</b>(<b>struct</b> <a href='../D/8787.html' title='Multiple defined in 4 places.'>ofp_flow_stats_request</a>),
<a name='L1810'>1810                 <a href='../D/7874.html' title='Multiple defined in 2 places.'>flow_stats_init</a>,
<a name='L1811'>1811                 <a href='../D/7871.html' title='Multiple defined in 2 places.'>flow_stats_dump</a>,
<a name='L1812'>1812                 <a href='../D/7870.html' title='Multiple defined in 2 places.'>flow_stats_done</a>
<a name='L1813'>1813         <font color='red'>}</font>,
<a name='L1814'>1814         [<a href='../D/3621.html' title='Multiple defined in 2 places.'>OFPST_AGGREGATE</a>] = <font color='red'>{</font>
<a name='L1815'>1815                 <b>sizeof</b>(<b>struct</b> <a href='../D/8752.html' title='Multiple defined in 4 places.'>ofp_aggregate_stats_request</a>),
<a name='L1816'>1816                 <b>sizeof</b>(<b>struct</b> <a href='../D/8752.html' title='Multiple defined in 4 places.'>ofp_aggregate_stats_request</a>),
<a name='L1817'>1817                 <a href='../D/6851.html' title='Multiple defined in 2 places.'>aggregate_stats_init</a>,
<a name='L1818'>1818                 <a href='../D/6849.html' title='Multiple defined in 2 places.'>aggregate_stats_dump</a>,
<a name='L1819'>1819                 <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>
<a name='L1820'>1820         <font color='red'>}</font>,
<a name='L1821'>1821         [<a href='../D/3626.html' title='Multiple defined in 2 places.'>OFPST_TABLE</a>] = <font color='red'>{</font>
<a name='L1822'>1822                 0,
<a name='L1823'>1823                 0,
<a name='L1824'>1824                 <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>,
<a name='L1825'>1825                 <a href='../D/9830.html' title='Multiple defined in 2 places.'>table_stats_dump</a>,
<a name='L1826'>1826                 <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>
<a name='L1827'>1827         <font color='red'>}</font>,
<a name='L1828'>1828         [<a href='../D/3624.html' title='Multiple defined in 2 places.'>OFPST_PORT</a>] = <font color='red'>{</font>
<a name='L1829'>1829                 <b>sizeof</b>(<b>struct</b> <a href='../D/8862.html' title='Multiple defined in 3 places.'>ofp_port_stats_request</a>),
<a name='L1830'>1830                 <b>sizeof</b>(<b>struct</b> <a href='../D/8862.html' title='Multiple defined in 3 places.'>ofp_port_stats_request</a>),
<a name='L1831'>1831                 <a href='../D/9104.html' title='Multiple defined in 2 places.'>port_stats_init</a>,
<a name='L1832'>1832                 <a href='../D/9103.html' title='Multiple defined in 2 places.'>port_stats_dump</a>,
<a name='L1833'>1833                 <a href='../D/9102.html' title='Multiple defined in 2 places.'>port_stats_done</a>
<a name='L1834'>1834         <font color='red'>}</font>,
<a name='L1835'>1835 <font color='red'>}</font>;
<a name='L1836'>1836 
<a name='L1837'>1837 <i><font color='green'>/* For OFPST_VENDOR... Jean II */</font></i>
<a name='L1838'>1838 <b>static</b> <b>const</b> <b>struct</b> <a href='../D/9615.html' title='Multiple defined in 3 places.'>stats_type</a> <a href='../Y/7039.html' title='Multiple used in 4 places.'>stats_vendor</a> = <font color='red'>{</font>
<a name='L1839'>1839         8,              <i><font color='green'>/* vendor + subtype */</font></i>
<a name='L1840'>1840         32,             <i><font color='green'>/* whatever */</font></i>
<a name='L1841'>1841         <a href='../D/10044.html' title='Multiple defined in 2 places.'>vendor_stats_init</a>,
<a name='L1842'>1842         <a href='../D/10043.html' title='Multiple defined in 2 places.'>vendor_stats_dump</a>,
<a name='L1843'>1843         <a href='../D/10042.html' title='Multiple defined in 2 places.'>vendor_stats_done</a>
<a name='L1844'>1844 <font color='red'>}</font>;
<a name='L1845'>1845 
<a name='L1846'>1846 <b>static</b> <b>int</b>
<a name='L1847'>1847 <a href='../S/293.html#L1992' title='Refered from 1992 in cbench/openflow/datapath/datapath.c.'>dp_genl_openflow_dumpit</a>(<b>struct</b> <a href='../Y/6803.html' title='Multiple used in 130 places.'>sk_buff</a> *<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <b>struct</b> <a href='../Y/4733.html' title='Multiple used in 3 places.'>netlink_callback</a> *<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>)
<a name='L1848'>1848 <font color='red'>{</font>
<a name='L1849'>1849         <b>struct</b> <a href='../D/7268.html' title='Multiple defined in 2 places.'>datapath</a> *<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>;
<a name='L1850'>1850         <b>struct</b> <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a> <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>;
<a name='L1851'>1851         <b>const</b> <b>struct</b> <a href='../D/9615.html' title='Multiple defined in 3 places.'>stats_type</a> *<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>;
<a name='L1852'>1852         <b>struct</b> <a href='../D/8896.html' title='Multiple defined in 3 places.'>ofp_stats_reply</a> *<a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a>;
<a name='L1853'>1853         <b>int</b> <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>;
<a name='L1854'>1854         <b>int</b> <a href='../Y/4379.html' title='Multiple used in 8 places.'>max_openflow_len</a>, <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>;
<a name='L1855'>1855         <b>void</b> *<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1856'>1856         <b>int</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1857'>1857 
<a name='L1858'>1858         <i><font color='green'>/* Set up the cleanup function for this dump.  Linux 2.6.20 and later</font></i>
<a name='L1859'>1859 <i><font color='green'>         * support setting up cleanup functions via the .doneit member of</font></i>
<a name='L1860'>1860 <i><font color='green'>         * struct genl_ops.  This kluge supports earlier versions also. */</font></i>
<a name='L1861'>1861         <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a> = <a href='../S/293.html#L1971' title='Defined at 1971 in cbench/openflow/datapath/datapath.c.'>dp_genl_openflow_done</a>;
<a name='L1862'>1862 
<a name='L1863'>1863         <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>.<a href='../Y/5731.html' title='Multiple used in 85 places.'>pid</a> = <a href='../Y/565.html' title='Multiple used in 2 places.'>NETLINK_CB</a>(<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>).<a href='../Y/5731.html' title='Multiple used in 85 places.'>pid</a>;
<a name='L1864'>1864         <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>.<a href='../Y/6669.html' title='Multiple used in 19 places.'>seq</a> = <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/4898.html' title='Multiple used in 2 places.'>nlh</a>-&gt;<a href='../Y/4905.html' title='Multiple used in 7 places.'>nlmsg_seq</a>;
<a name='L1865'>1865         <b>if</b> (!<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[0]) <font color='red'>{</font>
<a name='L1866'>1866                 <b>struct</b> <a href='../S/867.html#L108' title='Defined at 108 in cbench/openflow/lib/netlink-protocol.h.'>nlattr</a> *<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L49' title='Defined at 49 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_MAX</a> + 1];
<a name='L1867'>1867                 <b>struct</b> <a href='../D/8898.html' title='Multiple defined in 3 places.'>ofp_stats_request</a> *<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>;
<a name='L1868'>1868                 <b>struct</b> <a href='../S/867.html#L108' title='Defined at 108 in cbench/openflow/lib/netlink-protocol.h.'>nlattr</a> *<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a>;
<a name='L1869'>1869                 <a href='../Y/6800.html' title='Multiple used in 615 places.'>size_t</a> <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>, <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>;
<a name='L1870'>1870                 <b>int</b> <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>;
<a name='L1871'>1871 
<a name='L1872'>1872                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = nlmsg_parse(<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/4898.html' title='Multiple used in 2 places.'>nlh</a>, <a href='../S/867.html#L106' title='Defined at 106 in cbench/openflow/lib/netlink-protocol.h.'>GENL_HDRLEN</a>, <a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>, <a href='../S/184.html#L49' title='Defined at 49 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_MAX</a>,
<a name='L1873'>1873                                   <a href='../Y/2512.html' title='Multiple used in 3 places.'>dp_genl_openflow_policy</a>);
<a name='L1874'>1874                 <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> &lt; 0)
<a name='L1875'>1875                         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1876'>1876 
<a name='L1877'>1877                 <b>if</b> (!<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>])
<a name='L1878'>1878                         <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1879'>1879                 <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> = nla_get_u16(<a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L42' title='Defined at 42 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_DP_IDX</a>]);
<a name='L1880'>1880                 <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../S/293.html#L1152' title='Defined at 1152 in cbench/openflow/datapath/datapath.c.'>dp_get_by_idx</a>(<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>);
<a name='L1881'>1881                 <b>if</b> (!<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>)
<a name='L1882'>1882                         <b>return</b> -<a href='../Y/275.html' title='Multiple used in 14 places.'>ENOENT</a>;
<a name='L1883'>1883 
<a name='L1884'>1884                 <a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a> = <a href='../Y/1524.html' title='Multiple used in 40 places.'>attrs</a>[<a href='../S/184.html#L45' title='Defined at 45 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_A_OPENFLOW</a>];
<a name='L1885'>1885                 <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a> = <a href='../Y/4889.html' title='Multiple used in 22 places.'>nla_len</a>(<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a>);
<a name='L1886'>1886                 <b>if</b> (!<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a> || <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a> &lt; <b>sizeof</b> *<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>)
<a name='L1887'>1887                         <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1888'>1888 
<a name='L1889'>1889                 <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a> = <a href='../Y/4886.html' title='Multiple used in 8 places.'>nla_data</a>(<a href='../Y/7709.html' title='Multiple used in 37 places.'>va</a>);
<a name='L1890'>1890                 <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>.<a href='../Y/7997.html' title='Multiple used in 182 places.'>xid</a> = <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/3593.html' title='Multiple used in 234 places.'>header</a>.<a href='../Y/7997.html' title='Multiple used in 182 places.'>xid</a>;
<a name='L1891'>1891                 <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../D/8631.html' title='Multiple defined in 2 places.'>ntohs</a>(<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>);
<a name='L1892'>1892                 <b>if</b> (<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/3593.html' title='Multiple used in 234 places.'>header</a>.<a href='../Y/7770.html' title='Multiple used in 173 places.'>version</a> != <a href='../Y/621.html' title='Multiple used in 78 places.'>OFP_VERSION</a>) <font color='red'>{</font>
<a name='L1893'>1893                         <a href='../D/7549.html' title='Multiple defined in 2 places.'>dp_send_error_msg</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, &amp;<a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>, <a href='../D/3391.html' title='Multiple defined in 3 places.'>OFPET_BAD_REQUEST</a>,
<a name='L1894'>1894                                           <a href='../D/3361.html' title='Multiple defined in 3 places.'>OFPBRC_BAD_VERSION</a>, <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>, <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>);
<a name='L1895'>1895                         <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1896'>1896                 <font color='red'>}</font>
<a name='L1897'>1897                 <b>if</b> (<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/3593.html' title='Multiple used in 234 places.'>header</a>.<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> != <a href='../D/3694.html' title='Multiple defined in 2 places.'>OFPT_STATS_REQUEST</a>
<a name='L1898'>1898                     || <a href='../D/8631.html' title='Multiple defined in 2 places.'>ntohs</a>(<a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/3593.html' title='Multiple used in 234 places.'>header</a>.<a href='../Y/4125.html' title='Multiple used in 540 places.'>length</a>) != <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>)
<a name='L1899'>1899                         <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1900'>1900 
<a name='L1901'>1901                 <b>if</b> (<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> == <a href='../D/3627.html' title='Multiple defined in 2 places.'>OFPST_VENDOR</a>) <font color='red'>{</font>
<a name='L1902'>1902                         <i><font color='green'>/* Vendor is not in the array, take care of it */</font></i>
<a name='L1903'>1903                         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = &amp;<a href='../Y/7039.html' title='Multiple used in 4 places.'>stats_vendor</a>;
<a name='L1904'>1904                 <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1905'>1905                         <b>if</b> (<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> &gt;= <a href='../S/840.html#L69' title='Defined at 69 in cbench/openflow/lib/util.h.'>ARRAY_SIZE</a>(<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>) || !<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>[<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>].<a href='../S/252.html#L203' title='Defined at 203 in cbench/openflow/tests/test-stp.c.'>dump</a>) <font color='red'>{</font>
<a name='L1906'>1906                                 <a href='../D/7549.html' title='Multiple defined in 2 places.'>dp_send_error_msg</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, &amp;<a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>,
<a name='L1907'>1907                                                   <a href='../D/3391.html' title='Multiple defined in 3 places.'>OFPET_BAD_REQUEST</a>,
<a name='L1908'>1908                                                   <a href='../D/3356.html' title='Multiple defined in 2 places.'>OFPBRC_BAD_STAT</a>, <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>, <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>);
<a name='L1909'>1909                                 <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1910'>1910                         <font color='red'>}</font>
<a name='L1911'>1911                         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = &amp;<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>[<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>];
<a name='L1912'>1912                 <font color='red'>}</font>
<a name='L1913'>1913                 <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> = <a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a> - <a href='../Y/5075.html' title='Multiple used in 34 places.'>offsetof</a>(<b>struct</b> <a href='../D/8898.html' title='Multiple defined in 3 places.'>ofp_stats_request</a>, <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>);
<a name='L1914'>1914                 <b>if</b> (<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> &lt; <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/4451.html' title='Multiple used in 7 places.'>min_body</a> || <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> &gt; <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/4363.html' title='Multiple used in 7 places.'>max_body</a>)
<a name='L1915'>1915                         <b>return</b> -<a href='../Y/267.html' title='Multiple used in 50 places.'>EINVAL</a>;
<a name='L1916'>1916 
<a name='L1917'>1917                 <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[0] = 1;
<a name='L1918'>1918                 <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[1] = <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>;
<a name='L1919'>1919                 <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[2] = <a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a>;
<a name='L1920'>1920                 <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[3] = <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/3593.html' title='Multiple used in 234 places.'>header</a>.<a href='../Y/7997.html' title='Multiple used in 182 places.'>xid</a>;
<a name='L1921'>1921                 <b>if</b> (<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../D/8107.html' title='Multiple defined in 14 places.'>init</a>) <font color='red'>{</font>
<a name='L1922'>1922                         <b>void</b> *<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>;
<a name='L1923'>1923                         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../D/8107.html' title='Multiple defined in 14 places.'>init</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6474.html' title='Multiple used in 76 places.'>rq</a>-&gt;<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>, &amp;<a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>);
<a name='L1924'>1924                         <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>)
<a name='L1925'>1925                                 <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1926'>1926                         <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[4] = (<b>long</b>) <a href='../S/849.html#L59' title='Defined at 59 in cbench/openflow/lib/rconn.c.'>state</a>;
<a name='L1927'>1927                 <font color='red'>}</font>
<a name='L1928'>1928         <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[0] == 1) <font color='red'>{</font>
<a name='L1929'>1929                 <a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>.<a href='../Y/7997.html' title='Multiple used in 182 places.'>xid</a> = <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[3];
<a name='L1930'>1930                 <a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a> = <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[1];
<a name='L1931'>1931                 <b>if</b> (<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[2] == <a href='../D/3627.html' title='Multiple defined in 2 places.'>OFPST_VENDOR</a>) <font color='red'>{</font>
<a name='L1932'>1932                         <i><font color='green'>/* Vendor is not in the array, take care of it */</font></i>
<a name='L1933'>1933                         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = &amp;<a href='../Y/7039.html' title='Multiple used in 4 places.'>stats_vendor</a>;
<a name='L1934'>1934                 <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1935'>1935                         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = &amp;<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>[<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[2]];
<a name='L1936'>1936                 <font color='red'>}</font>
<a name='L1937'>1937 
<a name='L1938'>1938                 <a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a> = <a href='../S/293.html#L1152' title='Defined at 1152 in cbench/openflow/datapath/datapath.c.'>dp_get_by_idx</a>(<a href='../Y/2521.html' title='Multiple used in 86 places.'>dp_idx</a>);
<a name='L1939'>1939                 <b>if</b> (!<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>)
<a name='L1940'>1940                         <b>return</b> -<a href='../Y/275.html' title='Multiple used in 14 places.'>ENOENT</a>;
<a name='L1941'>1941         <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1942'>1942                 <b>return</b> 0;
<a name='L1943'>1943         <font color='red'>}</font>
<a name='L1944'>1944 
<a name='L1945'>1945         <a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a> = <a href='../S/293.html#L153' title='Defined at 153 in cbench/openflow/datapath/datapath.c.'>put_openflow_headers</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, <a href='../D/3691.html' title='Multiple defined in 2 places.'>OFPT_STATS_REPLY</a>, &amp;<a href='../D/9491.html' title='Multiple defined in 2 places.'>sender</a>,
<a name='L1946'>1946                                    &amp;<a href='../Y/4379.html' title='Multiple used in 8 places.'>max_openflow_len</a>);
<a name='L1947'>1947         <b>if</b> (<a href='../Y/473.html' title='Multiple used in 8 places.'>IS_ERR</a>(<a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a>))
<a name='L1948'>1948                 <b>return</b> <a href='../Y/712.html' title='Multiple used in 6 places.'>PTR_ERR</a>(<a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a>);
<a name='L1949'>1949         <a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a>-&gt;<a href='../Y/7553.html' title='Multiple used in 958 places.'>type</a> = <a href='../Y/3678.html' title='Multiple used in 586 places.'>htons</a>(<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[2]);
<a name='L1950'>1950         <a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a>-&gt;<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = 0;
<a name='L1951'>1951         <a href='../S/293.html#L188' title='Defined at 188 in cbench/openflow/datapath/datapath.c.'>resize_openflow_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, &amp;<a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a>-&gt;<a href='../Y/3593.html' title='Multiple used in 234 places.'>header</a>, <a href='../Y/4379.html' title='Multiple used in 8 places.'>max_openflow_len</a>);
<a name='L1952'>1952         <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a> = <a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a>-&gt;<a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>;
<a name='L1953'>1953         <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a> = <a href='../Y/4379.html' title='Multiple used in 8 places.'>max_openflow_len</a> - <a href='../Y/5075.html' title='Multiple used in 34 places.'>offsetof</a>(<b>struct</b> <a href='../D/8896.html' title='Multiple defined in 3 places.'>ofp_stats_reply</a>, <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>);
<a name='L1954'>1954 
<a name='L1955'>1955         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../S/252.html#L203' title='Defined at 203 in cbench/openflow/tests/test-stp.c.'>dump</a>(<a href='../Y/2499.html' title='Multiple used in 612 places.'>dp</a>, (<b>void</b> *) <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[4], <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>, &amp;<a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>);
<a name='L1956'>1956         <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> &gt;= 0) <font color='red'>{</font>
<a name='L1957'>1957                 <b>if</b> (!<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>)
<a name='L1958'>1958                         <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[0] = 2;
<a name='L1959'>1959                 <b>else</b>
<a name='L1960'>1960                         <a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a>-&gt;<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../D/8631.html' title='Multiple defined in 2 places.'>ntohs</a>(<a href='../D/3619.html' title='Multiple defined in 2 places.'>OFPSF_REPLY_MORE</a>);
<a name='L1961'>1961                 <a href='../S/293.html#L188' title='Defined at 188 in cbench/openflow/datapath/datapath.c.'>resize_openflow_skb</a>(<a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>, &amp;<a href='../Y/5524.html' title='Multiple used in 32 places.'>osr</a>-&gt;<a href='../Y/3593.html' title='Multiple used in 234 places.'>header</a>,
<a name='L1962'>1962                                     (<a href='../Y/5075.html' title='Multiple used in 34 places.'>offsetof</a>(<b>struct</b> <a href='../D/8896.html' title='Multiple defined in 3 places.'>ofp_stats_reply</a>, <a href='../Y/1642.html' title='Multiple used in 85 places.'>body</a>)
<a name='L1963'>1963                                      + <a href='../Y/1644.html' title='Multiple used in 47 places.'>body_len</a>));
<a name='L1964'>1964                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../Y/6805.html' title='Multiple used in 367 places.'>skb</a>-&gt;<a href='../Y/4119.html' title='Multiple used in 983 places.'>len</a>;
<a name='L1965'>1965         <font color='red'>}</font>
<a name='L1966'>1966 
<a name='L1967'>1967         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L1968'>1968 <font color='red'>}</font>
<a name='L1969'>1969 
<a name='L1970'>1970 <b>static</b> <b>int</b>
<a name='L1971'>1971 <a href='../R/2787.html' title='Multiple refered from 2 places.'>dp_genl_openflow_done</a>(<b>struct</b> <a href='../Y/4733.html' title='Multiple used in 3 places.'>netlink_callback</a> *<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>)
<a name='L1972'>1972 <font color='red'>{</font>
<a name='L1973'>1973         <b>if</b> (<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[0]) <font color='red'>{</font>
<a name='L1974'>1974                 <b>const</b> <b>struct</b> <a href='../D/9615.html' title='Multiple defined in 3 places.'>stats_type</a> *<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>;
<a name='L1975'>1975                 <b>if</b> (<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[2] == <a href='../D/3627.html' title='Multiple defined in 2 places.'>OFPST_VENDOR</a>) <font color='red'>{</font>
<a name='L1976'>1976                         <i><font color='green'>/* Vendor is not in the array, take care of it */</font></i>
<a name='L1977'>1977                         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = &amp;<a href='../Y/7039.html' title='Multiple used in 4 places.'>stats_vendor</a>;
<a name='L1978'>1978                 <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1979'>1979                         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a> = &amp;<a href='../Y/7023.html' title='Multiple used in 238 places.'>stats</a>[<a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[2]];
<a name='L1980'>1980                 <font color='red'>}</font>
<a name='L1981'>1981                 <b>if</b> (<a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a>)
<a name='L1982'>1982                         <a href='../Y/6552.html' title='Multiple used in 565 places.'>s</a>-&gt;<a href='../Y/2494.html' title='Multiple used in 87 places.'>done</a>((<b>void</b> *) <a href='../Y/1818.html' title='Multiple used in 85 places.'>cb</a>-&gt;<a href='../Y/1469.html' title='Multiple used in 437 places.'>args</a>[4]);
<a name='L1983'>1983         <font color='red'>}</font>
<a name='L1984'>1984         <b>return</b> 0;
<a name='L1985'>1985 <font color='red'>}</font>
<a name='L1986'>1986 
<a name='L1987'>1987 <b>static</b> <b>struct</b> <a href='../Y/3331.html' title='Multiple used in 7 places.'>genl_ops</a> <a href='../Y/2517.html' title='Multiple used in 2 places.'>dp_genl_ops_openflow</a> = <font color='red'>{</font>
<a name='L1988'>1988         .<a href='../Y/1933.html' title='Multiple used in 169 places.'>cmd</a> = <a href='../S/184.html#L60' title='Defined at 60 in cbench/openflow/include/openflow/openflow-netlink.h.'>DP_GENL_C_OPENFLOW</a>,
<a name='L1989'>1989         .<a href='../Y/3119.html' title='Multiple used in 292 places.'>flags</a> = <a href='../Y/374.html' title='Multiple used in 6 places.'>GENL_ADMIN_PERM</a>, <i><font color='green'>/* Requires CAP_NET_ADMIN privilege. */</font></i>
<a name='L1990'>1990         .<a href='../Y/5778.html' title='Multiple used in 13 places.'>policy</a> = <a href='../Y/2512.html' title='Multiple used in 3 places.'>dp_genl_openflow_policy</a>,
<a name='L1991'>1991         .<a href='../Y/2492.html' title='Multiple used in 6 places.'>doit</a> = <a href='../S/293.html#L1342' title='Defined at 1342 in cbench/openflow/datapath/datapath.c.'>dp_genl_openflow</a>,
<a name='L1992'>1992         .<a href='../Y/2604.html' title='Multiple used in 6 places.'>dumpit</a> = <a href='../S/293.html#L1847' title='Defined at 1847 in cbench/openflow/datapath/datapath.c.'>dp_genl_openflow_dumpit</a>,
<a name='L1993'>1993 <font color='red'>}</font>;
<a name='L1994'>1994 
<a name='L1995'>1995 <b>static</b> <b>struct</b> <a href='../Y/3331.html' title='Multiple used in 7 places.'>genl_ops</a> *<a href='../Y/2510.html' title='Multiple used in 3 places.'>dp_genl_all_ops</a>[] = <font color='red'>{</font>
<a name='L1996'>1996         <i><font color='green'>/* Keep this operation first.  Generic Netlink dispatching</font></i>
<a name='L1997'>1997 <i><font color='green'>         * looks up operations with linear search, so we want it at the</font></i>
<a name='L1998'>1998 <i><font color='green'>         * front. */</font></i>
<a name='L1999'>1999         &amp;<a href='../Y/2517.html' title='Multiple used in 2 places.'>dp_genl_ops_openflow</a>,
<a name='L2000'>2000 
<a name='L2001'>2001         &amp;<a href='../Y/2513.html' title='Multiple used in 2 places.'>dp_genl_ops_add_dp</a>,
<a name='L2002'>2002         &amp;<a href='../Y/2515.html' title='Multiple used in 2 places.'>dp_genl_ops_del_dp</a>,
<a name='L2003'>2003         &amp;<a href='../Y/2518.html' title='Multiple used in 2 places.'>dp_genl_ops_query_dp</a>,
<a name='L2004'>2004         &amp;<a href='../Y/2514.html' title='Multiple used in 2 places.'>dp_genl_ops_add_port</a>,
<a name='L2005'>2005         &amp;<a href='../Y/2516.html' title='Multiple used in 2 places.'>dp_genl_ops_del_port</a>,
<a name='L2006'>2006 <font color='red'>}</font>;
<a name='L2007'>2007 
<a name='L2008'>2008 <b>static</b> <b>int</b> <a href='../S/293.html#L2092' title='Refered from 2092 in cbench/openflow/datapath/datapath.c.'>dp_init_netlink</a>(<b>void</b>)
<a name='L2009'>2009 <font color='red'>{</font>
<a name='L2010'>2010         <b>int</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L2011'>2011         <b>int</b> <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>;
<a name='L2012'>2012 
<a name='L2013'>2013         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = genl_register_family(&amp;<a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a>);
<a name='L2014'>2014         <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>)
<a name='L2015'>2015                 <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L2016'>2016 
<a name='L2017'>2017         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> = 0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> &lt; <a href='../S/840.html#L69' title='Defined at 69 in cbench/openflow/lib/util.h.'>ARRAY_SIZE</a>(<a href='../Y/2510.html' title='Multiple used in 3 places.'>dp_genl_all_ops</a>); <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L2018'>2018                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = genl_register_ops(&amp;<a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a>, <a href='../Y/2510.html' title='Multiple used in 3 places.'>dp_genl_all_ops</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>]);
<a name='L2019'>2019                 <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>)
<a name='L2020'>2020                         <b>goto</b> <a href='../Y/2756.html' title='Multiple used in 3 places.'>err_unregister</a>;
<a name='L2021'>2021         <font color='red'>}</font>
<a name='L2022'>2022 
<a name='L2023'>2023         <b>for</b> (<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> = 0; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a> &lt; <a href='../S/293.html#L98' title='Defined at 98 in cbench/openflow/datapath/datapath.c.'>N_MC_GROUPS</a>; <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>++) <font color='red'>{</font>
<a name='L2024'>2024                 <a href='../Y/6891.html' title='Multiple used in 224 places.'>snprintf</a>(<a href='../Y/4403.html' title='Multiple used in 4 places.'>mc_groups</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>].<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>, <b>sizeof</b> <a href='../Y/4403.html' title='Multiple used in 4 places.'>mc_groups</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>].<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a>,
<a name='L2025'>2025                          "openflow%d", <a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>);
<a name='L2026'>2026                 <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../D/7937.html' title='Multiple defined in 2 places.'>genl_register_mc_group</a>(&amp;<a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a>, &amp;<a href='../Y/4403.html' title='Multiple used in 4 places.'>mc_groups</a>[<a href='../Y/3700.html' title='Multiple used in 2939 places.'>i</a>]);
<a name='L2027'>2027                 <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> &lt; 0)
<a name='L2028'>2028                         <b>goto</b> <a href='../Y/2756.html' title='Multiple used in 3 places.'>err_unregister</a>;
<a name='L2029'>2029         <font color='red'>}</font>
<a name='L2030'>2030 
<a name='L2031'>2031         <b>return</b> 0;
<a name='L2032'>2032 
<a name='L2033'>2033 <a href='../Y/2756.html' title='Multiple used in 3 places.'>err_unregister</a>:
<a name='L2034'>2034         <a href='../Y/3335.html' title='Multiple used in 2 places.'>genl_unregister_family</a>(&amp;<a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a>);
<a name='L2035'>2035         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L2036'>2036 <font color='red'>}</font>
<a name='L2037'>2037 
<a name='L2038'>2038 <b>static</b> <b>void</b> <a href='../S/293.html#L2126' title='Refered from 2126 in cbench/openflow/datapath/datapath.c.'>dp_uninit_netlink</a>(<b>void</b>)
<a name='L2039'>2039 <font color='red'>{</font>
<a name='L2040'>2040         <a href='../Y/3335.html' title='Multiple used in 2 places.'>genl_unregister_family</a>(&amp;<a href='../Y/2511.html' title='Multiple used in 10 places.'>dp_genl_family</a>);
<a name='L2041'>2041 <font color='red'>}</font>
<a name='L2042'>2042 
<a name='L2043'>2043 <i><font color='green'>/* Set the description strings if appropriate values are available from</font></i>
<a name='L2044'>2044 <i><font color='green'> * the DMI. */</font></i>
<a name='L2045'>2045 <b>static</b> <b>void</b> <a href='../S/293.html#L2104' title='Refered from 2104 in cbench/openflow/datapath/datapath.c.'>set_desc</a>(<b>void</b>)
<a name='L2046'>2046 <font color='red'>{</font>
<a name='L2047'>2047         <b>const</b> <b>char</b> *<a href='../Y/7701.html' title='Multiple used in 7 places.'>uuid</a> = <a href='../S/324.html#L102' title='Defined at 102 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>dmi_get_system_info</a>(<a href='../S/324.html#L25' title='Defined at 25 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>DMI_PRODUCT_UUID</a>);
<a name='L2048'>2048         <b>const</b> <b>char</b> *<a href='../Y/7757.html' title='Multiple used in 43 places.'>vendor</a> = <a href='../S/324.html#L102' title='Defined at 102 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>dmi_get_system_info</a>(<a href='../S/324.html#L21' title='Defined at 21 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>DMI_SYS_VENDOR</a>);
<a name='L2049'>2049         <b>const</b> <b>char</b> *<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a> = <a href='../S/324.html#L102' title='Defined at 102 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>dmi_get_system_info</a>(<a href='../S/324.html#L22' title='Defined at 22 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>DMI_PRODUCT_NAME</a>);
<a name='L2050'>2050         <b>const</b> <b>char</b> *<a href='../Y/7770.html' title='Multiple used in 173 places.'>version</a> = <a href='../S/324.html#L102' title='Defined at 102 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>dmi_get_system_info</a>(<a href='../S/324.html#L23' title='Defined at 23 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>DMI_PRODUCT_VERSION</a>);
<a name='L2051'>2051         <b>const</b> <b>char</b> *<a href='../Y/6672.html' title='Multiple used in 23 places.'>serial</a> = <a href='../S/324.html#L102' title='Defined at 102 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>dmi_get_system_info</a>(<a href='../S/324.html#L24' title='Defined at 24 in cbench/openflow/datapath/linux-2.6/compat-2.6/include/linux/dmi.h.'>DMI_PRODUCT_SERIAL</a>);
<a name='L2052'>2052         <b>const</b> <b>char</b> *<a href='../Y/7661.html' title='Multiple used in 3 places.'>uptr</a>;
<a name='L2053'>2053 
<a name='L2054'>2054         <b>if</b> (!<a href='../Y/7701.html' title='Multiple used in 7 places.'>uuid</a> || *<a href='../Y/7701.html' title='Multiple used in 7 places.'>uuid</a> == '\0' || <a href='../Y/7098.html' title='Multiple used in 203 places.'>strlen</a>(<a href='../Y/7701.html' title='Multiple used in 7 places.'>uuid</a>) != 36) 
<a name='L2055'>2055                 <b>return</b>;
<a name='L2056'>2056 
<a name='L2057'>2057         <i><font color='green'>/* We are only interested version 1 UUIDs, since the last six bytes</font></i>
<a name='L2058'>2058 <i><font color='green'>         * are an IEEE 802 MAC address. */</font></i>
<a name='L2059'>2059         <b>if</b> (<a href='../Y/7701.html' title='Multiple used in 7 places.'>uuid</a>[14] != '1') 
<a name='L2060'>2060                 <b>return</b>;
<a name='L2061'>2061 
<a name='L2062'>2062         <i><font color='green'>/* Only set if the UUID is from Nicira. */</font></i>
<a name='L2063'>2063         <a href='../Y/7661.html' title='Multiple used in 3 places.'>uptr</a> = <a href='../Y/7701.html' title='Multiple used in 7 places.'>uuid</a> + 24;
<a name='L2064'>2064         <b>if</b> (<a href='../Y/7101.html' title='Multiple used in 25 places.'>strncmp</a>(<a href='../Y/7661.html' title='Multiple used in 3 places.'>uptr</a>, <a href='../S/186.html#L11' title='Defined at 11 in cbench/openflow/include/openflow/nicira-ext.h.'>NICIRA_OUI_STR</a>, <a href='../Y/7098.html' title='Multiple used in 203 places.'>strlen</a>(<a href='../S/186.html#L11' title='Defined at 11 in cbench/openflow/include/openflow/nicira-ext.h.'>NICIRA_OUI_STR</a>)))
<a name='L2065'>2065                 <b>return</b>;
<a name='L2066'>2066 
<a name='L2067'>2067         <b>if</b> (<a href='../Y/7757.html' title='Multiple used in 43 places.'>vendor</a>)
<a name='L2068'>2068                 <a href='../S/878.html#L142' title='Defined at 142 in cbench/openflow/lib/util.c.'>strlcpy</a>(<a href='../Y/4440.html' title='Multiple used in 24 places.'>mfr_desc</a>, <a href='../Y/7757.html' title='Multiple used in 43 places.'>vendor</a>, <b>sizeof</b>(<a href='../Y/4440.html' title='Multiple used in 24 places.'>mfr_desc</a>));
<a name='L2069'>2069         <b>if</b> (<a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a> || <a href='../Y/7770.html' title='Multiple used in 173 places.'>version</a>)
<a name='L2070'>2070                 <a href='../Y/6891.html' title='Multiple used in 224 places.'>snprintf</a>(<a href='../Y/3683.html' title='Multiple used in 24 places.'>hw_desc</a>, <b>sizeof</b>(<a href='../Y/3683.html' title='Multiple used in 24 places.'>hw_desc</a>), "%s %s",
<a name='L2071'>2071                          <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a> ? <a href='../D/8420.html' title='Multiple defined in 16 places.'>name</a> : "",
<a name='L2072'>2072                          <a href='../Y/7770.html' title='Multiple used in 173 places.'>version</a> ? <a href='../Y/7770.html' title='Multiple used in 173 places.'>version</a> : "");
<a name='L2073'>2073         <b>if</b> (<a href='../Y/6672.html' title='Multiple used in 23 places.'>serial</a>)
<a name='L2074'>2074                 <a href='../S/878.html#L142' title='Defined at 142 in cbench/openflow/lib/util.c.'>strlcpy</a>(<a href='../Y/6673.html' title='Multiple used in 24 places.'>serial_num</a>, <a href='../Y/6672.html' title='Multiple used in 23 places.'>serial</a>, <b>sizeof</b>(<a href='../Y/6673.html' title='Multiple used in 24 places.'>serial_num</a>));
<a name='L2075'>2075 <font color='red'>}</font>
<a name='L2076'>2076 
<a name='L2077'>2077 <b>static</b> <b>int</b> <a href='../Y/1166.html' title='Multiple used in 9 places.'>__init</a> dp_init(<b>void</b>)
<a name='L2078'>2078 <font color='red'>{</font>
<a name='L2079'>2079         <b>int</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L2080'>2080 
<a name='L2081'>2081         <a href='../Y/5907.html' title='Multiple used in 27 places.'>printk</a>("OpenFlow %s, built "<a href='../Y/1124.html' title='Multiple used in 8 places.'>__DATE__</a>" "<a href='../Y/1150.html' title='Multiple used in 8 places.'>__TIME__</a>", "
<a name='L2082'>2082                "protocol 0x%02x\n", <a href='../D/5885.html' title='Multiple defined in 3 places.'>VERSION</a> <a href='../Y/140.html' title='Multiple used in 10 places.'>BUILDNR</a>, <a href='../Y/621.html' title='Multiple used in 78 places.'>OFP_VERSION</a>);
<a name='L2083'>2083 
<a name='L2084'>2084         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../S/283.html#L489' title='Defined at 489 in cbench/openflow/datapath/flow.c.'>flow_init</a>();
<a name='L2085'>2085         <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>)
<a name='L2086'>2086                 <b>goto</b> <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>;
<a name='L2087'>2087 
<a name='L2088'>2088         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../Y/6345.html' title='Multiple used in 2 places.'>register_netdevice_notifier</a>(&amp;<a href='../Y/2508.html' title='Multiple used in 5 places.'>dp_device_notifier</a>);
<a name='L2089'>2089         <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>)
<a name='L2090'>2090                 <b>goto</b> <a href='../Y/2765.html' title='Multiple used in 2 places.'>error_flow_exit</a>;
<a name='L2091'>2091 
<a name='L2092'>2092         <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a> = <a href='../S/293.html#L2008' title='Defined at 2008 in cbench/openflow/datapath/datapath.c.'>dp_init_netlink</a>();
<a name='L2093'>2093         <b>if</b> (<a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>)
<a name='L2094'>2094                 <b>goto</b> <a href='../Y/2772.html' title='Multiple used in 2 places.'>error_unreg_notifier</a>;
<a name='L2095'>2095 
<a name='L2096'>2096         <a href='../Y/2524.html' title='Multiple used in 5 places.'>dp_ioctl_hook</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L2097'>2097         <a href='../Y/2501.html' title='Multiple used in 6 places.'>dp_add_dp_hook</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L2098'>2098         <a href='../Y/2504.html' title='Multiple used in 6 places.'>dp_del_dp_hook</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L2099'>2099         <a href='../Y/2502.html' title='Multiple used in 6 places.'>dp_add_if_hook</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L2100'>2100         <a href='../Y/2505.html' title='Multiple used in 7 places.'>dp_del_if_hook</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L2101'>2101 
<a name='L2102'>2102         <i><font color='green'>/* Check if better descriptions of the switch are available than the</font></i>
<a name='L2103'>2103 <i><font color='green'>         * defaults. */</font></i>
<a name='L2104'>2104         <a href='../S/293.html#L2045' title='Defined at 2045 in cbench/openflow/datapath/datapath.c.'>set_desc</a>();
<a name='L2105'>2105 
<a name='L2106'>2106         <i><font color='green'>/* Hook into callback used by the bridge to intercept packets.</font></i>
<a name='L2107'>2107 <i><font color='green'>         * Parasites we are. */</font></i>
<a name='L2108'>2108         <b>if</b> (<a href='../Y/1668.html' title='Multiple used in 3 places.'>br_handle_frame_hook</a>)
<a name='L2109'>2109                 <a href='../Y/5907.html' title='Multiple used in 27 places.'>printk</a>("openflow: hijacking bridge hook\n");
<a name='L2110'>2110         <a href='../Y/1668.html' title='Multiple used in 3 places.'>br_handle_frame_hook</a> = <a href='../D/7523.html' title='Multiple defined in 2 places.'>dp_frame_hook</a>;
<a name='L2111'>2111 
<a name='L2112'>2112         <b>return</b> 0;
<a name='L2113'>2113 
<a name='L2114'>2114 <a href='../Y/2772.html' title='Multiple used in 2 places.'>error_unreg_notifier</a>:
<a name='L2115'>2115         <a href='../Y/7650.html' title='Multiple used in 3 places.'>unregister_netdevice_notifier</a>(&amp;<a href='../Y/2508.html' title='Multiple used in 5 places.'>dp_device_notifier</a>);
<a name='L2116'>2116 <a href='../Y/2765.html' title='Multiple used in 2 places.'>error_flow_exit</a>:
<a name='L2117'>2117         <a href='../S/283.html#L500' title='Defined at 500 in cbench/openflow/datapath/flow.c.'>flow_exit</a>();
<a name='L2118'>2118 <a href='../Y/2762.html' title='Multiple used in 572 places.'>error</a>:
<a name='L2119'>2119         <a href='../Y/5907.html' title='Multiple used in 27 places.'>printk</a>(<a href='../Y/481.html' title='Multiple used in 3 places.'>KERN_EMERG</a> "openflow: failed to install!");
<a name='L2120'>2120         <b>return</b> <a href='../S/252.html#L332' title='Defined at 332 in cbench/openflow/tests/test-stp.c.'>err</a>;
<a name='L2121'>2121 <font color='red'>}</font>
<a name='L2122'>2122 
<a name='L2123'>2123 <b>static</b> <b>void</b> dp_cleanup(<b>void</b>)
<a name='L2124'>2124 <font color='red'>{</font>
<a name='L2125'>2125         <a href='../S/282.html#L639' title='Defined at 639 in cbench/openflow/datapath/forward.c.'>fwd_exit</a>();
<a name='L2126'>2126         <a href='../S/293.html#L2038' title='Defined at 2038 in cbench/openflow/datapath/datapath.c.'>dp_uninit_netlink</a>();
<a name='L2127'>2127         <a href='../Y/7650.html' title='Multiple used in 3 places.'>unregister_netdevice_notifier</a>(&amp;<a href='../Y/2508.html' title='Multiple used in 5 places.'>dp_device_notifier</a>);
<a name='L2128'>2128         <a href='../S/283.html#L500' title='Defined at 500 in cbench/openflow/datapath/flow.c.'>flow_exit</a>();
<a name='L2129'>2129         <a href='../Y/1668.html' title='Multiple used in 3 places.'>br_handle_frame_hook</a> = <a href='../Y/603.html' title='Multiple used in 2170 places.'>NULL</a>;
<a name='L2130'>2130 <font color='red'>}</font>
<a name='L2131'>2131 
<a name='L2132'>2132 module_init(dp_init);
<a name='L2133'>2133 module_exit(dp_cleanup);
<a name='L2134'>2134 
<a name='L2135'>2135 MODULE_DESCRIPTION("OpenFlow Switching Datapath");
<a name='L2136'>2136 MODULE_AUTHOR("Copyright (c) 2007, 2008 The Board of Trustees of The Leland Stanford Junior University");
<a name='L2137'>2137 MODULE_LICENSE("GPL");
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L132'>[^]</a><a href='#L2123'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
