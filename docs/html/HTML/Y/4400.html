<html>
<head>
<title>mbuf</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<pre>
<a href='../S/13.html#L19'>mbuf</a>               19 cbench/oflops/msgbuf.c     struct msgbuf * mbuf;
<a href='../S/13.html#L20'>mbuf</a>               20 cbench/oflops/msgbuf.c     mbuf = malloc(sizeof(*mbuf));
<a href='../S/13.html#L21'>mbuf</a>               21 cbench/oflops/msgbuf.c     assert(mbuf);
<a href='../S/13.html#L22'>mbuf</a>               22 cbench/oflops/msgbuf.c     mbuf-&gt;len = bufsize;
<a href='../S/13.html#L23'>mbuf</a>               23 cbench/oflops/msgbuf.c     mbuf-&gt;buf = malloc(mbuf-&gt;len);
<a href='../S/13.html#L24'>mbuf</a>               24 cbench/oflops/msgbuf.c     assert(mbuf-&gt;len);
<a href='../S/13.html#L25'>mbuf</a>               25 cbench/oflops/msgbuf.c     mbuf-&gt;start = mbuf-&gt;end = 0;
<a href='../S/13.html#L27'>mbuf</a>               27 cbench/oflops/msgbuf.c     return mbuf;
<a href='../S/13.html#L31'>mbuf</a>               31 cbench/oflops/msgbuf.c int msgbuf_read(struct msgbuf * mbuf, int sock)
<a href='../S/13.html#L33'>mbuf</a>               33 cbench/oflops/msgbuf.c     int count = read(sock, &amp;mbuf-&gt;buf[mbuf-&gt;end], mbuf-&gt;len - mbuf-&gt;end);
<a href='../S/13.html#L35'>mbuf</a>               35 cbench/oflops/msgbuf.c         mbuf-&gt;end+=count;
<a href='../S/13.html#L36'>mbuf</a>               36 cbench/oflops/msgbuf.c     if( mbuf-&gt;end &gt;= mbuf-&gt;len)     // resize buffer if need be
<a href='../S/13.html#L37'>mbuf</a>               37 cbench/oflops/msgbuf.c         msgbuf_grow(mbuf);
<a href='../S/13.html#L41'>mbuf</a>               41 cbench/oflops/msgbuf.c int msgbuf_read_all(struct msgbuf * mbuf, int sock, int len)
<a href='../S/13.html#L50'>mbuf</a>               50 cbench/oflops/msgbuf.c         tmp =msgbuf_read(mbuf,sock);
<a href='../S/13.html#L60'>mbuf</a>               60 cbench/oflops/msgbuf.c int msgbuf_write(struct msgbuf * mbuf, int sock, int len)
<a href='../S/13.html#L62'>mbuf</a>               62 cbench/oflops/msgbuf.c 	int send_len = mbuf-&gt;end - mbuf-&gt;start;
<a href='../S/13.html#L70'>mbuf</a>               70 cbench/oflops/msgbuf.c     int count = write(sock, &amp;mbuf-&gt;buf[mbuf-&gt;start], send_len);
<a href='../S/13.html#L72'>mbuf</a>               72 cbench/oflops/msgbuf.c         mbuf-&gt;start+=count;
<a href='../S/13.html#L73'>mbuf</a>               73 cbench/oflops/msgbuf.c     if(mbuf-&gt;start &gt;= mbuf-&gt;end)
<a href='../S/13.html#L74'>mbuf</a>               74 cbench/oflops/msgbuf.c         mbuf-&gt;start = mbuf-&gt;end = 0;
<a href='../S/13.html#L78'>mbuf</a>               78 cbench/oflops/msgbuf.c int msgbuf_write_all(struct msgbuf * mbuf, int sock, int len)
<a href='../S/13.html#L81'>mbuf</a>               81 cbench/oflops/msgbuf.c     while(mbuf-&gt;start &lt; mbuf-&gt;end)
<a href='../S/13.html#L83'>mbuf</a>               83 cbench/oflops/msgbuf.c         tmp=msgbuf_write(mbuf, sock, len);
<a href='../S/13.html#L96'>mbuf</a>               96 cbench/oflops/msgbuf.c void msgbuf_clear(struct msgbuf * mbuf)
<a href='../S/13.html#L98'>mbuf</a>               98 cbench/oflops/msgbuf.c     mbuf-&gt;start = mbuf-&gt;end = 0;
<a href='../S/13.html#L101'>mbuf</a>              101 cbench/oflops/msgbuf.c void msgbuf_grow(struct msgbuf * mbuf)
<a href='../S/13.html#L103'>mbuf</a>              103 cbench/oflops/msgbuf.c     mbuf-&gt;len *=2 ;
<a href='../S/13.html#L104'>mbuf</a>              104 cbench/oflops/msgbuf.c     mbuf-&gt;buf = realloc(mbuf-&gt;buf, mbuf-&gt;len);
<a href='../S/13.html#L105'>mbuf</a>              105 cbench/oflops/msgbuf.c     if(mbuf-&gt;buf == NULL) {
<a href='../S/13.html#L107'>mbuf</a>              107 cbench/oflops/msgbuf.c       printf("buffer len: %d\n", mbuf-&gt;len);
<a href='../S/13.html#L109'>mbuf</a>              109 cbench/oflops/msgbuf.c     assert(mbuf-&gt;buf);
<a href='../S/13.html#L112'>mbuf</a>              112 cbench/oflops/msgbuf.c void * msgbuf_peek(struct msgbuf *mbuf)
<a href='../S/13.html#L114'>mbuf</a>              114 cbench/oflops/msgbuf.c    if(mbuf-&gt;start &gt;= mbuf-&gt;end)
<a href='../S/13.html#L116'>mbuf</a>              116 cbench/oflops/msgbuf.c   return (void *) &amp;mbuf-&gt;buf[mbuf-&gt;start]; 
<a href='../S/13.html#L119'>mbuf</a>              119 cbench/oflops/msgbuf.c int msgbuf_pull(struct msgbuf *mbuf, char * buf, int count)
<a href='../S/13.html#L121'>mbuf</a>              121 cbench/oflops/msgbuf.c     int min = MIN(count, mbuf-&gt;end - mbuf-&gt;start);
<a href='../S/13.html#L125'>mbuf</a>              125 cbench/oflops/msgbuf.c         memcpy(buf, &amp;mbuf-&gt;buf[mbuf-&gt;start], min);
<a href='../S/13.html#L126'>mbuf</a>              126 cbench/oflops/msgbuf.c     mbuf-&gt;start+=min;
<a href='../S/13.html#L127'>mbuf</a>              127 cbench/oflops/msgbuf.c     if(mbuf-&gt;start&gt;= mbuf-&gt;end)
<a href='../S/13.html#L128'>mbuf</a>              128 cbench/oflops/msgbuf.c         mbuf-&gt;start = mbuf-&gt;end = 0;
<a href='../S/13.html#L132'>mbuf</a>              132 cbench/oflops/msgbuf.c void msgbuf_push(struct msgbuf *mbuf, char * buf, int count)
<a href='../S/13.html#L134'>mbuf</a>              134 cbench/oflops/msgbuf.c     while((mbuf-&gt;end + count) &gt; mbuf-&gt;len)
<a href='../S/13.html#L135'>mbuf</a>              135 cbench/oflops/msgbuf.c         msgbuf_grow(mbuf);
<a href='../S/13.html#L136'>mbuf</a>              136 cbench/oflops/msgbuf.c     memcpy(&amp;mbuf-&gt;buf[mbuf-&gt;end], buf, count);
<a href='../S/13.html#L137'>mbuf</a>              137 cbench/oflops/msgbuf.c     mbuf-&gt;end += count;
<a href='../S/54.html#L12'>mbuf</a>               12 cbench/oflops/msgbuf.h int              msgbuf_read(struct msgbuf * mbuf, int sock);
<a href='../S/54.html#L13'>mbuf</a>               13 cbench/oflops/msgbuf.h int              msgbuf_read_all(struct msgbuf * mbuf, int sock, int len);
<a href='../S/54.html#L14'>mbuf</a>               14 cbench/oflops/msgbuf.h int              msgbuf_write(struct msgbuf * mbuf, int sock, int len);
<a href='../S/54.html#L15'>mbuf</a>               15 cbench/oflops/msgbuf.h int              msgbuf_write_all(struct msgbuf * mbuf, int sock, int len);
<a href='../S/54.html#L16'>mbuf</a>               16 cbench/oflops/msgbuf.h void             msgbuf_grow(struct msgbuf *mbuf);
<a href='../S/54.html#L17'>mbuf</a>               17 cbench/oflops/msgbuf.h void             msgbuf_clear(struct msgbuf *mbuf);
<a href='../S/54.html#L18'>mbuf</a>               18 cbench/oflops/msgbuf.h void *           msgbuf_peek(struct msgbuf *mbuf);
<a href='../S/54.html#L19'>mbuf</a>               19 cbench/oflops/msgbuf.h int              msgbuf_pull(struct msgbuf *mbuf, char * buf, int count);
<a href='../S/54.html#L20'>mbuf</a>               20 cbench/oflops/msgbuf.h void             msgbuf_push(struct msgbuf *mbuf, char * buf, int count);
<a href='../S/54.html#L22'>mbuf</a>               22 cbench/oflops/msgbuf.h #define msgbuf_count_buffered(mbuf) ((mbuf-&gt;end - mbuf-&gt;start))
</pre>
</body>
</html>
